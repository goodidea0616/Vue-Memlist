(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-018cf27c"],{"5dc7":function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",["invalid_link"===e.error?t("b-alert",{attrs:{variant:"danger",fade:""}},[e._v("Denna länk är felaktig")]):e._e(),"get_orders"===e.error?t("b-alert",{attrs:{variant:"danger",fade:""}},[e._v("Fel uppstod när din beställning skulle hämtas")]):e._e(),"no_orders"===e.error?t("b-alert",{attrs:{variant:"danger",fade:""}},[e._v("Du har inga väntande betalningar")]):e._e(),e.paymentSuccess?t("b-card",{staticClass:"mx-auto mt-12",staticStyle:{"max-width":"800px"},attrs:{align:"center"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 text-center"},[t("i",{staticClass:"fa fa-check-circle",staticStyle:{"font-size":"42px",color:"#8dda8d"}})])]),t("div",{staticClass:"row",staticStyle:{"margin-top":"15px","border-top":"1px solid #ebedf2","padding-top":"20px"}},[t("div",{staticClass:"col-12 text-center"},[t("h4",{staticClass:"event-name",staticStyle:{"text-align":"center"}},[e._v("Tack")]),t("br"),t("p",[e._v("Ditt medlemskap är betalat och du är nu registrerad som medlem")])])])]):e._e(),e.paymentSuccess?e._e():t("div",{staticClass:"mt-12",attrs:{id:"checkout-container"}})],1)},r=[],i=t("6bdb"),a=t.n(i),s=t("bc3a"),c=t.n(s),u={name:"dintero-vue-wrapper",props:[],components:{},data:function(){return{error:"",proceed:!1,client_id:null,order:null,paymentSuccess:!1}},mounted:function(){this.client_id=this.$route.params.client_id,this.client_id?null!==a.a&&void 0!==a.a?this.getOrdersForClient():console.error("dintero is null"):this.error="invalid_link"},watch:{},methods:{startDintero:function(){var e=this,n=document.getElementById("checkout-container");console.log(this.order);var t=a.a.embed({container:n,sid:this.order.dintero_id,language:"sv",onSession:function(e){console.log("session",e.session)},onPayment:function(n){e.paymentSuccess=!0,console.log("transaction_id",n.transaction_id),console.log("href",n.href);try{t.destroy()}catch(o){console.error("checkout destroy error: ",o)}},onPaymentError:function(e){console.log("href",e.href),t.destroy()},onSessionCancel:function(e){console.log("href",e.href),t.destroy()},onSessionLocked:function(e,n){console.log("pay_lock_id",e.pay_lock_id)},onSessionLockFailed:function(e,n){console.log("session lock failed")}})},getOrdersForClient:function(){var e=this;c.a.get("/shop_order/pending?client_id=".concat(this.client_id)).then((function(n){200===n.status&&(null===n.data||0===n.data.length?e.error="no_orders":(e.order=n.data[0],e.proceed=!0,e.startDintero()))})).catch((function(n){console.error(n),e.error="get_orders"}))},toastr:function(e,n,t){this.$bvToast.toast(t,{title:n,autoHideDelay:2e3,appendToast:!0,variant:e})}}},d=u,l=t("2877"),f=Object(l["a"])(d,o,r,!1,null,"a05e3db4",null);n["default"]=f.exports},"6bdb":function(e,n,t){(function(e){var t,o,r,i;t={path:void 0,exports:{},require:function(e,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},(o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{}).Promise=o.Promise||function(){var e,n,t,o=Object.prototype.toString,r="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,n,t,o){return Object.defineProperty(e,n,{value:t,writable:!0,configurable:!1!==o})}}catch(n){e=function(e,n,t){return e[n]=t,e}}function i(e,o){t.add(e,o),n||(n=r(t.drain))}function a(e){var n,t=typeof e;return null==e||"object"!=t&&"function"!=t||(n=e.then),"function"==typeof n&&n}function s(){for(var e=0;e<this.chain.length;e++)c(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function c(e,n,t){var o,r;try{!1===n?t.reject(e.msg):(o=!0===n?e.msg:n.call(void 0,e.msg))===t.promise?t.reject(TypeError("Promise-chain cycle")):(r=a(o))?r.call(o,t.resolve,t.reject):t.resolve(o)}catch(e){t.reject(e)}}function u(e){var n,t=this;if(!t.triggered){t.triggered=!0,t.def&&(t=t.def);try{(n=a(e))?i((function(){var o=new f(t);try{n.call(e,(function(){u.apply(o,arguments)}),(function(){d.apply(o,arguments)}))}catch(e){d.call(o,e)}})):(t.msg=e,t.state=1,t.chain.length>0&&i(s,t))}catch(e){d.call(new f(t),e)}}}function d(e){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=e,n.state=2,n.chain.length>0&&i(s,n))}function l(e,n,t,o){for(var r=0;r<n.length;r++)!function(r){e.resolve(n[r]).then((function(e){t(r,e)}),o)}(r)}function f(e){this.def=e,this.triggered=!1}function h(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new h(this);this.then=function(e,t){var o={success:"function"!=typeof e||e,failure:"function"==typeof t&&t};return o.promise=new this.constructor((function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");o.resolve=e,o.reject=n})),n.chain.push(o),0!==n.state&&i(s,n),o.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){u.call(n,e)}),(function(e){d.call(n,e)}))}catch(e){d.call(n,e)}}t=function(){var e,t,o;function r(e,n){this.fn=e,this.self=n,this.next=void 0}return{add:function(n,i){o=new r(n,i),t?t.next=o:e=o,t=o,o=void 0},drain:function(){var o=e;for(e=t=n=void 0;o;)o.fn.call(o.self),o=o.next}}}();var g=e({},"constructor",p,!1);return p.prototype=g,e(g,"__NPO__",0,!1),e(p,"resolve",(function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this((function(n,t){if("function"!=typeof n||"function"!=typeof t)throw TypeError("Not a function");n(e)}))})),e(p,"reject",(function(e){return new this((function(n,t){if("function"!=typeof n||"function"!=typeof t)throw TypeError("Not a function");t(e)}))})),e(p,"all",(function(e){var n=this;return"[object Array]"!=o.call(e)?n.reject(TypeError("Not an array")):0===e.length?n.resolve([]):new n((function(t,o){if("function"!=typeof t||"function"!=typeof o)throw TypeError("Not a function");var r=e.length,i=Array(r),a=0;l(n,e,(function(e,n){i[e]=n,++a===r&&t(i)}),o)}))})),e(p,"race",(function(e){var n=this;return"[object Array]"!=o.call(e)?n.reject(TypeError("Not an array")):new n((function(t,o){if("function"!=typeof t||"function"!=typeof o)throw TypeError("Not a function");l(n,e,(function(e,n){t(n)}),o)}))})),p}(),t.exports&&(t.exports=o.Promise),function(e){e.SessionNotFound="SessionNotFound",e.SessionLoaded="SessionLoaded",e.SessionUpdated="SessionUpdated",e.SessionCancel="SessionCancel",e.SessionPaymentOnHold="SessionPaymentOnHold",e.SessionPaymentAuthorized="SessionPaymentAuthorized",e.SessionPaymentError="SessionPaymentError",e.SessionLocked="SessionLocked",e.SessionLockFailed="SessionLockFailed"}(r||(r={})),function(e){e.HeightChanged="HeightChanged",e.LanguageChanged="LanguageChanged"}(i||(i={}));var a=function(e){window.location.assign(e)},s=function(e){var n=e.sid,t=e.endpoint,o=e.language,r=e.ui;if(!t)throw new Error("Invalid endpoint");var i=[o?"language="+o:"",r?"ui="+r:"","sdk=0.0.15"].filter((function(e){return e})).join("&");return t+"/v1/view/"+n+(i?"?"+i:"")},c=function(e){e.href&&a(e.href)},u=function(e,n){(e.height||0===e.height)&&n.iframe.setAttribute("style","width:100%; height:"+e.height+"px;")},d=function(e,n){e.language&&(n.language=e.language)},l=function(e,n,t){return function(e,o){var i=["sid","merchant_reference","transaction_id","error"].map((function(n){return[n,e[n]]}));e.type!==r.SessionCancel||e.error||i.push(["error","cancelled"]),i.push(["language",o.language]),i.push(["sdk","0.0.15"]);var a=i.filter((function(e){return e[1]})).map((function(e){return e[0]+"="+e[1]})).join("&");o.iframe.setAttribute("src",n+"/embedResult/?"+a),t(e,o)}};n.embed=function(e){try{var n=e.container,t=e.sid,o=e.language,a=e.endpoint,f=void 0===a?"https://checkout.dintero.com":a,h=e.onSession,p=e.onSessionCancel,g=e.onPayment,y=e.onPaymentAuthorized,v=e.onPaymentError,m=e.onSessionNotFound,w=e.onSessionLocked,b=e.onSessionLockFailed,S=[];return Promise.resolve(function(e,n,t){if(!e||!e.appendChild)throw new Error("Invalid container");var o=document.createElement("iframe");return o.setAttribute("frameborder","0"),o.setAttribute("allowTransparency","true"),o.setAttribute("style","width:100%; height:0;"),o.setAttribute("sandbox","allow-scripts allow-forms allow-same-origin allow-popups"),o.setAttribute("importance","high"),o.setAttribute("src",t),{iframe:o,initiate:function(){try{return Promise.resolve(new Promise((function(n,t){o.onload=function(){return n()},o.onerror=function(){return t()},e.appendChild(o)})))}catch(e){return Promise.reject(e)}}}}(n,0,s({sid:t,endpoint:f,language:o,ui:"inline"}))).then((function(e){var a=e.iframe,s=e.initiate,_={destroy:function(){a&&(S.forEach((function(e){return e.unsubscribe()})),a.parentElement&&n.removeChild(a))},iframe:a,language:o,lockSession:function(){!function(e,n){e.contentWindow&&e.contentWindow.postMessage({type:"LockSession",sid:n},"*")}(a,t)},refreshSession:function(){!function(e,n){e.contentWindow&&e.contentWindow.postMessage({type:"RefreshSession",sid:n},"*")}(a,t)}};return[{handler:d,eventTypes:[i.LanguageChanged]},{handler:u,eventTypes:[i.HeightChanged]},{handler:h,eventTypes:[r.SessionLoaded,r.SessionUpdated]},{eventTypes:[r.SessionPaymentOnHold],handler:g?l(0,f,g):c},{eventTypes:[r.SessionPaymentAuthorized],handler:y||g?l(0,f,y||g):c},{handler:p?l(0,f,p):c,eventTypes:[r.SessionCancel]},{handler:v?l(0,f,v):c,eventTypes:[r.SessionPaymentError]},{handler:m,eventTypes:[r.SessionNotFound]},{handler:w,eventTypes:[r.SessionLocked]},{handler:b,eventTypes:[r.SessionLockFailed]}].forEach((function(e){var n=e.handler;n&&S.push(function(e){var n=e.sid,t=e.endpoint,o=e.handler,r=e.eventTypes,i=e.checkout,a=function(e){var a=e.origin===t,s=e.source===i.iframe.contentWindow,c=e.data&&e.data.sid===n,u=-1!==r.indexOf(e.data&&e.data.type);a&&s&&c&&u&&(function(e,n){n.data.mid&&e.contentWindow&&e.contentWindow.postMessage({ack:n.data.mid},n.origin||"*")}(i.iframe,e),o(e.data,i))};return window.addEventListener("message",a,!1),{unsubscribe:function(){window.removeEventListener("message",a,!1)}}}({sid:t,endpoint:f,handler:n,eventTypes:e.eventTypes,checkout:_}))})),Promise.resolve(s()).then((function(){return _}))}))}catch(e){return Promise.reject(e)}},n.redirect=function(e){var n=e.endpoint;a(s({sid:e.sid,endpoint:void 0===n?"https://checkout.dintero.com":n,language:e.language}))}}).call(this,t("c8ba"))}}]);
//# sourceMappingURL=chunk-018cf27c.1e6396cd.js.map