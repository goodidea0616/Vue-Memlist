(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18b03f30"],{"0e12":function(t,e,a){},"2afb":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"px-5 mb-8 bg-white",staticStyle:{height:"100%"},attrs:{id:"page-periods"}},[a("h4",{staticClass:"mb-8 ml-2 mt-8"},[t._v("Registrering")]),t.created?a("b-card",{staticClass:"mb-2 mt-2",attrs:{title:"Föreningen har skapats","hide-footer":""}},[a("b-alert",{attrs:{variant:"success",show:""}},[t._v("En inbjudningslänk har skickats till alla angivna administratörer. Klicka på länken i mailet för att få tillgång till föreningen.")])],1):t._e(),t.created?t._e():a("b-card",{staticClass:"mb-2 shadow-sm",attrs:{title:"","hide-footer":""}},[a("div",{staticClass:"wizard wizard-3",attrs:{id:"kt_wizard_v3","data-wizard-state":"step-first","data-wizard-clickable":"true"}},[a("div",{staticClass:"wizard-nav border-bottom mb-1 mb-lg-5"},[a("div",{staticClass:"wizard-steps px-8 py-8 px-lg-15 py-lg-3"},[a("div",{staticClass:"wizard-step",attrs:{"data-wizard-type":"step","data-wizard-state":"current"}},[a("div",{staticClass:"wizard-label"},[a("h3",{staticClass:"wizard-title"},[a("span",[t._v("1")]),t._v(" Uppgifter ")]),a("div",{staticClass:"wizard-bar"})])]),a("div",{staticClass:"wizard-step",attrs:{"data-wizard-type":"step","data-wizard-state":"pending"}},[a("div",{staticClass:"wizard-label"},[a("h3",{staticClass:"wizard-title"},[a("span",[t._v("2")]),t._v(" Säte ")]),a("div",{staticClass:"wizard-bar"})])]),a("div",{staticClass:"wizard-step",attrs:{"data-wizard-type":"step","data-wizard-state":"pending"}},[a("div",{staticClass:"wizard-label"},[a("h3",{staticClass:"wizard-title"},[a("span",[t._v("3")]),t._v(" Föreningstyp ")]),a("div",{staticClass:"wizard-bar"})])]),a("div",{staticClass:"wizard-step",attrs:{"data-wizard-type":"step","data-wizard-state":"pending"}},[a("div",{staticClass:"wizard-label"},[a("h3",{staticClass:"wizard-title"},[a("span",[t._v("4")]),t._v(" Administratörskonton ")]),a("div",{staticClass:"wizard-bar"})])]),a("div",{staticClass:"wizard-step",attrs:{"data-wizard-type":"step","data-wizard-state":"pending"}},[a("div",{staticClass:"wizard-label"},[a("h3",{staticClass:"wizard-title"},[a("span",[t._v("5")]),t._v(" Medlemskrav ")]),a("div",{staticClass:"wizard-bar"})])]),a("div",{staticClass:"wizard-step",attrs:{"data-wizard-type":"step","data-wizard-state":"pending"}},[a("div",{staticClass:"wizard-label"},[a("h3",{staticClass:"wizard-title"},[a("span",[t._v("6")]),t._v(" Kontrollera ")]),a("div",{staticClass:"wizard-bar"})])])])]),a("div",{staticClass:"row justify-content-center py-12 px-8 py-lg-15 px-lg-10"},[a("div",{staticClass:"col-xl-12 col-xxl-7"},[a("form",{staticClass:"form",attrs:{id:"kt_form"}},[a("div",{staticClass:"pb-5",attrs:{"data-wizard-type":"step-content","data-wizard-state":"current"}},[a("b-alert",{attrs:{show:"",variant:"light"}},[t._v(t._s(t.isStandalone?"Du registrerar en förening som saknar moderförening":"Du registrerar en förening som är under "+this.parent_company.name)+" ")]),a("OrgNumber",{ref:"org_number",attrs:{page:t.pages[0],index:0},on:{isValid:t.isValid}})],1),a("div",{staticClass:"pb-5",attrs:{"data-wizard-type":"step-content","data-wizard-state":"pending"}},[a("Address",{ref:"address",attrs:{page:t.pages[1],index:1},on:{isValid:t.isValid}})],1),a("div",{staticClass:"pb-5",attrs:{"data-wizard-type":"step-content","data-wizard-state":"pending"}},[a("CompanyType",{ref:"type",attrs:{isStandalone:t.isStandalone,page:t.pages[2],index:2},on:{isValid:t.isValid}})],1),a("div",{staticClass:"pb-5",attrs:{"data-wizard-type":"step-content","data-wizard-state":"pending"}},[a("UserAccounts",{ref:"users",attrs:{page:t.pages[3],index:3},on:{isValid:t.isValid}})],1),a("div",{staticClass:"pb-5",attrs:{"data-wizard-type":"step-content","data-wizard-state":"pending"}},[a("MembershipRequirements",{ref:"requirements",attrs:{page:t.pages[4],index:4},on:{isValid:t.isValid}})],1),a("div",{staticClass:"pb-5",attrs:{"data-wizard-type":"step-content","data-wizard-state":"pending"}},[a("Confirm",{ref:"confirm",attrs:{page:t.pages[5],regdata:t.regdata,index:5},on:{isValid:t.isValid}})],1),a("div",{staticClass:"d-flex justify-content-between border-top pt-10"},[a("div",{staticClass:"mr-2"},[a("button",{staticClass:"btn btn-light-primary font-weight-bold text-uppercase px-9 py-4",attrs:{"data-wizard-type":"action-prev"}},[t._v(" Föregående ")])]),a("div",[a("button",{staticClass:"btn btn-primary font-weight-bold text-uppercase px-9 py-4",attrs:{"data-wizard-type":"action-next",disabled:t.disabledNextButton},on:{click:function(e){return t.nextPage(e)}}},[t._v(" Nästa steg ")])]),a("div",[t.lastPage?a("button",{staticClass:"btn btn-primary font-weight-bold text-uppercase px-9 py-4",attrs:{"data-ktwizard-type":"action-submit"},on:{click:function(e){return e.preventDefault(),t.createCompany(e)}}},[t._v(" Skapa konto ")]):t._e()])])])])])])])],1)},i=[],r=(a("b0c0"),a("893a")),n=a("bc3a"),o=a.n(n),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{domProps:{innerHTML:t._s(t.page.html)}}),a("b-form-group",{staticClass:"col-6",attrs:{id:"name-group",label:"Föreningsnamn","label-for":"name"}},[a("b-form-input",{attrs:{state:t.stateName,id:"name",placeholder:"Föreningsnamn"},on:{input:t.doValidation},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("div",[a("b-form-group",{staticClass:"col-6",attrs:{id:"address-group",label:"Gatuadress","label-for":"address"}},[a("b-form-input",{attrs:{state:t.stateAddress,id:"address",placeholder:"Gatuadress"},on:{input:t.doValidation},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1),a("div",[a("b-form-group",{staticClass:"col-6",attrs:{id:"co-group",label:"C/O","label-for":"co"}},[a("b-form-input",{attrs:{id:"co",placeholder:"C/O"},on:{input:t.doValidation},model:{value:t.form.co,callback:function(e){t.$set(t.form,"co",e)},expression:"form.co"}})],1)],1),a("div",[a("b-form-group",{staticClass:"col-6",attrs:{id:"zipcode-group",label:"Postkod","label-for":"zipcode"}},[a("b-form-input",{attrs:{state:t.stateZipcode,id:"zipcode",placeholder:"00000"},on:{input:t.doValidation},model:{value:t.form.zipcode,callback:function(e){t.$set(t.form,"zipcode",e)},expression:"form.zipcode"}})],1)],1),a("div",[a("b-form-group",{staticClass:"col-6",attrs:{id:"post-group",label:"Postort","label-for":"post"}},[a("b-form-input",{attrs:{state:t.statePost,id:"post",placeholder:""},on:{input:t.doValidation},model:{value:t.form.post,callback:function(e){t.$set(t.form,"post",e)},expression:"form.post"}})],1)],1),a("div",[a("b-form-group",{staticClass:"col-6",attrs:{id:"input-group-region_code",label:"Region","label-for":"input-region_code"}},[a("b-form-select",{attrs:{id:"region_code",options:t.regionOptions,state:t.stateRegion},on:{input:t.doValidation},model:{value:t.region_code,callback:function(e){t.region_code=e},expression:"region_code"}})],1)],1),a("div",[a("b-form-group",{staticClass:"col-6",attrs:{id:"input-group-commune_code",label:"Kommun","label-for":"input-commune_code"}},[a("b-form-select",{attrs:{id:"commune_code",options:t.communeOptions,state:t.stateCommune},on:{input:t.doValidation},model:{value:t.commune_code,callback:function(e){t.commune_code=e},expression:"commune_code"}})],1)],1)],1)},c=[],l=a("5530"),u=a("2f62"),m=(a("c1df"),{name:"details-page",props:["page"],components:{},computed:Object(l["a"])({},Object(u["b"])(["currentCompanyId","currentPeriodId"])),data:function(){return{stateName:!1,stateAddress:!1,stateZipcode:!1,statePost:!1,stateRegion:!1,stateCommune:!1,form:{birthdate:""},personnr:"",fmt_personnr:"",valid:!1,skipPersonnr:!1,regionOptions:[],communeOptions:[],region_code:null,commune_code:null,password1:"",password2:"",password1Valid:!1,password2Valid:!1,birthdate:"",regions:{}}},mounted:function(){this.loadRegions(),this.$emit("isValid",!1,this.page.index)},watch:{form:function(t,e){this.$emit("isValid",this.validate(t),this.page.index)},region_code:function(t,e){this.form.region_code=t,this.form.region=this.regions[this.form.region_code].region,t&&this.loadCommunes(t),this.$emit("isValid",this.validate(this.form),this.page.index)},commune_code:function(t,e){this.form.commune_code=t,this.form.commune=this.regions[this.form.region_code].communes[t].commune,this.$emit("isValid",this.validate(this.form),this.page.index)}},methods:{doValidation:function(){this.$emit("isValid",this.validate(this.form),this.page.index)},validate:function(t){var e=!0;return this.is_ok(t.name)?this.stateName=!0:(this.stateName=!1,e=!1),this.is_ok(t.address)?this.stateAddress=!0:(this.stateAddress=!1,e=!1),this.is_ok(t.post)?this.statePost=!0:(this.statePost=!1,e=!1),this.is_ok(t.zipcode)&&5===(t.zipcode+"").length?this.stateZipcode=!0:(this.stateZipcode=!1,e=!1),this.is_ok(t.region_code)?this.stateRegion=!0:(this.stateRegion=!1,e=!1),this.is_ok(t.commune_code)?this.stateCommune=!0:(this.stateCommune=!1,e=!1),e},is_ok:function(t){return null!==t&&void 0!==t&&t.length>0},getData:function(){return this.form},toastr:function(t,e,a){this.$bvToast.toast(a,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})},loadRegions:function(){var t=this;o.a.get("/location/regions").then((function(e){for(var a in t.regions=e.data.regions,t.regionOptions=[],t.regions)t.regionOptions.push({value:a,text:t.regions[a].region});t.regionOptions.sort((function(t,e){return t.text<e.text?-1:t.text>e.text?1:0}))})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte hämta regioner")}))},selectRegion:function(t){this.loadCommunes(t,1)},getCommunes:function(t){var e=[],a=this.regions[t].communes;for(var s in this.communes=a,a)e.push({value:s,text:a[s].commune});return e.sort((function(t,e){return t.text<e.text?-1:t.text>e.text?1:0})),e},loadCommunes:function(t){this.communeOptions=[];var e=this.regions[t].communes;for(var a in this.communes=e,e)this.communeOptions.push({value:a,text:e[a].commune});this.communeOptions.sort((function(t,e){return t.text<e.text?-1:t.text>e.text?1:0}))}}}),p=m,g=(a("5288"),a("2877")),h=Object(g["a"])(p,d,c,!1,null,"593277f2",null),f=h.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{domProps:{innerHTML:t._s(t.page.html)}}),t.isStandalone?a("b-card",{staticClass:"mb-8"},[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("label",{staticClass:"radio radio-outline radio-success mb-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],attrs:{type:"radio",value:"riks",name:"type"},domProps:{checked:t._q(t.selected,"riks")},on:{change:function(e){t.selected="riks"}}}),a("span",{staticStyle:{"margin-right":"12px"}}),t._v(" Riksförbund ")])])],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("p",[t._v("Ett rikförbund med ett antal underföreningar")])])],1)],1):t._e(),a("b-card",{staticClass:"mb-8"},[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("label",{staticClass:"radio radio-outline radio-success mb-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],attrs:{type:"radio",value:"default",name:"type"},domProps:{checked:t._q(t.selected,"default")},on:{change:function(e){t.selected="default"}}}),a("span",{staticStyle:{"margin-right":"12px"}}),t._v(" Förening ")])])],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("p",[t._v("En förening, underförening eller övrig som ej stämmer med andra alterntiv")])])],1)],1),a("b-card",{staticClass:"mb-8"},[a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("label",{staticClass:"radio radio-outline radio-success mb-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],attrs:{type:"radio",value:"student",name:"type"},domProps:{checked:t._q(t.selected,"student")},on:{change:function(e){t.selected="student"}}}),a("span",{staticStyle:{"margin-right":"12px"}}),t._v(" Studentkår ")])])],1),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("p",[t._v("Studentkårer, nationer och förbund")])])],1)],1)],1)},v=[],_={name:"companytype-page",props:["page","isStandalone"],components:{},data:function(){return{selected:""}},mounted:function(){this.$emit("isValid",!1,this.page.index)},watch:{selected:function(t,e){this.$emit("isValid",!0,this.page.index)}},methods:{doValidation:function(){this.$emit("isValid",""!==this.selected,this.page.index)},getData:function(){return{type:this.selected}},toastr:function(t,e,a){this.$bvToast.toast(a,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})}}},x=_,w=(a("8d6c"),Object(g["a"])(x,b,v,!1,null,"30c83220",null)),C=w.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.regdata.address?a("div",[a("b-form-group",{staticClass:"col-6",attrs:{id:"name-group",label:"Föreningsnamn","label-for":"name"}},[a("b-form-input",{attrs:{id:"name",placeholder:"Föreningsnamn",disabled:""},model:{value:t.regdata.address.name,callback:function(e){t.$set(t.regdata.address,"name",e)},expression:"regdata.address.name"}})],1),a("b-form-group",{staticClass:"col-6",attrs:{id:"address-group",label:"Gatuadress","label-for":"address"}},[a("b-form-input",{attrs:{id:"address",placeholder:"Gatuadress",disabled:""},model:{value:t.regdata.address.address,callback:function(e){t.$set(t.regdata.address,"address",e)},expression:"regdata.address.address"}})],1),a("b-form-group",{staticClass:"col-6",attrs:{id:"address-group",label:"C/O","label-for":"co"}},[a("b-form-input",{attrs:{id:"address",placeholder:"C/O",disabled:""},model:{value:t.regdata.address.address,callback:function(e){t.$set(t.regdata.address,"address",e)},expression:"regdata.address.address"}})],1),a("b-form-group",{staticClass:"col-6",attrs:{id:"zipcode-group",label:"Postkod","label-for":"zipcode"}},[a("b-form-input",{attrs:{id:"zipcode",placeholder:"00000",disabled:""},model:{value:t.regdata.address.zipcode,callback:function(e){t.$set(t.regdata.address,"zipcode",e)},expression:"regdata.address.zipcode"}})],1),a("b-form-group",{staticClass:"col-6",attrs:{id:"region-group",label:"Region","label-for":"region"}},[a("b-form-input",{attrs:{id:"region",placeholder:"",disabled:""},model:{value:t.regdata.address.region,callback:function(e){t.$set(t.regdata.address,"region",e)},expression:"regdata.address.region"}})],1),a("b-form-group",{staticClass:"col-6",attrs:{id:"commune-group",label:"Kommun","label-for":"commune"}},[a("b-form-input",{attrs:{id:"commune",placeholder:"",disabled:""},model:{value:t.regdata.address.commune,callback:function(e){t.$set(t.regdata.address,"commune",e)},expression:"regdata.address.commune"}})],1),t.regdata.org_number?a("div",[a("b-form-group",{staticClass:"col-6",attrs:{id:"personnr-group",label:"Organisationsnummer","label-for":"personnr"}},[a("b-form-input",{attrs:{id:"personnr",placeholder:"",disabled:""},model:{value:t.regdata.org_number.formatted.formatted,callback:function(e){t.$set(t.regdata.org_number.formatted,"formatted",e)},expression:"regdata.org_number.formatted.formatted"}})],1)],1):t._e(),t._m(0)],1):t._e()])},k=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex align-items-center mb-6"},[a("label",{staticClass:"checkbox checkbox-lg checkbox-outline checkbox-success"},[a("input",{attrs:{type:"checkbox",name:""}}),a("span")]),a("span",{staticClass:"ml-3 cursor-pointer"},[t._v("Jag har läst igenom de allmänna villkoren för användande och brukande av tjänsten och accepterar dessa")])])}],z={name:"confirm-page",props:["regdata","index","page"],components:{},computed:Object(l["a"])({},Object(u["b"])(["currentCompanyId","currentPeriodId"])),data:function(){return{accepted:!0}},mounted:function(){this.$emit("isValid",!0,this.index)},watch:{},methods:{doValidation:function(){console.log(this.regdata,": Formatted"),this.$emit("isValid",this.accepted,this.page.index)},toastr:function(t,e,a){this.$bvToast.toast(a,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})}}},$=z,O=(a("95e6"),Object(g["a"])($,y,k,!1,null,"03f4b5b2",null)),V=O.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticClass:"mb-6"},[t._v(" Ange vilka medlemskrav som ska finnas på varje medlem. Dessa fält kan ändras i efterhand. ")]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"check-list"},[t._l(t.requirements,(function(e,s){return[a("div",{key:s,staticClass:"d-flex align-items-center mb-4"},[a("label",{staticClass:"checkbox checkbox-lg checkbox-outline checkbox-success"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],attrs:{type:"checkbox",name:e.id},domProps:{value:e.id,checked:Array.isArray(t.selected)?t._i(t.selected,e.id)>-1:t.selected},on:{change:function(a){var s=t.selected,i=a.target,r=!!i.checked;if(Array.isArray(s)){var n=e.id,o=t._i(s,n);i.checked?o<0&&(t.selected=s.concat([n])):o>-1&&(t.selected=s.slice(0,o).concat(s.slice(o+1)))}else t.selected=r}}}),a("span",{staticStyle:{"margin-right":"12px"}})]),a("span",{staticClass:"ml-3 cursor-pointer"},[t._v(t._s(e.name))])])]}))],2)])])},S=[],D={name:"details-page",props:["page"],components:{},computed:Object(l["a"])({},Object(u["b"])(["currentCompanyId","currentPeriodId"])),data:function(){return{selected:[],requirements:[]}},mounted:function(){this.loadRequirements(),this.$emit("isValid",!0,this.page.index)},watch:{selected:function(t,e){this.doValidation()}},methods:{doValidation:function(){this.$emit("isValid",!0,this.page.index)},getData:function(){return{requirements:this.selected}},toastr:function(t,e,a){this.$bvToast.toast(a,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})},get_lang_text:function(t,e){for(var a=0;a<t.lang_text.length;++a)if(t.lang_text[a].lang==e)return t.lang_text[a].text;return""},loadRequirements:function(){var t=this;o.a.get("/company/constreq").then((function(e){for(var a=e.data.requirements,s=0;s<a.length;++s){var i=a[s],r={id:i.id,name:t.get_lang_text(i.lang_record,"sv")};t.requirements.push(r)}})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte hämta medlemskrav")}))}}},j=D,T=(a("baca"),Object(g["a"])(j,P,S,!1,null,"52917efe",null)),A=T.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.skipOrgnumber?t._e():a("div",[a("div",{domProps:{innerHTML:t._s(t.page.html)}}),a("b-form-group",{staticClass:"col-6",attrs:{id:"org_number-group",label:"Organisationnummer","label-for":"org_number"}},[a("b-form-input",{attrs:{id:"org_number",placeholder:"AABBCC-DDEE",state:t.valid},model:{value:t.org_number,callback:function(e){t.org_number=e},expression:"org_number"}})],1)],1),t.skipOrgnumber?a("div",[a("p",[t._v("Du har valt att hoppa över organisationnummer")])]):t._e(),a("b-form-group",[a("div",{staticClass:"d-flex align-items-center mb-4"},[a("label",{staticClass:"checkbox checkbox-lg checkbox-outline checkbox-success"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.skipOrgnumber,expression:"skipOrgnumber"}],attrs:{type:"checkbox",name:""},domProps:{checked:Array.isArray(t.skipOrgnumber)?t._i(t.skipOrgnumber,null)>-1:t.skipOrgnumber},on:{click:function(e){t.skipOrgnumber=!t.skipOrgnumber},change:function(e){var a=t.skipOrgnumber,s=e.target,i=!!s.checked;if(Array.isArray(a)){var r=null,n=t._i(a,r);s.checked?n<0&&(t.skipOrgnumber=a.concat([r])):n>-1&&(t.skipOrgnumber=a.slice(0,n).concat(a.slice(n+1)))}else t.skipOrgnumber=i}}}),a("span")]),a("span",{staticClass:"ml-3 cursor-pointer"},[t._v("Föreningen har inget organisationnummer")])])])],1)},E=[],q=(a("ac1f"),a("5319"),{name:"org_number-page",props:["page"],components:{},computed:Object(l["a"])({},Object(u["b"])(["currentCompanyId","currentPeriodId"])),data:function(){return{form:{},org_number:"",fmt_org_number:"",valid:!1,skipOrgnumber:!1}},mounted:function(){this.$emit("isValid",!1,this.page.index)},watch:{skipOrgnumber:function(t,e){t?(console.log("emitting true"),this.$emit("isValid",!0,this.page.index)):(console.log("emitting valid: "+this.valid),this.$emit("isValid",this.valid,this.page.index))},org_number:function(t,e){var a=this.validate_org_number(t);this.valid=a.valid,this.fmt_org_number=a.formatted,this.$emit("isValid",this.valid,this.page.index),this.$emit("setData",{org_number:this.org_number},this.page.index),this.form.valid=this.valid,this.form.formatted=a,this.form.fmt_org_number=this.fmt_org_number,this.org_number=a.formatted}},methods:{getData:function(){return this.form},toastr:function(t,e,a){this.$bvToast.toast(a,{title:e,autoHideDelay:1e3,appendToast:!0,variant:t})},validate_org_number:function(t){var e=t;7==e.length&&"-"==e.substr(6,1)||(e=e.replace(/[^0-9.]/g,""),e.length>6&&(e=e.substr(0,6)+"-"+e.substr(6,e.length-6)));var a=!1;return 11===e.length&&(a=!0),{valid:a,formatted:e}}}}),R=q,F=(a("fe2c"),Object(g["a"])(R,N,E,!1,null,"32310c45",null)),H=F.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{domProps:{innerHTML:t._s(t.page.html)}}),a("b-row",[a("b-col",{attrs:{lg:"12"}},[a("b-card",{staticClass:"mb-2",attrs:{title:"Lägg till administratör",tag:"article"}},[a("b-card-text",[t._v(" Lägg till en ny användare genom att ange e-postadressen till personen nedan. ")]),a("b-form",[a("b-form-input",{attrs:{id:"invite-email",placeholder:"E-post",state:t.validEmail},model:{value:t.invite_email,callback:function(e){t.invite_email=e},expression:"invite_email"}})],1),a("b-button",{staticClass:"mt-2",attrs:{disabled:!t.validEmail,type:"button",href:"#",variant:"primary"},on:{click:function(e){return t.inviteEmail(e)}}},[t._v("Lägg till")])],1)],1)],1),a("div",{staticClass:"card card-custom card-stretch gutter-b"},[a("div",{staticClass:"card-header border-0 py-5"}),a("div",{staticClass:"card-body pt-0 pb-3"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-head-custom table-vertical-center table-head-bg table-borderless"},[t._m(0),a("tbody",[t._l(t.users,(function(e,s){return[a("UserAccountTableRow",{key:s,attrs:{user:e,currentCompanyId:t.currentCompanyId},on:{deleteUserClicked:t.deleteUserClicked,toastr:t.toastr}})]}))],2)])])])])],1)},U=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"text-left"},[a("th",{staticStyle:{"min-width":"110px"}},[t._v("E-post")]),a("th",{staticStyle:{"min-width":"110px"}},[t._v("Nivå")]),a("th")])])}],M=(a("a434"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("span",{staticClass:"d-block font-size-lg"},[t._v(t._s(t.user.email))])]),t._m(0),a("td",{staticClass:"text-right pr-0"},[a("a",{staticClass:"btn btn-icon btn-light btn-sm",attrs:{href:"#"},on:{click:function(e){return t.deleteUserClicked(t.user.user_id)}}},[a("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[a("inline-svg",{attrs:{src:"/assets/svg/Trash.svg"}})],1)])])])}),K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("span",{staticClass:"d-block font-size-lg"},[t._v("Administratör")])])}],L={name:"useraccount-table-row",props:["user"],computed:Object(l["a"])({},Object(u["b"])(["currentCompanyId"])),data:function(){return{}},mounted:function(){},watch:{},methods:{deleteUserClicked:function(t){this.$emit("deleteUserClicked",t)}}},B=L,Z=(a("ee44"),Object(g["a"])(B,M,K,!1,null,"9dde9950",null)),J=Z.exports,G={name:"useraccount-page",props:["page"],components:{UserAccountTableRow:J},computed:Object(l["a"])({},Object(u["b"])(["currentCompanyId","currentPeriodId"])),data:function(){return{invite_email:"",users:[],validEmail:!1}},mounted:function(){this.$emit("isValid",!1,this.page.index)},watch:{invite_email:function(t,e){t&&(this.validEmail=this.validate_email(t))}},methods:{deleteUserClicked:function(t){for(var e=0;e<this.users.length;++e)if(this.users[e].user_id===t)return this.users.splice(e,1),void this.doValidation()},validate_email:function(t){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(String(t).toLowerCase())},randomstr:function(t){for(var e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=a.length,i=0;i<t;i++)e+=a.charAt(Math.floor(Math.random()*s));return e},inviteEmail:function(t){this.users.push({user_id:this.randomstr(8),name:"",email:this.invite_email}),this.invite_email="",this.doValidation()},doValidation:function(){this.$emit("isValid",this.users.length>0,this.page.index)},getData:function(){return this.users},toastr:function(t,e,a){this.$bvToast.toast(a,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})}}},W=G,Q=(a("b211"),Object(g["a"])(W,I,U,!1,null,"38115dc4",null)),X=Q.exports,Y=a("ae1f"),tt=a("a7c1"),et={name:"registerwizard",components:{Address:f,CompanyType:C,Confirm:V,MembershipRequirements:A,OrgNumber:H,UserAccounts:X},mounted:function(){this.parent_company_id=this.$route.params.id,void 0===this.parent_company_id&&(this.parent_company_id=this.$route.query.id),void 0===this.parent_company_id?this.isStandalone=!0:(this.isStandalone=!1,this.loadParentCompany(this.parent_company_id)),this.createWizard()},data:function(){return{parent_company:{},isStandalone:!0,lastPage:!1,disabledNextButton:!0,parent_company_id:null,showNext:!0,currentPage:0,wizard:null,order:{},pages:[{html:"",index:0,id:0,name:"org_number",valid:!1,state:"current"},{html:"",index:1,id:1,name:"address",valid:!1,state:"pending"},{html:"",index:2,id:2,name:"type",valid:!1,state:"pending"},{html:"",index:3,id:3,name:"users",valid:!1,state:"pending"},{html:"",index:4,id:4,name:"requirements",valid:!1,state:"pending"},{html:"",index:5,id:5,name:"confirm",valid:!1,state:"pending"}],created:!1,error:!1,regdata:{},form:{}}},watch:{showNext:function(t,e){}},methods:{loadData:function(){},loadParentCompany:function(t){var e=this;o.a.get("/company/public?company_id=".concat(t)).then((function(t){e.parent_company=t.data.company})).catch((function(t){console.error(t)}))},getData:function(){var t={};return void 0!==this.$refs.org_number&&(t.org_number=this.$refs.org_number.getData()),void 0!==this.$refs.address&&(t.address=this.$refs.address.getData()),void 0!==this.$refs.type&&(t.type=this.$refs.type.getData()),void 0!==this.$refs.requirements&&(t.requirements=this.$refs.requirements.getData()),void 0!==this.$refs.users&&(t.admins=this.$refs.users.getData()),t.company_data={pc_id:this.parent_company_id,standalone:this.isStandalone,name:t.address.name,org_number:t.org_number.fmt_org_number,zipcode:t.address.zipcode,address:t.address.address,co:t.address.co,post:t.address.post,region_code:t.address.region_code,commune_code:t.address.commune_code,country:t.address.country,type:t.type.type},this.regdata=t,t},setData:function(t,e){this.form[e]=t},nextPage:function(t){t.preventDefault(),this.disabledNextButton=!this.pages[this.wizard.getStep()].valid,this.pages.length===this.wizard.getStep()&&(this.lastPage=!0),this.regdata=this.getData(),setTimeout((function(){Object(r["a"])(JSON.stringify({height:document.body.scrollHeight}))}),300)},isValid:function(t,e){var a=0;void 0!==this.wizard&&null!==this.wizard&&(a=this.wizard.getStep()-1),e==a?(this.showNext=t,this.disabledNextButton=!t,this.lastPage="confirm"==this.pages[e].name):console.log("not showing next"),this.pages.length>e&&(this.pages[e].valid=t)},createWizard:function(){var t=this;t.showNext=!0,t.wizard=new tt["a"]("kt_wizard_v3",{startStep:1,clickableSteps:!0}),t.wizard.on("beforeNext",(function(){})),t.wizard.on("change",(function(){setTimeout((function(){Y["a"].scrollTop(),t.currentPage=t.wizard.currentStep,t.$refs[t.pages[t.currentPage-1].name].doValidation(),t.currentPage-1===t.pages.length&&console.log("last page")}),200)})),t.showNext=!1,setTimeout((function(){Object(r["a"])(JSON.stringify({height:document.body.scrollHeight}))}),300)},createCompany:function(){var t=this,e=this.getData();o.a.post("/company/signup",e).then((function(e){201===e.status?(t.created=!0,t.error=!1):(t.created=!1,t.error=!0,t.toastr("danger","Fel","Kunde inte skapa förening"))})).catch((function(e){t.error=!0,console.error(e),t.toastr("danger","Server Fel","Kunde inte skapa förening")}))},toastr:function(t,e,a){this.$bvToast.toast(a,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})}}},at=et,st=(a("fe06"),Object(g["a"])(at,s,i,!1,null,"289ac06e",null));e["default"]=st.exports},"3acb":function(t,e,a){},"4b50":function(t,e,a){},5288:function(t,e,a){"use strict";a("3acb")},"60f3":function(t,e,a){},"6a76":function(t,e,a){},"7c87":function(t,e,a){},"893a":function(t,e,a){"use strict";function s(t){window.location!==window.parent.location?(console.log("we are a child window"),window.top.postMessage(["messageFromChild",t],"*")):console.log("We are the parent window: unable to post")}var i=function(t){return s(t)};e["a"]=i},"8d6c":function(t,e,a){"use strict";a("ca64")},"95e6":function(t,e,a){"use strict";a("4b50")},"96f3":function(t,e,a){},b211:function(t,e,a){"use strict";a("96f3")},baca:function(t,e,a){"use strict";a("7c87")},ca64:function(t,e,a){},ee44:function(t,e,a){"use strict";a("6a76")},fe06:function(t,e,a){"use strict";a("0e12")},fe2c:function(t,e,a){"use strict";a("60f3")}}]);
//# sourceMappingURL=chunk-18b03f30.83884de8.js.map