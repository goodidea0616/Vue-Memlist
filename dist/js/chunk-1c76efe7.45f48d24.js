(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c76efe7"],{"0a83":function(e,t,n){},1429:function(e,t,n){"use strict";n("0a83")},"164c":function(e,t,n){},"1ab5":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"px-5 mt-8",attrs:{id:"page-basic0"}},[n("b-row",[n("b-col",{attrs:{lg:"12"}},[n("b-card",{staticClass:"mb-2 mx-auto mt-8",attrs:{title:"","hide-footer":""}},[n("div",[n("b-form",{staticClass:"mt-8",on:{submit:e.saveData}},[n("b-form-group",{attrs:{id:"input-group-name",label:"Namn","label-for":"input-name"}},[n("b-form-input",{attrs:{id:"input-name",type:"text",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),""!=e.form.logo?n("b-row",[n("b-col",{attrs:{lg:"12"}},[n("b-img",{staticStyle:{"max-height":"200px"},attrs:{src:e.form.logo+"?rnd="+e.rnd,fluid:"",thumbnail:""}})],1)],1):e._e(),n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{lg:"12"}},[n("b-button",{attrs:{type:"button",variant:"success"},on:{click:function(t){return e.selectFile()}}},[e._v("Ladda upp logotyp")])],1)],1),n("input",{ref:"file",attrs:{hidden:"",type:"file",id:"file",accept:"image/*"},on:{change:function(t){return e.handleFileUpload()}}}),n("b-form-group",{staticClass:"mt-8 mb-4",attrs:{id:"input-group-cnum",label:"Föreningsnummer","label-for":"input-cnum"}},[n("b-form-input",{attrs:{id:"input-cnum",type:"text"},model:{value:e.form.cnum,callback:function(t){e.$set(e.form,"cnum",t)},expression:"form.cnum"}})],1),n("b-form-group",{attrs:{id:"input-group-type",label:"Typ","label-for":"input-type"}},[n("b-form-select",{attrs:{id:"type",options:e.companyTypes},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),n("b-form-group",{attrs:{id:"input-group-org_number",label:"Org. Nummer","label-for":"input-org_number"}},[n("b-form-input",{attrs:{id:"input-org_number",type:"text"},model:{value:e.form.org_number,callback:function(t){e.$set(e.form,"org_number",t)},expression:"form.org_number"}})],1),n("b-form-group",{attrs:{id:"input-group-mpid",label:"Medlemslöpnummer","label-for":"input-mpid"}},[n("b-form-input",{attrs:{id:"input-mpid",type:"text"},model:{value:e.form.mpid,callback:function(t){e.$set(e.form,"mpid",t)},expression:"form.mpid"}})],1),n("b-form-group",{attrs:{id:"input-group-pc_id",label:"Moderförening ID","label-for":"input-pc_id"}},[n("b-form-input",{attrs:{id:"input-pc_id",type:"text"},model:{value:e.form.pc_id,callback:function(t){e.$set(e.form,"pc_id",t)},expression:"form.pc_id"}})],1),n("b-form-group",{attrs:{id:"input-group-street",label:"Gatuadress","label-for":"input-street"}},[n("b-form-input",{attrs:{id:"input-street",type:"text"},model:{value:e.form.street,callback:function(t){e.$set(e.form,"street",t)},expression:"form.street"}})],1),n("b-form-group",{attrs:{id:"input-group-zipcode",label:"Postkod","label-for":"input-zipcode"}},[n("b-form-input",{attrs:{id:"input-zipcode",type:"text"},model:{value:e.form.zipcode,callback:function(t){e.$set(e.form,"zipcode",t)},expression:"form.zipcode"}})],1),n("b-form-group",{attrs:{id:"input-group-post",label:"Postort","label-for":"input-post"}},[n("b-form-input",{attrs:{id:"input-post",type:"text"},model:{value:e.form.post,callback:function(t){e.$set(e.form,"post",t)},expression:"form.post"}})],1),n("b-form-group",{attrs:{id:"input-group-region_code",label:"Region","label-for":"input-region_code"}},[n("b-form-select",{attrs:{id:"region_code",options:e.regionOptions},model:{value:e.region_code,callback:function(t){e.region_code=t},expression:"region_code"}})],1),n("b-form-group",{attrs:{id:"input-group-commune_code",label:"Kommun","label-for":"input-commune_code"}},[n("b-form-select",{attrs:{id:"commune_code",options:e.communeOptions},model:{value:e.commune_code,callback:function(t){e.commune_code=t},expression:"commune_code"}})],1),n("b-form-group",{attrs:{id:"input-group-email",label:"Konto e-post (Ej synlig)","label-for":"input-email"}},[n("b-form-input",{attrs:{id:"input-email",type:"text"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),n("b-form-group",{attrs:{id:"input-group-phone",label:"Konto telefon (Ej synlig)","label-for":"input-phone"}},[n("b-form-input",{attrs:{id:"input-phone",type:"text"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),n("b-form-group",{attrs:{id:"input-group-c_name",label:"Kontakt namn","label-for":"input-c_name"}},[n("b-form-input",{attrs:{id:"input-c_name",type:"text"},model:{value:e.form.c_name,callback:function(t){e.$set(e.form,"c_name",t)},expression:"form.c_name"}})],1),n("b-form-group",{attrs:{id:"input-group-c_email",label:"Kontakt E-post","label-for":"input-c_email"}},[n("b-form-input",{attrs:{id:"input-c_email",type:"text"},model:{value:e.form.c_email,callback:function(t){e.$set(e.form,"c_email",t)},expression:"form.c_email"}})],1),n("b-form-group",{attrs:{id:"input-group-c_phone",label:"Kontakt Telefon","label-for":"input-c_phone"}},[n("b-form-input",{attrs:{id:"input-c_phone",type:"text"},model:{value:e.form.c_phone,callback:function(t){e.$set(e.form,"c_phone",t)},expression:"form.c_phone"}})],1),n("b-form-group",{attrs:{id:"input-group-web",label:"Hemsida","label-for":"input-web"}},[n("b-form-input",{attrs:{id:"input-web",type:"text"},model:{value:e.form.web,callback:function(t){e.$set(e.form,"web",t)},expression:"form.web"}})],1),n("div",{staticClass:"d-flex align-items-center mb-6"},[n("label",{staticClass:"checkbox checkbox-lg checkbox-outline checkbox-success"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.mucf.include,expression:"form.mucf.include"}],attrs:{type:"checkbox",name:""},domProps:{checked:Array.isArray(e.form.mucf.include)?e._i(e.form.mucf.include,null)>-1:e.form.mucf.include},on:{click:function(t){e.form.mucf.include=!e.form.mucf.include},change:function(t){var n=e.form.mucf.include,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);i.checked?a<0&&e.$set(e.form.mucf,"include",n.concat([o])):a>-1&&e.$set(e.form.mucf,"include",n.slice(0,a).concat(n.slice(a+1)))}else e.$set(e.form.mucf,"include",r)}}}),n("span")]),n("span",{staticClass:"ml-3 cursor-pointer"},[e._v("Inkludera i MUCF beräkningar")])]),null!==e.form.stats&&void 0!==e.form.stats?n("div",{staticClass:"d-flex align-items-center mb-8"},[n("label",{staticClass:"checkbox checkbox-lg checkbox-outline checkbox-outline-2x checkbox-primary"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.stats.pcinc,expression:"form.stats.pcinc"}],attrs:{type:"checkbox",name:""},domProps:{checked:Array.isArray(e.form.stats.pcinc)?e._i(e.form.stats.pcinc,null)>-1:e.form.stats.pcinc},on:{click:function(t){e.form.stats.pcinc=!e.form.stats.pcinc},change:function(t){var n=e.form.stats.pcinc,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);i.checked?a<0&&e.$set(e.form.stats,"pcinc",n.concat([o])):a>-1&&e.$set(e.form.stats,"pcinc",n.slice(0,a).concat(n.slice(a+1)))}else e.$set(e.form.stats,"pcinc",r)}}}),n("span")]),n("span",{staticClass:"ml-3 cursor-pointer"},[e._v("Statistik ska inkluderas i moderföreningen")])]):e._e(),e._l(e.extras_data,(function(t,i){return[n("b-form-group",{key:i,attrs:{label:t.name}},[n("b-form-input",{attrs:{type:"text"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}})],1)]})),n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Spara")])],2)],1)])],1)],1)],1)},r=[],o=(n("96cf"),n("1da1")),a=n("5530"),s=n("bc3a"),c=n.n(s),l=n("2f62"),u=n("767c"),d={name:"basic-settings",components:{},props:["company_id","company","extras","regions","creating"],computed:Object(a["a"])({},Object(l["b"])(["currentPeriodId","currentCompanyId"])),mounted:function(){this.loadData()},data:function(){return{extras_data:[],rnd:"aaa",communeOptions:[],regionOptions:[],companyTypes:[{value:"default",text:"Förening"},{value:"riks",text:"Riksförbund"},{value:"student",text:"Studentkår"},{value:"workgroup",text:"Arbetsgrupp"}],region_code:"",commune_code:"",form:{company_id:"",name:"",c_email:"",c_name:"",c_phone:"",org_number:"",type:"",cnum:0,mpid:0,pc_id:null,street:"",region_code:"",commune_code:"",web:"",mucf:{include:!1},stats:{pcinc:!1}}}},watch:{company_id:function(e,t){},extras:function(e,t){this.extras_data=e},regions:function(e,t){this.setRegions(e)},company:function(e,t){if(e){for(var n in e)e.hasOwnProperty(n)&&(this.form[n]=e[n]);e.hasOwnProperty("region_code")&&(this.region_code=e.region_code),e.hasOwnProperty("commune_code")&&(this.commune_code=e.commune_code),this.form.hasOwnProperty("mucf")||(this.form["mucf"]={include:!1}),this.form.mucf.hasOwnProperty("include")||(this.form["mucf"]["include"]=!1),null!==this.form.stats&&void 0!==this.form.stats||(this.form.stats={pcinc:!1})}},region_code:function(e,t){e&&void 0!=this.regions[e]&&this.regions[e].hasOwnProperty("communes")&&this.setCommunes(this.regions[e].communes)}},methods:{setCommunes:function(e){for(var t in this.communeOptions=[],e)this.communeOptions.push({value:t,text:e[t].commune});this.communeOptions.sort((function(e,t){return e.text<t.text?-1:e.text>t.text?1:0}))},setRegions:function(e){for(var t in this.regionOptions=[],e)e[t].hasOwnProperty("region")&&this.regionOptions.push({value:t,text:e[t].region});this.region_code,this.regions},loadData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form=e.company,e.form.hasOwnProperty("mucf")||(e.form["mucf"]={include:!1}),e.form.mucf.hasOwnProperty("include")||(e.form["mucf"]["include"]=!1),e.region_code=e.company.region_code,e.commune_code=e.company.commune_code,e.setRegions(e.regions);case 6:case"end":return t.stop()}}),t)})))()},getLangText:function(e,t){for(var n=0;n<e.length;++n)if(e[n].lang===t)return e[n].text;return"Språköversättning saknas"},loadCompany:function(e){var t=this;c.a.get("/company?company_id=".concat(e)).then((function(e){t.form=e.data.company,t.form.hasOwnProperty("mucf")&&t.form.mucf.hasOwnProperty("include")||(t.form["mucf"]["include"]=!1),null!==t.form.stats&&void 0!==t.form.stats||(t.form.stats={pcinc:!1})})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte hämta föreningsuppgifter")}))},saveData:function(e){var t=this;e.preventDefault(),this.form.company_id=this.company.company_id,this.form.region_code=this.region_code,this.form.commune_code=this.commune_code,this.form.extras=this.extras_data,this.creating?c.a.post("/company",this.form).then((function(e){201===e.status&&(t.toastr("success","OK","Förening skapad"),t.reloadCompanies())})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte skapa förening")})):c.a.put("/company",this.form).then((function(e){204===e.status&&(t.toastr("success","OK","Inställningar uppdaterad"),t.reloadCompanies())})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte uppdatera inställningar")}))},reloadCompanies:function(){var e=this;c.a.get("/company/list").then((function(t){200===t.status&&(e.$store.dispatch(u["c"],t.data.companies),e.$emit("saved"))})).catch((function(t){console.error(t),e.toastr("danger","Serverfel","Gick inte att hämta föreningslista")}))},toastr:function(e,t,n){this.$bvToast.toast(n,{title:t,autoHideDelay:2e3,appendToast:!0,variant:e})},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.uploadFile()},selectFile:function(){this.$refs.file.click()},uploadFile:function(){var e=this,t=new FormData;t.append("file",this.file),t.append("file_source","company_logo"),t.append("company_id",this.currentCompanyId),c.a.post("/fileupload",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.toastr("success","OK","Filen laddades upp"),console.log(t.data),e.form.logo=t.data.files[0],console.log(e.form.logo),e.rnd=e.randomstr(5)})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte ladda upp fil")}))},randomstr:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*i));return t}}},h=d,p=(n("2a4f"),n("2877")),f=Object(p["a"])(h,i,r,!1,null,"58bb3208",null);t["a"]=f.exports},"1c4d":function(e,t,n){!function(t,n){e.exports=n()}("undefined"!=typeof self&&self,(function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=6)}([function(e,t){function n(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=i(r);return[n].concat(r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}))).concat([o]).join("\n")}return[n].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){"use strict";function i(e,t,n,i){m=n,g=i||{};var o=Object(l.a)(e,t);return r(o),function(t){for(var n=[],i=0;i<o.length;i++){var a=o[i],s=d[a.id];s.refs--,n.push(s)}t?(o=Object(l.a)(e,t),r(o)):o=[];for(i=0;i<n.length;i++){s=n[i];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete d[s.id]}}}}function r(e){for(var t=0;t<e.length;t++){var n=e[t],i=d[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(a(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var o=[];for(r=0;r<n.parts.length;r++)o.push(a(n.parts[r]));d[n.id]={id:n.id,refs:1,parts:o}}}}function o(){var e=document.createElement("style");return e.type="text/css",h.appendChild(e),e}function a(e){var t,n,i=document.querySelector("style["+b+'~="'+e.id+'"]');if(i){if(m)return v;i.parentNode.removeChild(i)}if(y){var r=f++;i=p||(p=o()),t=s.bind(null,i,r,!1),n=s.bind(null,i,r,!0)}else i=o(),t=c.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}function s(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=x(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function c(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),g.ssrId&&e.setAttribute(b,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var l=n(10),u="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!u)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var d={},h=u&&(document.head||document.getElementsByTagName("head")[0]),p=null,f=0,m=!1,v=function(){},g=null,b="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase()),x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){e=e||{};var c=typeof e.default;"object"!==c&&"function"!==c||(e=e.default);var l,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),o&&(u._scopeId=o),a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(u.functional){u._injectStyles=l;var d=u.render;u.render=function(e,t){return l.call(t),d(e,t)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:e,options:u}}t.a=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=i(r),a=n(15),s=i(a);t.default={props:["value","treeTypes","openAll","contextItems","editName","searchText"],name:"v-treeview",data:function(){return{showContext:!1,mouseEvent:null}},created:function(){},methods:{selected:function(e){this.$emit("selected",e)},contextSelected:function(e){this.$emit("contextSelected",e)},openTree:function(e){this.$emit("openTree",e)},mousedown:function(e){this.contextItems&&(e.preventDefault(),this.mouseEvent={button:e.button,pageX:e.layerX,pageY:e.layerY})}},components:{VContext:s.default,VTreeviewItem:o.default}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"v-treeview-item",props:["model","treeTypes","openAll","searchText"],data:function(){return{open:!1,checked:null,edit:!1}},computed:{isFolder:function(){return this.model.children&&this.model.children.length},icon:function(){return this.getTypeRule(this.model.type).icon},isSearchText:function(){if(this.searchText&&""!=this.searchText)return-1!==this.model.text.toLowerCase().indexOf(this.searchText.toLowerCase())&&(this.openTree(this),!0)}},methods:{getTypeRule:function(e){return this.treeTypes.filter((function(t){return t.type==e}))[0]},blur:function(){this.edit=!1},selected:function(e){this.checked=null,this.checked=this.model.id,this.$emit("selected",e)},openTree:function(e){this.open=!0,this.$emit("openTree",e)},addNode:function(e){this.getTypeRule(this.model.type).valid_children.indexOf(e.type)>-1&&this.model.children.push(e)},editName:function(){var e=this;this.edit=!0,this.$nextTick((function(){return e.$refs.title.focus()}))},showContextMenu:function(e){e.preventDefault(),this.open=!0,this.selected(this)},toggle:function(){this.isFolder&&(this.open=!this.open),this.selected(this)}},created:function(){null==this.model.id&&this.editName(),this.open=this.openAll},watch:{openAll:function(e){this.open=e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["treeTypes","contextItems","mouseEvent"],data:function(){return{showContext:!0,menuStyle:null}},methods:{closeMenu:function(){this.showContext=!1},click:function(e){this.$emit("contextSelected",e)}},watch:{mouseEvent:function(){var e=this;2===this.mouseEvent.button?(this.showContext=!1,this.menuStyle={left:this.mouseEvent.pageX+"px",top:this.mouseEvent.pageY+"px",border:"2px solid #ddd",padding:"5px 10px",position:"absolute","background-color":"#fff","box-shadow":"2px 2px 2px #aaa","z-index":10},this.$nextTick((function(){e.showContext=!0}))):0===this.mouseEvent.button&&(this.showContext=!1)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default},function(e,t,n){"use strict";function i(e){n(8)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);var s=n(19),c=n(2),l=i,u=Object(c.a)(o.a,s.a,s.b,!1,l,"data-v-9d9f528c",null);t.default=u.exports},function(e,t,n){var i=n(9);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n(1).default;r("27cc4529",i,!0,{})},function(e,t,n){t=e.exports=n(0)(!1),t.push([e.i,"ul[data-v-9d9f528c]{position:relative}",""])},function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],a=o[0],s=o[1],c=o[2],l=o[3],u={id:e+":"+r,css:s,media:c,sourceMap:l};i[a]?i[a].parts.push(u):n.push(i[a]={id:a,parts:[u]})}return n}t.a=i},function(e,t,n){"use strict";function i(e){n(12)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);var s=n(14),c=n(2),l=i,u=Object(c.a)(o.a,s.a,s.b,!1,l,"data-v-bc19971a",null);t.default=u.exports},function(e,t,n){var i=n(13);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n(1).default;r("6a60e6b8",i,!0,{})},function(e,t,n){t=e.exports=n(0)(!1),t.push([e.i,'ul[data-v-bc19971a]{display:block;list-style:none;margin:0;padding:0}ul .tree-node[data-v-bc19971a]{display:block;padding-left:15px}.toggle-icon[data-v-bc19971a]{display:inline-block;width:20px}ul .tree-node[data-v-bc19971a] :hover:before{background:rgba(190,235,255,.3)}ul .tree-node input[type=radio][data-v-bc19971a]{display:none}ul .tree-node input[type=radio]:checked+label[data-v-bc19971a]:before{background:rgba(83,215,220,.3)}ul label[data-v-bc19971a]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ul label[data-v-bc19971a]:before{-moz-box-sizing:border-box;box-sizing:border-box;content:"";height:21px;left:0;position:absolute;right:0}.searched-text[data-v-bc19971a]{font-style:italic;color:#c00}',""])},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"tree-node"},[n("span",{key:e.open,staticClass:"toggle-icon",class:{"empty-toggle":!e.isFolder}},[e.isFolder?n("i",{class:{"fas fa-caret-down":this.open,"fas fa-caret-right":!this.open}}):e._e()]),e._v(" "),n("span",{key:e.icon,staticClass:"tree-icon",class:{"empty-toggle":!e.icon}},[e.icon?n("i",{staticClass:"far",class:e.icon}):e._e()]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"checked"}],attrs:{type:"radio",name:"rad",id:e.model.id},domProps:{value:e.model.id,checked:e._q(e.checked,e.model.id)},on:{change:function(t){e.checked=e.model.id}}}),e._v(" "),n("label",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],key:"label",staticClass:"tree-text",class:{"searched-text":e.isSearchText},attrs:{for:e.model.id},on:{click:e.toggle,contextmenu:function(t){return t.preventDefault(),e.showContextMenu(t)}}},[e._v(e._s(e.model.text))]),e._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"},{name:"model",rawName:"v-model",value:e.model.text,expression:"model.text"}],key:"input",ref:"title",staticClass:"tree-text",attrs:{placeholder:e.model.text},domProps:{value:e.model.text},on:{blur:e.blur,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.blur(t):null},input:function(t){t.target.composing||e.$set(e.model,"text",t.target.value)}}}),e._v(" "),n("div",{staticClass:"tree-children"},[e.isFolder?n("ul",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}]},e._l(e.model.children,(function(t){return n("v-treeview-item",{key:t.id,attrs:{model:t,treeTypes:e.treeTypes,openAll:e.openAll,searchText:e.searchText},on:{addNode:e.addNode,selected:e.selected,openTree:e.openTree}})}))):e._e()])])},r=[]},function(e,t,n){"use strict";function i(e){n(16)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);var s=n(18),c=n(2),l=i,u=Object(c.a)(o.a,s.a,s.b,!1,l,"data-v-12b157c7",null);t.default=u.exports},function(e,t,n){var i=n(17);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n(1).default;r("f11607a6",i,!0,{})},function(e,t,n){t=e.exports=n(0)(!1),t.push([e.i,"ul[data-v-12b157c7]{display:block;margin:0;padding:5px}ul li[data-v-12b157c7]{list-style:none;cursor:pointer;padding:5px}li[data-v-12b157c7]:hover{background:rgba(83,215,220,.3)}",""])},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showContext?n("div",{style:e.menuStyle},[n("ul",{staticClass:"list-unstyled"},e._l(e.contextItems,(function(t){return n("li",{key:t.title,on:{click:function(n){e.click(t.title)}}},[n("span",[n("i",{class:t.icon})]),e._v(" "),n("span",[e._v(e._s(t.title))])])})))]):e._e()},r=[]},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{mouseup:function(t){return t.preventDefault(),e.mousedown(t)}}},[n("ul",e._l(e.value,(function(t){return n("v-treeview-item",{key:t.id,staticClass:"v-treeview-item",attrs:{model:t,treeTypes:e.treeTypes,openAll:e.openAll,searchText:e.searchText},on:{selected:e.selected,openTree:e.openTree}})}))),e._v(" "),n("v-context",{attrs:{show:e.showContext,contextItems:e.contextItems,mouseEvent:e.mouseEvent},on:{contextSelected:e.contextSelected}})],1)},r=[]}])}))},"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("d3b7");function i(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}},"2a4f":function(e,t,n){"use strict";n("164c")},"3e2c":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"confirmModal",attrs:{"hide-footer":"",title:e.title}},[n("b-row",[n("b-col",{attrs:{lg:"12"}},[n("div",{staticClass:"d-block text-center"},[n("h3",[e._v(e._s(e.message))])])])],1),n("b-row",{staticClass:"mt-8 mb-8"},[n("b-col",{attrs:{lg:"6"}},[n("b-button",{attrs:{variant:e.confirmColor,block:""},on:{click:e.onConfirm}},[e._v(e._s(e.confirm))])],1),n("b-col",{attrs:{lg:"6"}},[n("b-button",{attrs:{variant:"outline-secondary",block:""},on:{click:e.onCancel}},[e._v(e._s(e.cancel))])],1)],1)],1)},r=[],o=(n("96cf"),n("1da1")),a={name:"confirm-modal",data:function(){return{}},props:{type:{type:String,default:"danger"},title:String,message:String,confirm:{type:String,default:"Bekräfta"},cancel:{type:String,default:"Avbryt"}},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{show:function(){this.$refs["confirmModal"].show()},onConfirm:function(){this.$refs["confirmModal"].hide(),this.$emit("confirm")},onCancel:function(){this.$refs["confirmModal"].hide(),this.$emit("cancel")}},computed:{confirmColor:function(){switch(this.type){case"danger":return"outline-danger";case"success":return"outline-success";case"info":return"outline-info";case"warning":return"outline-warning";case"primary":return"outline-primary"}}}},s=a,c=n("2877"),l=Object(c["a"])(s,i,r,!1,null,"7c6e001a",null);t["a"]=l.exports},6062:function(e,t,n){"use strict";var i=n("6d61"),r=n("6566");e.exports=i("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},"96cf":function(e,t,n){var i=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(err){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var r=t&&t.prototype instanceof v?t:v,o=Object.create(r.prototype),a=new $(i||[]);return o._invoke=O(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(err){return{type:"throw",arg:err}}}e.wrap=l;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",m={};function v(){}function g(){}function b(){}var y={};y[o]=function(){return this};var x=Object.getPrototypeOf,_=x&&x(x(I([])));_&&_!==n&&i.call(_,o)&&(y=_);var w=b.prototype=v.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(r,o,a,s){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"===typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var r;function o(e,i){function o(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(o,o):o()}this._invoke=o}function O(e,t,n){var i=d;return function(r,o){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw o;return N()}n.method=r,n.arg=o;while(1){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var c=u(e,t,n);if("normal"===c.type){if(i=n.done?f:h,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=f,n.method="throw",n.arg=c.arg)}}}function S(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=u(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){while(++r<e.length)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:N}}function N(){return{value:t,done:!0}}return g.prototype=w.constructor=b,b.constructor=g,g.displayName=c(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},C(k.prototype),k.prototype[a]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new k(l(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(w),c(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=I,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:I(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=i}catch(r){Function("r","regeneratorRuntime = r")(i)}},b640:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"px-5",attrs:{id:"page-subcompany"}},[n("h5",{staticClass:"mb-6 ml-2"},[e._v("Underföreningar")]),n("Confirm",{ref:"confirmModal",attrs:{title:"Bekräfta borttagning",message:"Är du säker på att du vill ta bort?"},on:{cancel:e.cancelRemove,confirm:e.confirmRemove}}),n("b-modal",{ref:"editCompanyModal",attrs:{size:"lg","hide-footer":""}},[e.creating?n("b-alert",{attrs:{show:"",variant:"primary"}},[e._v("Du håller på att skapa en underförening/grupp till "+e._s(e.parent.text))]):e._e(),e.creating?e._e():n("b-alert",{attrs:{show:"",variant:"secondary"}},[e._v("Du håller på att editera "+e._s(e.editcompany.text))]),n("Basic",{attrs:{company_id:e.editcompany.id,company:e.company,regions:e.regions,creating:e.creating},on:{saved:e.companySaved}})],1),n("b-card",{staticClass:"mb-2",attrs:{title:"","hide-footer":"",oncontextmenu:"return false;"}},[n("v-tabs",{attrs:{"background-color":"white",color:"deep-purple accent-4",right:""}},[n("v-tab",[e._v("Föreningshierarki")]),n("v-tab",[e._v("Inställningar")]),n("v-tab-item",[n("b-row",{staticClass:"mt-8 mb-4"},[n("b-col",{attrs:{lg:"6"}},[null!==e.selectedNode?n("b-button",{staticClass:"ml-2",attrs:{variant:"outline-success",type:"button"},on:{click:e.editCompanyClicked}},[e._v("Editera")]):e._e(),null!==e.selectedNode?n("b-button",{staticClass:"ml-2",attrs:{variant:"outline-success",type:"button"},on:{click:e.createCompanyClicked}},[e._v("Skapa Ny")]):e._e(),null!==e.selectedNode&&void 0!==e.selectedNode.model.parent_id?n("b-button",{staticClass:"ml-2",attrs:{variant:"outline-danger",type:"button"},on:{click:e.removeCompanyClicked}},[e._v("Ta bort")]):e._e()],1),n("b-col",{attrs:{lg:"2"}}),n("b-col",{attrs:{lg:"2"}})],1),n("v-treeview",{staticClass:"mt-8",staticStyle:{"min-height":"2000px"},attrs:{treeTypes:e.treeTypes,openAll:e.openAll},on:{selected:e.selected},model:{value:e.treeData,callback:function(t){e.treeData=t},expression:"treeData"}})],1),n("v-tab-item")],1)],1)],1)},r=[],o=(n("4de4"),n("d81d"),n("b0c0"),n("96cf"),n("1da1")),a=n("5530"),s=n("bc3a"),c=n.n(s),l=n("2f62"),u=n("1c4d"),d=n.n(u),h=n("1ab5"),p=n("3e2c"),f=n("767c"),m={name:"subcompany",components:{VTreeview:d.a,Basic:h["a"],Confirm:p["a"]},computed:Object(a["a"])({},Object(l["b"])(["currentCompanyId","currentPeriodId"])),mounted:function(){this.loadData()},data:function(){return{openAll:!0,treeTypes:[{type:"#",max_children:6,max_depth:4,valid_children:["default","riks","student","workgroup"]},{type:"default",icon:"fas fa-building",valid_children:["default","riks","student","workgroup"]},{type:"riks",icon:"fas fa-sitemap",valid_children:["default","riks","student","workgroup"]},{type:"student",icon:"fas fa-book",valid_children:["default","riks","student","workgroup"]},{type:"workgroup",icon:"fas fa-user",valid_children:["workgroup"]}],treeData:[],contextItems:[],selectedNode:null,regions:{},editcompany:{},creating:!1,parent:null,company:null}},watch:{currentCompanyId:function(e,t){e&&this.loadData()}},methods:{editCompanyClicked:function(){var e=this,t=this.selectedNode.model.id;c.a.get("/company?company_id=".concat(t)).then((function(n){e.company=n.data.company,e.editcompany=e.getCompanyInTree(e.treeData[0],t),e.creating=!1,e.$refs["editCompanyModal"].show()})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte hämta föreningsdata")}))},createCompanyClicked:function(){var e=this.selectedNode.model.id;this.parent=this.getCompanyInTree(this.treeData[0],e),this.company={pc_id:e,name:"Ny förening"},this.creating=!0,this.$refs["editCompanyModal"].show()},removeCompanyClicked:function(){this.selectedNode.model.id;this.$refs["confirmModal"].show()},confirmRemove:function(){var e=this;c.a.delete("/company?company_id=".concat(this.selectedNode.model.id)).then((function(t){e.loadHierarchy(),e.reloadCompanies()})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte ta bort underförening")}))},cancelRemove:function(){console.log("remove cancelled")},reloadCompanies:function(){var e=this;c.a.get("/company/list").then((function(t){200===t.status&&(console.log("dispatching SET COMPANIES"),e.$store.dispatch(f["c"],t.data.companies))})).catch((function(t){console.error(t),e.toastr("danger","Serverfel","Gick inte att hämta föreningslista")}))},createCompany:function(){this.$refs["editCompanyModal"].show(),this.creating=!0,this.company={name:"Nytt"}},getCompanyInTree:function(e,t){if(e.id===t)return e;for(var n=0;n<e.children.length;++n){var i=this.getCompanyInTree(e.children[n],t);if(null!==i&&i.id===t)return i}return null},editCompany:function(e){var t=this;this.$refs["editCompanyModal"].show(),c.a.get("/company?company_id=".concat(e)).then((function(e){t.company=e.data.company})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte hämta förening")}))},loadData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.currentCompanyId){t.next=2;break}return t.abrupt("return");case 2:e.loadRegions(),e.loadHierarchy();case 4:case"end":return t.stop()}}),t)})))()},getLangType:function(e){switch(e){case"default":return"Lokalförening";case"student":return"Studentkår";case"riks":return"Riksförbund";case"workgroup":return"Arbetsgrupp"}return"Inget"},hierarchyToTreeData:function(e){this.treeData=[];var t={};this.convertNode(t,t,e),this.treeData.push(t)},convertNode:function(e,t,n){t.id=n.company_id,t.text=n.name,t.type=n.type,t.children=[],t.count=0,t.parent_id=e.id===t.id?void 0:e.id,console.log("treeNode"),console.log(t),e!==t&&(e.children.push(t),e.count++);for(var i=0;i<n.children.length;++i){var r={};this.convertNode(t,r,n.children[i])}},loadHierarchy:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$loading.show(),t.next=3,c.a.get("/company/hierarchy?company_id=".concat(e.currentCompanyId));case 3:i=t.sent,200==i.status?e.hierarchyToTreeData(i.data.tree):(console.error(err),e.toastr("danger","Server Fel","Kunde inte ladda hierarki")),n.hide();case 7:case"end":return t.stop()}}),t)})))()},loadRegions:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$loading.show(),t.next=3,c.a.get("/location/regions");case 3:i=t.sent,200==i.status?e.regions=i.data.regions:(console.error(err),e.toastr("danger","Server Fel","Kunde inte hämta regioner")),n.hide();case 6:case"end":return t.stop()}}),t)})))()},getTypeRule:function(e){var t=this.treeTypes.filter((function(t){return t.type==e}))[0];return t},companySaved:function(){this.$refs["editCompanyModal"].hide(),this.creating=!1,this.loadData()},contextSelected:function(e){switch(console.log("context command: "+e),e){case"Skapa Lokalförening":var t={text:"New default Plan",type:"default",children:[]};this.selectedNode.addNode(t);break;case"Skapa Studentkår":t={text:"New student",type:"student",children:[]};this.selectedNode.addNode(t);break;case"Skapa Arbetsgrupp":t={text:"Ny arbetsgrupp",type:"workgroup",children:[]};this.selectedNode.addNode(t);break;case"Ändra":this.selectedNode.editName();break;case"Ta bort":break}},selected:function(e){this.selectedNode=e,console.log("node selected"),console.log(this.selectedNode),console.log(this.selectedNode.model),this.contextItems=[];var t=this.getTypeRule(this.selectedNode.model.type);t.valid_children.map((function(e,t){var n=this.getTypeRule(e),i={title:"Skapa "+this.getLangType(e),icon:n.icon,type:n};this.contextItems.push(i)}),this),this.contextItems.push({title:"Ändra",icon:"far fa-edit"}),this.contextItems.push({title:"Ta bort",icon:"far fa-trash-alt"})},toastr:function(e,t,n){this.$bvToast.toast(n,{title:t,autoHideDelay:2e3,appendToast:!0,variant:e})}}},v=m,g=(n("1429"),n("2877")),b=n("6544"),y=n.n(b),x=n("71a3"),_=n("c671"),w=n("fe57"),C=(n("4160"),n("13d5"),n("4ec9"),n("b64b"),n("d3b7"),n("ac1f"),n("6062"),n("3ca3"),n("841c"),n("159b"),n("ddb0"),n("3835")),k=n("b85c"),O=n("2909"),S=(n("fa9e"),n("caad"),n("a9e3"),n("ade3")),j=n("0789"),T=n("132d"),$=n("3206"),I=n("a9ad"),N=n("58df"),E=n("80d2"),A=Object(N["a"])(I["a"],Object($["a"])("treeview")),L={activatable:Boolean,activeClass:{type:String,default:"v-treeview-node--active"},color:{type:String,default:"primary"},expandIcon:{type:String,default:"$subgroup"},indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},itemChildren:{type:String,default:"children"},itemDisabled:{type:String,default:"disabled"},itemKey:{type:String,default:"id"},itemText:{type:String,default:"name"},loadChildren:Function,loadingIcon:{type:String,default:"$loading"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"},openOnClick:Boolean,rounded:Boolean,selectable:Boolean,selectedColor:{type:String,default:"accent"},shaped:Boolean,transition:Boolean,selectionType:{type:String,default:"leaf",validator:function(e){return["leaf","independent"].includes(e)}}},P=A.extend().extend({name:"v-treeview-node",inject:{treeview:{default:null}},props:Object(a["a"])({level:Number,item:{type:Object,default:function(){return null}},parentIsDisabled:Boolean},L),data:function(){return{hasLoaded:!1,isActive:!1,isIndeterminate:!1,isLoading:!1,isOpen:!1,isSelected:!1}},computed:{disabled:function(){return Object(E["q"])(this.item,this.itemDisabled)||this.parentIsDisabled&&"leaf"===this.selectionType},key:function(){return Object(E["q"])(this.item,this.itemKey)},children:function(){var e=this,t=Object(E["q"])(this.item,this.itemChildren);return t&&t.filter((function(t){return!e.treeview.isExcluded(Object(E["q"])(t,e.itemKey))}))},text:function(){return Object(E["q"])(this.item,this.itemText)},scopedProps:function(){return{item:this.item,leaf:!this.children,selected:this.isSelected,indeterminate:this.isIndeterminate,active:this.isActive,open:this.isOpen}},computedIcon:function(){return this.isIndeterminate?this.indeterminateIcon:this.isSelected?this.onIcon:this.offIcon},hasChildren:function(){return!!this.children&&(!!this.children.length||!!this.loadChildren)}},created:function(){this.treeview.register(this)},beforeDestroy:function(){this.treeview.unregister(this)},methods:{checkChildren:function(){var e=this;return new Promise((function(t){if(!e.children||e.children.length||!e.loadChildren||e.hasLoaded)return t();e.isLoading=!0,t(e.loadChildren(e.item))})).then((function(){e.isLoading=!1,e.hasLoaded=!0}))},open:function(){this.isOpen=!this.isOpen,this.treeview.updateOpen(this.key,this.isOpen),this.treeview.emitOpen()},genLabel:function(){var e=[];return this.$scopedSlots.label?e.push(this.$scopedSlots.label(this.scopedProps)):e.push(this.text),this.$createElement("div",{slot:"label",staticClass:"v-treeview-node__label"},e)},genPrependSlot:function(){return this.$scopedSlots.prepend?this.$createElement("div",{staticClass:"v-treeview-node__prepend"},this.$scopedSlots.prepend(this.scopedProps)):null},genAppendSlot:function(){return this.$scopedSlots.append?this.$createElement("div",{staticClass:"v-treeview-node__append"},this.$scopedSlots.append(this.scopedProps)):null},genContent:function(){var e=[this.genPrependSlot(),this.genLabel(),this.genAppendSlot()];return this.$createElement("div",{staticClass:"v-treeview-node__content"},e)},genToggle:function(){var e=this;return this.$createElement(T["a"],{staticClass:"v-treeview-node__toggle",class:{"v-treeview-node__toggle--open":this.isOpen,"v-treeview-node__toggle--loading":this.isLoading},slot:"prepend",on:{click:function(t){t.stopPropagation(),e.isLoading||e.checkChildren().then((function(){return e.open()}))}}},[this.isLoading?this.loadingIcon:this.expandIcon])},genCheckbox:function(){var e=this;return this.$createElement(T["a"],{staticClass:"v-treeview-node__checkbox",props:{color:this.isSelected||this.isIndeterminate?this.selectedColor:void 0,disabled:this.disabled},on:{click:function(t){t.stopPropagation(),e.isLoading||e.checkChildren().then((function(){e.$nextTick((function(){e.isSelected=!e.isSelected,e.isIndeterminate=!1,e.treeview.updateSelected(e.key,e.isSelected),e.treeview.emitSelected()}))}))}}},[this.computedIcon])},genLevel:function(e){var t=this;return Object(E["i"])(e).map((function(){return t.$createElement("div",{staticClass:"v-treeview-node__level"})}))},genNode:function(){var e=this,t=[this.genContent()];return this.selectable&&t.unshift(this.genCheckbox()),this.hasChildren?t.unshift(this.genToggle()):t.unshift.apply(t,Object(O["a"])(this.genLevel(1))),t.unshift.apply(t,Object(O["a"])(this.genLevel(this.level))),this.$createElement("div",this.setTextColor(this.isActive&&this.color,{staticClass:"v-treeview-node__root",class:Object(S["a"])({},this.activeClass,this.isActive),on:{click:function(){e.openOnClick&&e.hasChildren?e.checkChildren().then(e.open):e.activatable&&!e.disabled&&(e.isActive=!e.isActive,e.treeview.updateActive(e.key,e.isActive),e.treeview.emitActive())}}}),t)},genChild:function(e,t){return this.$createElement(P,{key:Object(E["q"])(e,this.itemKey),props:{activatable:this.activatable,activeClass:this.activeClass,item:e,selectable:this.selectable,selectedColor:this.selectedColor,color:this.color,expandIcon:this.expandIcon,indeterminateIcon:this.indeterminateIcon,offIcon:this.offIcon,onIcon:this.onIcon,loadingIcon:this.loadingIcon,itemKey:this.itemKey,itemText:this.itemText,itemDisabled:this.itemDisabled,itemChildren:this.itemChildren,loadChildren:this.loadChildren,transition:this.transition,openOnClick:this.openOnClick,rounded:this.rounded,shaped:this.shaped,level:this.level+1,selectionType:this.selectionType,parentIsDisabled:t},scopedSlots:this.$scopedSlots})},genChildrenWrapper:function(){var e=this;if(!this.isOpen||!this.children)return null;var t=[this.children.map((function(t){return e.genChild(t,e.disabled)}))];return this.$createElement("div",{staticClass:"v-treeview-node__children"},t)},genTransition:function(){return this.$createElement(j["a"],[this.genChildrenWrapper()])}},render:function(e){var t=[this.genNode()];return this.transition?t.push(this.genTransition()):t.push(this.genChildrenWrapper()),e("div",{staticClass:"v-treeview-node",class:{"v-treeview-node--leaf":!this.hasChildren,"v-treeview-node--click":this.openOnClick,"v-treeview-node--disabled":this.disabled,"v-treeview-node--rounded":this.rounded,"v-treeview-node--shaped":this.shaped,"v-treeview-node--selected":this.isSelected},attrs:{"aria-expanded":String(this.isOpen)}},t)}}),D=P,R=n("7560"),K=n("d9bd");n("c975");function M(e,t,n){var i=Object(E["q"])(e,n);return i.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}function F(e,t,n,i,r,o,a){if(e(t,n,r))return!0;var s=Object(E["q"])(t,o);if(s){for(var c=!1,l=0;l<s.length;l++)F(e,s[l],n,i,r,o,a)&&(c=!0);if(c)return!0}return a.add(Object(E["q"])(t,i)),!1}var q=Object(N["a"])(Object($["b"])("treeview"),R["a"]).extend({name:"v-treeview",provide:function(){return{treeview:this}},props:Object(a["a"])({active:{type:Array,default:function(){return[]}},dense:Boolean,filter:Function,hoverable:Boolean,items:{type:Array,default:function(){return[]}},multipleActive:Boolean,open:{type:Array,default:function(){return[]}},openAll:Boolean,returnObject:{type:Boolean,default:!1},search:String,value:{type:Array,default:function(){return[]}}},L),data:function(){return{level:-1,activeCache:new Set,nodes:{},openCache:new Set,selectedCache:new Set}},computed:{excludedItems:function(){var e=new Set;if(!this.search)return e;for(var t=0;t<this.items.length;t++)F(this.filter||M,this.items[t],this.search,this.itemKey,this.itemText,this.itemChildren,e);return e}},watch:{items:{handler:function(){var e=this,t=Object.keys(this.nodes).map((function(t){return Object(E["q"])(e.nodes[t].item,e.itemKey)})),n=this.getKeys(this.items),i=Object(E["c"])(n,t);if(i.length||!(n.length<t.length)){i.forEach((function(t){return delete e.nodes[t]}));var r=Object(O["a"])(this.selectedCache);this.selectedCache=new Set,this.activeCache=new Set,this.openCache=new Set,this.buildTree(this.items),Object(E["k"])(r,Object(O["a"])(this.selectedCache))||this.emitSelected()}},deep:!0},active:function(e){this.handleNodeCacheWatcher(e,this.activeCache,this.updateActive,this.emitActive)},value:function(e){this.handleNodeCacheWatcher(e,this.selectedCache,this.updateSelected,this.emitSelected)},open:function(e){this.handleNodeCacheWatcher(e,this.openCache,this.updateOpen,this.emitOpen)}},created:function(){var e=this,t=function(t){return e.returnObject?Object(E["q"])(t,e.itemKey):t};this.buildTree(this.items);var n,i=Object(k["a"])(this.value.map(t));try{for(i.s();!(n=i.n()).done;){var r=n.value;this.updateSelected(r,!0,!0)}}catch(err){i.e(err)}finally{i.f()}var o,a=Object(k["a"])(this.active.map(t));try{for(a.s();!(o=a.n()).done;){var s=o.value;this.updateActive(s,!0)}}catch(err){a.e(err)}finally{a.f()}},mounted:function(){var e=this;(this.$slots.prepend||this.$slots.append)&&Object(K["c"])("The prepend and append slots require a slot-scope attribute",this),this.openAll?this.updateAll(!0):(this.open.forEach((function(t){return e.updateOpen(e.returnObject?Object(E["q"])(t,e.itemKey):t,!0)})),this.emitOpen())},methods:{updateAll:function(e){var t=this;Object.keys(this.nodes).forEach((function(n){return t.updateOpen(Object(E["q"])(t.nodes[n].item,t.itemKey),e)})),this.emitOpen()},getKeys:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0;n<e.length;n++){var i=Object(E["q"])(e[n],this.itemKey);t.push(i);var r=Object(E["q"])(e[n],this.itemChildren);r&&t.push.apply(t,Object(O["a"])(this.getKeys(r)))}return t},buildTree:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0;i<e.length;i++){var r=e[i],o=Object(E["q"])(r,this.itemKey),a=Object(E["q"])(r,this.itemChildren,[]),s=this.nodes.hasOwnProperty(o)?this.nodes[o]:{isSelected:!1,isIndeterminate:!1,isActive:!1,isOpen:!1,vnode:null},c={vnode:s.vnode,parent:n,children:a.map((function(e){return Object(E["q"])(e,t.itemKey)})),item:r};if(this.buildTree(a,o),!this.nodes.hasOwnProperty(o)&&null!==n&&this.nodes.hasOwnProperty(n)?c.isSelected=this.nodes[n].isSelected:(c.isSelected=s.isSelected,c.isIndeterminate=s.isIndeterminate),c.isActive=s.isActive,c.isOpen=s.isOpen,this.nodes[o]=c,a.length){var l=this.calculateState(o,this.nodes),u=l.isSelected,d=l.isIndeterminate;c.isSelected=u,c.isIndeterminate=d}!this.nodes[o].isSelected||"independent"!==this.selectionType&&0!==c.children.length||this.selectedCache.add(o),this.nodes[o].isActive&&this.activeCache.add(o),this.nodes[o].isOpen&&this.openCache.add(o),this.updateVnodeState(o)}},calculateState:function(e,t){var n=t[e].children,i=n.reduce((function(e,n){return e[0]+=+Boolean(t[n].isSelected),e[1]+=+Boolean(t[n].isIndeterminate),e}),[0,0]),r=!!n.length&&i[0]===n.length,o=!r&&(i[0]>0||i[1]>0);return{isSelected:r,isIndeterminate:o}},emitOpen:function(){this.emitNodeCache("update:open",this.openCache)},emitSelected:function(){this.emitNodeCache("input",this.selectedCache)},emitActive:function(){this.emitNodeCache("update:active",this.activeCache)},emitNodeCache:function(e,t){var n=this;this.$emit(e,this.returnObject?Object(O["a"])(t).map((function(e){return n.nodes[e].item})):Object(O["a"])(t))},handleNodeCacheWatcher:function(e,t,n,i){var r=this;e=this.returnObject?e.map((function(e){return Object(E["q"])(e,r.itemKey)})):e;var o=Object(O["a"])(t);Object(E["k"])(o,e)||(o.forEach((function(e){return n(e,!1)})),e.forEach((function(e){return n(e,!0)})),i())},getDescendants:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.nodes[e].children;(t=n).push.apply(t,Object(O["a"])(i));for(var r=0;r<i.length;r++)n=this.getDescendants(i[r],n);return n},getParents:function(e){var t=this.nodes[e].parent,n=[];while(null!==t)n.push(t),t=this.nodes[t].parent;return n},register:function(e){var t=Object(E["q"])(e.item,this.itemKey);this.nodes[t].vnode=e,this.updateVnodeState(t)},unregister:function(e){var t=Object(E["q"])(e.item,this.itemKey);this.nodes[t]&&(this.nodes[t].vnode=null)},isParent:function(e){return this.nodes[e].children&&this.nodes[e].children.length},updateActive:function(e,t){var n=this;if(this.nodes.hasOwnProperty(e)){this.multipleActive||this.activeCache.forEach((function(e){n.nodes[e].isActive=!1,n.updateVnodeState(e),n.activeCache.delete(e)}));var i=this.nodes[e];i&&(t?this.activeCache.add(e):this.activeCache.delete(e),i.isActive=t,this.updateVnodeState(e))}},updateSelected:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.nodes.hasOwnProperty(e)){var i=new Map;if("independent"!==this.selectionType){var r,o=Object(k["a"])(this.getDescendants(e));try{for(o.s();!(r=o.n()).done;){var a=r.value;Object(E["q"])(this.nodes[a].item,this.itemDisabled)&&!n||(this.nodes[a].isSelected=t,this.nodes[a].isIndeterminate=!1,i.set(a,t))}}catch(err){o.e(err)}finally{o.f()}var s=this.calculateState(e,this.nodes);this.nodes[e].isSelected=t,this.nodes[e].isIndeterminate=s.isIndeterminate,i.set(e,t);var c,l=Object(k["a"])(this.getParents(e));try{for(l.s();!(c=l.n()).done;){var u=c.value,d=this.calculateState(u,this.nodes);this.nodes[u].isSelected=d.isSelected,this.nodes[u].isIndeterminate=d.isIndeterminate,i.set(u,d.isSelected)}}catch(err){l.e(err)}finally{l.f()}}else this.nodes[e].isSelected=t,this.nodes[e].isIndeterminate=!1,i.set(e,t);var h,p=Object(k["a"])(i.entries());try{for(p.s();!(h=p.n()).done;){var f=Object(C["a"])(h.value,2),m=f[0],v=f[1];this.updateVnodeState(m),"leaf"===this.selectionType&&this.isParent(m)||(!0===v?this.selectedCache.add(m):this.selectedCache.delete(m))}}catch(err){p.e(err)}finally{p.f()}}},updateOpen:function(e,t){var n=this;if(this.nodes.hasOwnProperty(e)){var i=this.nodes[e],r=Object(E["q"])(i.item,this.itemChildren);r&&!r.length&&i.vnode&&!i.vnode.hasLoaded?i.vnode.checkChildren().then((function(){return n.updateOpen(e,t)})):r&&r.length&&(i.isOpen=t,i.isOpen?this.openCache.add(e):this.openCache.delete(e),this.updateVnodeState(e))}},updateVnodeState:function(e){var t=this.nodes[e];t&&t.vnode&&(t.vnode.isSelected=t.isSelected,t.vnode.isIndeterminate=t.isIndeterminate,t.vnode.isActive=t.isActive,t.vnode.isOpen=t.isOpen)},isExcluded:function(e){return!!this.search&&this.excludedItems.has(e)}},render:function(e){var t=this,n=this.items.length?this.items.filter((function(e){return!t.isExcluded(Object(E["q"])(e,t.itemKey))})).map((function(e){var n=D.options.methods.genChild.bind(t);return n(e,Object(E["q"])(e,t.itemDisabled))})):this.$slots.default;return e("div",{staticClass:"v-treeview",class:Object(a["a"])({"v-treeview--hoverable":this.hoverable,"v-treeview--dense":this.dense},this.themeClasses)},n)}}),B=Object(g["a"])(v,i,r,!1,null,"56d20a78",null);t["default"]=B.exports;y()(B,{VTab:x["a"],VTabItem:_["a"],VTabs:w["a"],VTreeview:q})},fa9e:function(e,t,n){}}]);
//# sourceMappingURL=chunk-1c76efe7.45f48d24.js.map