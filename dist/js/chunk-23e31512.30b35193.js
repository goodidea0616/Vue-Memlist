(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23e31512"],{"0d65":function(t,e,n){},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("d3b7");function r(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function c(t){r(a,o,i,c,s,"next",t)}function s(t){r(a,o,i,c,s,"throw",t)}c(void 0)}))}}},"380f":function(t,e,n){},4333:function(t,e,n){"use strict";n("380f")},"893a":function(t,e,n){"use strict";function r(t){window.location!==window.parent.location?(console.log("we are a child window"),window.top.postMessage(["messageFromChild",t],"*")):console.log("We are the parent window: unable to post")}var o=function(t){return r(t)};e["a"]=o},"8ec4":function(t,e,n){},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(F){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=L(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(F){return{type:"throw",arg:F}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",v="executing",d="completed",p={};function m(){}function y(){}function g(){}var w={};w[i]=function(){return this};var _=Object.getPrototypeOf,b=_&&_(_($([])));b&&b!==n&&r.call(b,i)&&(w=b);var x=g.prototype=m.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"===typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(s.arg)}var o;function i(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}this._invoke=i}function L(t,e,n){var r=f;return function(o,i){if(r===v)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return N()}n.method=o,n.arg=i;while(1){var a=n.delegate;if(a){var c=C(a,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=v;var s=l(t,e,n);if("normal"===s.type){if(r=n.done?d:h,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=d,n.method="throw",n.arg=s.arg)}}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function $(t){if(t){var n=t[i];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){while(++o<t.length)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:N}}function N(){return{value:e,done:!0}}return y.prototype=x.constructor=g,g.constructor=y,y.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(k.prototype),k.prototype[a]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new k(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(x),s(x,c,"Generator"),x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=$,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:$(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},a72f:function(t,e,n){"use strict";n("0d65")},d1f3:function(t,e,n){"use strict";n("8ec4")},f3bb:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-5",attrs:{id:"page-events"}},[n("h4",{staticClass:"mb-4 mt-4 ml-2"},[t._v("Evenemang för "+t._s(t.company.name))]),n("EventList",{attrs:{company:t.company,events:t.events},on:{selectEventClicked:t.selectEventClicked}})],1)},o=[],i=(n("99af"),n("a623"),n("4de4"),n("c740"),n("d81d"),n("b0c0"),n("d3b7"),n("ddb0"),n("96cf"),n("1da1")),a=n("5530"),c=n("893a"),s=n("bc3a"),u=n.n(s),l=n("c1df"),f=n.n(l),h=n("2f62"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"kt-section",attrs:{id:"current-events-list"}},[t._l(t.events,(function(e,r){return[n("EventListRow",{key:r,attrs:{event:e.event,client_event:e.client_event},on:{selectEventClicked:t.selectEventClicked}})]}))],2)},d=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{staticClass:"mb-4 shadow-sm"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-2"},[n("div",{staticClass:"event-date text-center"},[n("h2",[t._v(t._s(t.dateStarted("D")))]),n("span",[t._v(t._s(t.dateStarted("MMM")))])])]),n("div",{staticClass:"col-8"},[n("div",{staticClass:"title-info"},[n("h4",[t._v(t._s(t.event.name))]),n("p",[t._v(t._s(t.event.from)+" "+t._s(t.event.to))]),n("p",[t._v(t._s(t.event.company_name))]),"ONL"!==t.event.type?n("p",[t._v(t._s(t.event.address)+", "+t._s(t.event.zipcode)+" "+t._s(t.event.postaladdress))]):t._e(),"ONL"===t.event.type?n("p",[t._v("Evenemang över internet")]):t._e()])]),n("div",{staticClass:"col-2"},[n("div",{staticClass:"event-buttons text-center"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[t.client_event?t._e():n("button",{staticClass:"btn btn-primary .signup-loggedin",attrs:{type:"button"},on:{click:t.clickedEventButton}},[t._v(" Anmäl dig ")]),t.client_event?n("button",{staticClass:"btn btn-primary .signup-loggedin",attrs:{type:"button"},on:{click:t.clickedEventButton}},[t._v(" Du är anmäld ")]):t._e()])]),n("div",{staticClass:"row text-center",staticStyle:{"margin-top":"20px"}},[n("div",{staticClass:"col-12"},[n("a",{attrs:{href:t.href}},[t._v("Läs mer")])])])])])])])},m=[],y={name:"event-list-row",props:["event","client_event"],computed:{href:function(){return"/event/"+this.event.event_id}},data:function(){return{}},mounted:function(){},watch:{},methods:{clickedEventButton:function(){this.$router.push("/event/"+this.event.event_id)},selectEventClicked:function(){this.$emit("selectEventClicked",this.event,this.client_event)},dateStarted:function(t){var e=f()(this.event.from_datetime);return e.format(t)}}},g=y,w=(n("a72f"),n("2877")),_=Object(w["a"])(g,p,m,!1,null,"7a574524",null),b=_.exports,x={name:"events-list",props:["events"],components:{EventListRow:b},watch:{},mounted:function(){setTimeout((function(){Object(c["a"])(JSON.stringify({height:document.body.scrollHeight}))}),300)},methods:{selectEventClicked:function(t,e){this.$emit("selectEventClicked",t,e)},toastr:function(t,e,n){this.$emit("toastr",t,e,n)}},data:function(){return{list:[]}}},E=x,k=(n("d1f3"),Object(w["a"])(E,v,d,!1,null,"84c5f8ca",null)),L=k.exports,C={name:"event-page",components:{EventList:L},computed:Object(a["a"])({},Object(h["b"])(["currentClient"])),mounted:function(){this.loadData()},data:function(){return{company:{company_id:"aaaa",name:""},events:[]}},watch:{},methods:{showModal:function(){this.$refs["my-modal"].show()},hideModal:function(){this.$refs["my-modal"].hide()},loadData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.company.company_id=t.$route.params.id,e.next=3,t.loadCompany();case 3:return e.next=5,t.loadEvents();case 5:case"end":return e.stop()}}),e)})))()},loadEvents:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,o,i,a,s,l,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.currentClient){e.next=32;break}return n=t.$loading.show(),t.events=[],e.next=5,u.a.get("/events/list?company_id=".concat(t.company.company_id));case 5:if(r=e.sent,200!==r.status){e.next=27;break}o=r.data.events,i=f()(),e.t0=regeneratorRuntime.keys(o);case 10:if((e.t1=e.t0()).done){e.next=24;break}a=e.t1.value,s=o[a],l=0;case 14:if(!(l<s.length)){e.next=22;break}if(h=f()(s[l].to_datetime),!(h<i)){e.next=18;break}return e.abrupt("continue",19);case 18:t.events.push({event:s[l],client_event:null});case 19:++l,e.next=14;break;case 22:e.next=10;break;case 24:setTimeout((function(){Object(c["a"])(JSON.stringify({height:document.body.scrollHeight}))}),300),e.next=29;break;case 27:console.error(r),t.toastr("danger","Server Fel","Kunde inte lista evenemang");case 29:n.hide(),e.next=33;break;case 32:u.a.get("/events/listforclient?company_id=".concat(t.company.company_id,"&client_id=").concat(t.currentClient.client_id)).then((function(e){var n=f()(),r=e.data.events.filter((function(t){f()(t.event.from_datetime);return n<f()(t.event.to_datetime)}));t.events=void 0===r?[]:r})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte hämta evenemang")}));case 33:return e.next=35,t.mapEvents();case 35:case"end":return e.stop()}}),e)})))()},mapEvents:function(){var t=this,e=this.events.map((function(t){return t.event.company_id}));this.events=this.events.map((function(n){var r=t.company.companies.findIndex((function(t){return t.company_id===n.event.company_id}));return-1===r||e.every((function(e){return e===t.company.company_id}))?n.event.company_name="":n.event.company_name=t.company.companies[r].name,n}))},loadCompany:function(){var t=this;u.a.get("/company/public?company_id=".concat(this.company.company_id)).then((function(e){t.company=e.data.company})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte hämta förening")}))},toggleModal:function(){this.$refs["my-modal"].toggle("#toggle-btn")},selectEventClicked:function(){},toastr:function(t,e,n){this.$bvToast.toast(n,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})}}},O=C,j=(n("4333"),Object(w["a"])(O,r,o,!1,null,"2fbbe5a0",null));e["default"]=j.exports}}]);
//# sourceMappingURL=chunk-23e31512.30b35193.js.map