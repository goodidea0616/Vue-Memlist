(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2532bbf5"],{"0575":function(t,e,r){"use strict";r("589d")},"0d3b":function(t,e,r){var s=r("d039"),a=r("b622"),n=r("c430"),o=a("iterator");t.exports=!s((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,r="";return t.pathname="c%20d",e.forEach((function(t,s){e["delete"]("b"),r+=s+t})),n&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},"2b3d":function(t,e,r){"use strict";r("3ca3");var s,a=r("23e7"),n=r("83ab"),o=r("0d3b"),i=r("da84"),l=r("37e8"),c=r("6eeb"),u=r("19aa"),m=r("5135"),d=r("60da"),f=r("4df4"),h=r("6547").codeAt,p=r("5fb2"),b=r("d44e"),v=r("9861"),g=r("69f3"),y=i.URL,w=v.URLSearchParams,_=v.getState,k=g.set,x=g.getterFor("URL"),S=Math.floor,E=Math.pow,C="Invalid authority",R="Invalid scheme",P="Invalid host",A="Invalid port",M=/[A-Za-z]/,L=/[\d+-.A-Za-z]/,F=/\d/,$=/^(0x|0X)/,N=/^[0-7]+$/,I=/^\d+$/,q=/^[\dA-Fa-f]+$/,O=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,U=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,B=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,j=/[\u0009\u000A\u000D]/g,T=function(t,e){var r,s,a;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return P;if(r=z(e.slice(1,-1)),!r)return P;t.host=r}else if(J(t)){if(e=p(e),O.test(e))return P;if(r=D(e),null===r)return P;t.host=r}else{if(U.test(e))return P;for(r="",s=f(e),a=0;a<s.length;a++)r+=Y(s[a],Q);t.host=r}},D=function(t){var e,r,s,a,n,o,i,l=t.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),e=l.length,e>4)return t;for(r=[],s=0;s<e;s++){if(a=l[s],""==a)return t;if(n=10,a.length>1&&"0"==a.charAt(0)&&(n=$.test(a)?16:8,a=a.slice(8==n?1:2)),""===a)o=0;else{if(!(10==n?I:8==n?N:q).test(a))return t;o=parseInt(a,n)}r.push(o)}for(s=0;s<e;s++)if(o=r[s],s==e-1){if(o>=E(256,5-e))return null}else if(o>255)return null;for(i=r.pop(),s=0;s<r.length;s++)i+=r[s]*E(256,3-s);return i},z=function(t){var e,r,s,a,n,o,i,l=[0,0,0,0,0,0,0,0],c=0,u=null,m=0,d=function(){return t.charAt(m)};if(":"==d()){if(":"!=t.charAt(1))return;m+=2,c++,u=c}while(d()){if(8==c)return;if(":"!=d()){e=r=0;while(r<4&&q.test(d()))e=16*e+parseInt(d(),16),m++,r++;if("."==d()){if(0==r)return;if(m-=r,c>6)return;s=0;while(d()){if(a=null,s>0){if(!("."==d()&&s<4))return;m++}if(!F.test(d()))return;while(F.test(d())){if(n=parseInt(d(),10),null===a)a=n;else{if(0==a)return;a=10*a+n}if(a>255)return;m++}l[c]=256*l[c]+a,s++,2!=s&&4!=s||c++}if(4!=s)return;break}if(":"==d()){if(m++,!d())return}else if(d())return;l[c++]=e}else{if(null!==u)return;m++,c++,u=c}}if(null!==u){o=c-u,c=7;while(0!=c&&o>0)i=l[c],l[c--]=l[u+o-1],l[u+--o]=i}else if(8!=c)return;return l},V=function(t){for(var e=null,r=1,s=null,a=0,n=0;n<8;n++)0!==t[n]?(a>r&&(e=s,r=a),s=null,a=0):(null===s&&(s=n),++a);return a>r&&(e=s,r=a),e},K=function(t){var e,r,s,a;if("number"==typeof t){for(e=[],r=0;r<4;r++)e.unshift(t%256),t=S(t/256);return e.join(".")}if("object"==typeof t){for(e="",s=V(t),r=0;r<8;r++)a&&0===t[r]||(a&&(a=!1),s===r?(e+=r?":":"::",a=!0):(e+=t[r].toString(16),r<7&&(e+=":")));return"["+e+"]"}return t},Q={},H=d({},Q,{" ":1,'"':1,"<":1,">":1,"`":1}),G=d({},H,{"#":1,"?":1,"{":1,"}":1}),Z=d({},G,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Y=function(t,e){var r=h(t,0);return r>32&&r<127&&!m(e,t)?t:encodeURIComponent(t)},W={ftp:21,file:null,http:80,https:443,ws:80,wss:443},J=function(t){return m(W,t.scheme)},X=function(t){return""!=t.username||""!=t.password},tt=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},et=function(t,e){var r;return 2==t.length&&M.test(t.charAt(0))&&(":"==(r=t.charAt(1))||!e&&"|"==r)},rt=function(t){var e;return t.length>1&&et(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},st=function(t){var e=t.path,r=e.length;!r||"file"==t.scheme&&1==r&&et(e[0],!0)||e.pop()},at=function(t){return"."===t||"%2e"===t.toLowerCase()},nt=function(t){return t=t.toLowerCase(),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},ot={},it={},lt={},ct={},ut={},mt={},dt={},ft={},ht={},pt={},bt={},vt={},gt={},yt={},wt={},_t={},kt={},xt={},St={},Et={},Ct={},Rt=function(t,e,r,a){var n,o,i,l,c=r||ot,u=0,d="",h=!1,p=!1,b=!1;r||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(B,"")),e=e.replace(j,""),n=f(e);while(u<=n.length){switch(o=n[u],c){case ot:if(!o||!M.test(o)){if(r)return R;c=lt;continue}d+=o.toLowerCase(),c=it;break;case it:if(o&&(L.test(o)||"+"==o||"-"==o||"."==o))d+=o.toLowerCase();else{if(":"!=o){if(r)return R;d="",c=lt,u=0;continue}if(r&&(J(t)!=m(W,d)||"file"==d&&(X(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=d,r)return void(J(t)&&W[t.scheme]==t.port&&(t.port=null));d="","file"==t.scheme?c=yt:J(t)&&a&&a.scheme==t.scheme?c=ct:J(t)?c=ft:"/"==n[u+1]?(c=ut,u++):(t.cannotBeABaseURL=!0,t.path.push(""),c=St)}break;case lt:if(!a||a.cannotBeABaseURL&&"#"!=o)return R;if(a.cannotBeABaseURL&&"#"==o){t.scheme=a.scheme,t.path=a.path.slice(),t.query=a.query,t.fragment="",t.cannotBeABaseURL=!0,c=Ct;break}c="file"==a.scheme?yt:mt;continue;case ct:if("/"!=o||"/"!=n[u+1]){c=mt;continue}c=ht,u++;break;case ut:if("/"==o){c=pt;break}c=xt;continue;case mt:if(t.scheme=a.scheme,o==s)t.username=a.username,t.password=a.password,t.host=a.host,t.port=a.port,t.path=a.path.slice(),t.query=a.query;else if("/"==o||"\\"==o&&J(t))c=dt;else if("?"==o)t.username=a.username,t.password=a.password,t.host=a.host,t.port=a.port,t.path=a.path.slice(),t.query="",c=Et;else{if("#"!=o){t.username=a.username,t.password=a.password,t.host=a.host,t.port=a.port,t.path=a.path.slice(),t.path.pop(),c=xt;continue}t.username=a.username,t.password=a.password,t.host=a.host,t.port=a.port,t.path=a.path.slice(),t.query=a.query,t.fragment="",c=Ct}break;case dt:if(!J(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=a.username,t.password=a.password,t.host=a.host,t.port=a.port,c=xt;continue}c=pt}else c=ht;break;case ft:if(c=ht,"/"!=o||"/"!=d.charAt(u+1))continue;u++;break;case ht:if("/"!=o&&"\\"!=o){c=pt;continue}break;case pt:if("@"==o){h&&(d="%40"+d),h=!0,i=f(d);for(var v=0;v<i.length;v++){var g=i[v];if(":"!=g||b){var y=Y(g,Z);b?t.password+=y:t.username+=y}else b=!0}d=""}else if(o==s||"/"==o||"?"==o||"#"==o||"\\"==o&&J(t)){if(h&&""==d)return C;u-=f(d).length+1,d="",c=bt}else d+=o;break;case bt:case vt:if(r&&"file"==t.scheme){c=_t;continue}if(":"!=o||p){if(o==s||"/"==o||"?"==o||"#"==o||"\\"==o&&J(t)){if(J(t)&&""==d)return P;if(r&&""==d&&(X(t)||null!==t.port))return;if(l=T(t,d),l)return l;if(d="",c=kt,r)return;continue}"["==o?p=!0:"]"==o&&(p=!1),d+=o}else{if(""==d)return P;if(l=T(t,d),l)return l;if(d="",c=gt,r==vt)return}break;case gt:if(!F.test(o)){if(o==s||"/"==o||"?"==o||"#"==o||"\\"==o&&J(t)||r){if(""!=d){var w=parseInt(d,10);if(w>65535)return A;t.port=J(t)&&w===W[t.scheme]?null:w,d=""}if(r)return;c=kt;continue}return A}d+=o;break;case yt:if(t.scheme="file","/"==o||"\\"==o)c=wt;else{if(!a||"file"!=a.scheme){c=xt;continue}if(o==s)t.host=a.host,t.path=a.path.slice(),t.query=a.query;else if("?"==o)t.host=a.host,t.path=a.path.slice(),t.query="",c=Et;else{if("#"!=o){rt(n.slice(u).join(""))||(t.host=a.host,t.path=a.path.slice(),st(t)),c=xt;continue}t.host=a.host,t.path=a.path.slice(),t.query=a.query,t.fragment="",c=Ct}}break;case wt:if("/"==o||"\\"==o){c=_t;break}a&&"file"==a.scheme&&!rt(n.slice(u).join(""))&&(et(a.path[0],!0)?t.path.push(a.path[0]):t.host=a.host),c=xt;continue;case _t:if(o==s||"/"==o||"\\"==o||"?"==o||"#"==o){if(!r&&et(d))c=xt;else if(""==d){if(t.host="",r)return;c=kt}else{if(l=T(t,d),l)return l;if("localhost"==t.host&&(t.host=""),r)return;d="",c=kt}continue}d+=o;break;case kt:if(J(t)){if(c=xt,"/"!=o&&"\\"!=o)continue}else if(r||"?"!=o)if(r||"#"!=o){if(o!=s&&(c=xt,"/"!=o))continue}else t.fragment="",c=Ct;else t.query="",c=Et;break;case xt:if(o==s||"/"==o||"\\"==o&&J(t)||!r&&("?"==o||"#"==o)){if(nt(d)?(st(t),"/"==o||"\\"==o&&J(t)||t.path.push("")):at(d)?"/"==o||"\\"==o&&J(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&et(d)&&(t.host&&(t.host=""),d=d.charAt(0)+":"),t.path.push(d)),d="","file"==t.scheme&&(o==s||"?"==o||"#"==o))while(t.path.length>1&&""===t.path[0])t.path.shift();"?"==o?(t.query="",c=Et):"#"==o&&(t.fragment="",c=Ct)}else d+=Y(o,G);break;case St:"?"==o?(t.query="",c=Et):"#"==o?(t.fragment="",c=Ct):o!=s&&(t.path[0]+=Y(o,Q));break;case Et:r||"#"!=o?o!=s&&("'"==o&&J(t)?t.query+="%27":t.query+="#"==o?"%23":Y(o,Q)):(t.fragment="",c=Ct);break;case Ct:o!=s&&(t.fragment+=Y(o,H));break}u++}},Pt=function(t){var e,r,s=u(this,Pt,"URL"),a=arguments.length>1?arguments[1]:void 0,o=String(t),i=k(s,{type:"URL"});if(void 0!==a)if(a instanceof Pt)e=x(a);else if(r=Rt(e={},String(a)),r)throw TypeError(r);if(r=Rt(i,o,null,e),r)throw TypeError(r);var l=i.searchParams=new w,c=_(l);c.updateSearchParams(i.query),c.updateURL=function(){i.query=String(l)||null},n||(s.href=Mt.call(s),s.origin=Lt.call(s),s.protocol=Ft.call(s),s.username=$t.call(s),s.password=Nt.call(s),s.host=It.call(s),s.hostname=qt.call(s),s.port=Ot.call(s),s.pathname=Ut.call(s),s.search=Bt.call(s),s.searchParams=jt.call(s),s.hash=Tt.call(s))},At=Pt.prototype,Mt=function(){var t=x(this),e=t.scheme,r=t.username,s=t.password,a=t.host,n=t.port,o=t.path,i=t.query,l=t.fragment,c=e+":";return null!==a?(c+="//",X(t)&&(c+=r+(s?":"+s:"")+"@"),c+=K(a),null!==n&&(c+=":"+n)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==i&&(c+="?"+i),null!==l&&(c+="#"+l),c},Lt=function(){var t=x(this),e=t.scheme,r=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(s){return"null"}return"file"!=e&&J(t)?e+"://"+K(t.host)+(null!==r?":"+r:""):"null"},Ft=function(){return x(this).scheme+":"},$t=function(){return x(this).username},Nt=function(){return x(this).password},It=function(){var t=x(this),e=t.host,r=t.port;return null===e?"":null===r?K(e):K(e)+":"+r},qt=function(){var t=x(this).host;return null===t?"":K(t)},Ot=function(){var t=x(this).port;return null===t?"":String(t)},Ut=function(){var t=x(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Bt=function(){var t=x(this).query;return t?"?"+t:""},jt=function(){return x(this).searchParams},Tt=function(){var t=x(this).fragment;return t?"#"+t:""},Dt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(n&&l(At,{href:Dt(Mt,(function(t){var e=x(this),r=String(t),s=Rt(e,r);if(s)throw TypeError(s);_(e.searchParams).updateSearchParams(e.query)})),origin:Dt(Lt),protocol:Dt(Ft,(function(t){var e=x(this);Rt(e,String(t)+":",ot)})),username:Dt($t,(function(t){var e=x(this),r=f(String(t));if(!tt(e)){e.username="";for(var s=0;s<r.length;s++)e.username+=Y(r[s],Z)}})),password:Dt(Nt,(function(t){var e=x(this),r=f(String(t));if(!tt(e)){e.password="";for(var s=0;s<r.length;s++)e.password+=Y(r[s],Z)}})),host:Dt(It,(function(t){var e=x(this);e.cannotBeABaseURL||Rt(e,String(t),bt)})),hostname:Dt(qt,(function(t){var e=x(this);e.cannotBeABaseURL||Rt(e,String(t),vt)})),port:Dt(Ot,(function(t){var e=x(this);tt(e)||(t=String(t),""==t?e.port=null:Rt(e,t,gt))})),pathname:Dt(Ut,(function(t){var e=x(this);e.cannotBeABaseURL||(e.path=[],Rt(e,t+"",kt))})),search:Dt(Bt,(function(t){var e=x(this);t=String(t),""==t?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Rt(e,t,Et)),_(e.searchParams).updateSearchParams(e.query)})),searchParams:Dt(jt),hash:Dt(Tt,(function(t){var e=x(this);t=String(t),""!=t?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Rt(e,t,Ct)):e.fragment=null}))}),c(At,"toJSON",(function(){return Mt.call(this)}),{enumerable:!0}),c(At,"toString",(function(){return Mt.call(this)}),{enumerable:!0}),y){var zt=y.createObjectURL,Vt=y.revokeObjectURL;zt&&c(Pt,"createObjectURL",(function(t){return zt.apply(y,arguments)})),Vt&&c(Pt,"revokeObjectURL",(function(t){return Vt.apply(y,arguments)}))}b(Pt,"URL"),a({global:!0,forced:!o,sham:!n},{URL:Pt})},"3e2c":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{ref:"confirmModal",attrs:{"hide-footer":"",title:t.title}},[r("b-row",[r("b-col",{attrs:{lg:"12"}},[r("div",{staticClass:"d-block text-center"},[r("h3",[t._v(t._s(t.message))])])])],1),r("b-row",{staticClass:"mt-8 mb-8"},[r("b-col",{attrs:{lg:"6"}},[r("b-button",{attrs:{variant:t.confirmColor,block:""},on:{click:t.onConfirm}},[t._v(t._s(t.confirm))])],1),r("b-col",{attrs:{lg:"6"}},[r("b-button",{attrs:{variant:"outline-secondary",block:""},on:{click:t.onCancel}},[t._v(t._s(t.cancel))])],1)],1)],1)},a=[],n=(r("96cf"),r("1da1")),o={name:"confirm-modal",data:function(){return{}},props:{type:{type:String,default:"danger"},title:String,message:String,confirm:{type:String,default:"Bekräfta"},cancel:{type:String,default:"Avbryt"}},mounted:function(){return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{show:function(){this.$refs["confirmModal"].show()},onConfirm:function(){this.$refs["confirmModal"].hide(),this.$emit("confirm")},onCancel:function(){this.$refs["confirmModal"].hide(),this.$emit("cancel")}},computed:{confirmColor:function(){switch(this.type){case"danger":return"outline-danger";case"success":return"outline-success";case"info":return"outline-info";case"warning":return"outline-warning";case"primary":return"outline-primary"}}}},i=o,l=r("2877"),c=Object(l["a"])(i,s,a,!1,null,"7c6e001a",null);e["a"]=c.exports},"4fad":function(t,e,r){var s=r("23e7"),a=r("6f53").entries;s({target:"Object",stat:!0},{entries:function(t){return a(t)}})},"589d":function(t,e,r){},"5fb2":function(t,e,r){"use strict";var s=2147483647,a=36,n=1,o=26,i=38,l=700,c=72,u=128,m="-",d=/[^\0-\u007E]/,f=/[.\u3002\uFF0E\uFF61]/g,h="Overflow: input needs wider integers to process",p=a-n,b=Math.floor,v=String.fromCharCode,g=function(t){var e=[],r=0,s=t.length;while(r<s){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<s){var n=t.charCodeAt(r++);56320==(64512&n)?e.push(((1023&a)<<10)+(1023&n)+65536):(e.push(a),r--)}else e.push(a)}return e},y=function(t){return t+22+75*(t<26)},w=function(t,e,r){var s=0;for(t=r?b(t/l):t>>1,t+=b(t/e);t>p*o>>1;s+=a)t=b(t/p);return b(s+(p+1)*t/(t+i))},_=function(t){var e=[];t=g(t);var r,i,l=t.length,d=u,f=0,p=c;for(r=0;r<t.length;r++)i=t[r],i<128&&e.push(v(i));var _=e.length,k=_;_&&e.push(m);while(k<l){var x=s;for(r=0;r<t.length;r++)i=t[r],i>=d&&i<x&&(x=i);var S=k+1;if(x-d>b((s-f)/S))throw RangeError(h);for(f+=(x-d)*S,d=x,r=0;r<t.length;r++){if(i=t[r],i<d&&++f>s)throw RangeError(h);if(i==d){for(var E=f,C=a;;C+=a){var R=C<=p?n:C>=p+o?o:C-p;if(E<R)break;var P=E-R,A=a-R;e.push(v(y(R+P%A))),E=b(P/A)}e.push(v(y(E))),p=w(f,S,k==_),f=0,++k}}++f,++d}return e.join("")};t.exports=function(t){var e,r,s=[],a=t.toLowerCase().replace(f,".").split(".");for(e=0;e<a.length;e++)r=a[e],s.push(d.test(r)?"xn--"+_(r):r);return s.join(".")}},"63fd":function(t,e,r){},"676f":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-select",{attrs:{multiple:"",options:t.options},model:{value:t.showFields,callback:function(e){t.showFields=e},expression:"showFields"}}),r("div",{staticClass:"d-flex mt-5"},[r("v-select",{staticClass:"page-count-select",attrs:{options:[25,50,100],clearable:!1,searchable:!1},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),r("b-pagination",{staticClass:"ml-auto",attrs:{"total-rows":t.clients.length,"per-page":t.perPage,"aria-controls":"search-result-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),r("div",[r("b-table",{staticClass:"mt-3 cursor-pointer",attrs:{id:"search-result-table","sticky-header":"",responsive:"",striped:"",hover:"",bordered:"",items:t.clients,fields:t.showFields,"per-page":t.perPage,"current-page":t.currentPage},on:{"row-clicked":t.rowClicked}})],1)],1)},a=[],n=(r("4de4"),r("4a7a")),o=r.n(n),i=(r("6dfc"),{name:"search-result",components:{vSelect:o.a},data:function(){return{currentPage:1,perPage:25,options:[],fields:[{label:"Förening",code:"company"},{label:"Period",code:"period"},{label:"Förnamn",code:"firstname"},{label:"Efternamn",code:"lastname"},{label:"Personnummer",code:"in_personnr"},{label:"Betalat",code:"paying"},{label:"LADOK",code:"ladok"},{label:"Ålder",code:"age"},{label:"Kön",code:"sex"},{label:"E-post",code:"email"},{label:"Telefon",code:"phone"},{label:"Gata",code:"address"},{label:"Postnummer",code:"zipcode"},{label:"Region",code:"region_code"},{label:"Land",code:"country"},{label:"Postort",code:"post"},{label:"Medlemsnummer",code:"public_id"},{label:"Registreringsdatum",code:"rdt"}],showFields:[{key:"company",label:"Förening",show:!0,sortable:!0},{key:"period",label:"Period",show:!0,sortable:!0},{key:"firstname",label:"Förnamn",show:!0,sortable:!0},{key:"lastname",label:"Efternamn",show:!0,sortable:!0},{key:"in_personnr",label:"Personnummer",show:!0,sortable:!0},{key:"email",label:"E-post",show:!0,sortable:!0},{key:"age",label:"Ålder",show:!0,sortable:!0},{key:"sex",label:"Kön",show:!0,sortable:!0},{key:"phone",label:"Telefon",show:!0,sortable:!0},{key:"address",label:"Gata",show:!0,sortable:!0},{key:"zipcode",label:"Postnummer",show:!0,sortable:!0},{key:"ladok",label:"LADOK",show:!1,sortable:!0},{key:"paying",label:"Betalat",show:!1,sortable:!0},{key:"region_code",label:"Region",show:!0,sortable:!0},{key:"country",label:"Land",show:!1,sortable:!0},{key:"post",label:"Postort",show:!1,sortable:!0},{key:"public_id",label:"Medlemsnummer",show:!1,sortable:!0},{key:"rdt",label:"Registreringsdatum",show:!1,sortable:!0}]}},watch:{showFields:function(t,e){for(var r=this.fields,s=0;s<t.length;++s)t[s].hasOwnProperty("code")&&(t[s].key=t[s].code),!t[s].show&&t[s].hasOwnProperty("show")||(r=r.filter((function(e){return e.label!==t[s].label})));this.showFields=t,this.options=r,this.$emit("showFields",this.getShowFieldsNames(t))}},mounted:function(){var t=this;setTimeout((function(){t.showFields=t.showFields.filter((function(t){return t.show}))}),100)},props:{clients:{type:Array,default:[]}},methods:{rowClicked:function(t,e){this.$emit("clientSelected",t)},getShowFieldsNames:function(t){var e=[];return t.filter((function(t){e.push(t.key)})),e}}}),l=i,c=(r("0575"),r("2877")),u=r("6544"),m=r.n(u),d=r("b974"),f=Object(c["a"])(l,s,a,!1,null,"6ff10946",null);e["a"]=f.exports;m()(f,{VSelect:d["a"]})},"7f08":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{attrs:{"header-bg-variant":"secondary"},scopedSlots:t._u([{key:"header",fn:function(){return[r("fa-icon",{staticClass:"mr-1",attrs:{icon:["fas","users"]}}),t._v("Medlemsdata ")]},proxy:!0}])},[r("SPARLookup",{ref:"sparModal",attrs:{client_id:t.form.client_id}}),r("b-card-body",[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("div",{staticClass:"form-create-member border border-secondary"},[r("b-form-group",{attrs:{label:"Medlemsnummer","label-for":"member-num"}},[r("b-form-input",{attrs:{id:"member-num",placeholder:"Lämna tomt för autogenererat"},model:{value:t.form.public_id,callback:function(e){t.$set(t.form,"public_id",e)},expression:"form.public_id"}})],1),r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Förnamn","label-for":"member-firstname"}},[t.constreq.includes("MEMBER_REQ_FULLNAME")?r("b-form-input",{attrs:{id:"member-firstname",placeholder:"Samtliga tilltalsnamn",state:t.validFn,required:""},model:{value:t.form.firstname,callback:function(e){t.$set(t.form,"firstname",e)},expression:"form.firstname"}}):r("b-form-input",{attrs:{id:"member-firstname",placeholder:"Samtliga tilltalsnamn"},model:{value:t.form.firstname,callback:function(e){t.$set(t.form,"firstname",e)},expression:"form.firstname"}})],1)],1),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Efternamn","label-for":"member-lastname"}},[t.constreq.includes("MEMBER_REQ_FULLNAME")?r("b-form-input",{attrs:{id:"member-lastname",placeholder:"Efternamn",state:t.validLn,required:""},model:{value:t.form.lastname,callback:function(e){t.$set(t.form,"lastname",e)},expression:"form.lastname"}}):r("b-form-input",{attrs:{id:"member-lastname",placeholder:"Efternamn"},model:{value:t.form.lastname,callback:function(e){t.$set(t.form,"lastname",e)},expression:"form.lastname"}})],1)],1)],1),r("b-form-group",{attrs:{label:"Inmatat Personnummer","label-for":"member-security-number"}},[r("b-row",[r("b-col",[t.constreq.includes("MEMBER_REQ_PERSONNR")||t.constreq.includes("MEMBER_REQ_SSN")?r("b-form-input",{attrs:{id:"member-security-number",placeholder:"Ex: 19850130",state:t.validSSN,required:""},model:{value:t.form.in_personnr,callback:function(e){t.$set(t.form,"in_personnr",e)},expression:"form.in_personnr"}}):r("b-form-input",{attrs:{id:"member-security-number",placeholder:"Ex: 19850130"},model:{value:t.form.in_personnr,callback:function(e){t.$set(t.form,"in_personnr",e)},expression:"form.in_personnr"}})],1),r("b-col",[r("div",{staticClass:"d-flex"},[r("b-form-input",{attrs:{disabled:""},model:{value:t.form.birthyear,callback:function(e){t.$set(t.form,"birthyear",e)},expression:"form.birthyear"}}),r("b-form-input",{staticClass:"ml-3",attrs:{disabled:""},model:{value:t.form.birthmonth,callback:function(e){t.$set(t.form,"birthmonth",e)},expression:"form.birthmonth"}}),r("b-form-input",{staticClass:"ml-3",attrs:{disabled:""},model:{value:t.form.birthday,callback:function(e){t.$set(t.form,"birthday",e)},expression:"form.birthday"}}),r("b-form-input",{staticClass:"ml-3",attrs:{disabled:""},model:{value:t.form.ssn_last_4,callback:function(e){t.$set(t.form,"ssn_last_4",e)},expression:"form.ssn_last_4"}})],1)])],1)],1),r("b-row",[r("b-col",{attrs:{"md-6":""}},[r("b-form-group",{attrs:{label:"Egen definerat kön","label-for":"member-gender"}},[r("b-form-select",{attrs:{id:"member-gender",options:t.genders},model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}})],1)],1),r("b-col",{attrs:{"md-6":""}})],1)],1),r("div",{staticClass:"form-create-member border border-secondary mt-5"},[r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"C/O","label-for":"member-co"}},[r("b-form-input",{attrs:{id:"member-co",placeholder:""},model:{value:t.form.co,callback:function(e){t.$set(t.form,"co",e)},expression:"form.co"}})],1)],1)],1),r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Gatuadress","label-for":"member-street"}},[t.constreq.includes("MEMBER_REQ_ADDRESS")?r("b-form-input",{attrs:{id:"member-street",placeholder:"Ex: Hornsgatan 12",state:t.validAddress,required:""},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}}):r("b-form-input",{attrs:{id:"member-street",placeholder:"Ex: Hornsgatan 12"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1),r("b-col",{attrs:{md:"2"}},[r("b-form-group",{attrs:{label:"Postkod","label-for":"member-postcode"}},[t.constreq.includes("MEMBER_REQ_ADDRESS")?r("b-form-input",{attrs:{id:"member-postcode",placeholder:"Ex: 12214",state:t.validZip,required:""},model:{value:t.form.zipcode,callback:function(e){t.$set(t.form,"zipcode",e)},expression:"form.zipcode"}}):r("b-form-input",{attrs:{id:"member-postcode",placeholder:"Ex: 12214"},model:{value:t.form.zipcode,callback:function(e){t.$set(t.form,"zipcode",e)},expression:"form.zipcode"}})],1)],1),r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"Postort","label-for":"member-postal"}},[t.constreq.includes("MEMBER_REQ_ADDRESS")?r("b-form-input",{attrs:{id:"member-postal",state:t.validPost,required:""},model:{value:t.form.post,callback:function(e){t.$set(t.form,"post",e)},expression:"form.post"}}):r("b-form-input",{attrs:{id:"member-postal"},model:{value:t.form.post,callback:function(e){t.$set(t.form,"post",e)},expression:"form.post"}})],1)],1)],1),"SE"===t.form.country?r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Region","label-for":"member-region"}},[r("b-form-select",{attrs:{id:"member-region",options:t.regions},on:{change:t.onRegionChange},model:{value:t.form.region_code,callback:function(e){t.$set(t.form,"region_code",e)},expression:"form.region_code"}})],1)],1),r("b-col",{attrs:{"md-6":""}},[r("b-form-group",{attrs:{label:"Kommun","label-for":"member-commun"}},[r("b-form-select",{attrs:{id:"member-commun",options:t.communes},model:{value:t.form.commune_code,callback:function(e){t.$set(t.form,"commune_code",e)},expression:"form.commune_code"}})],1)],1)],1):t._e(),r("b-form-group",{attrs:{label:"Land","label-for":"member-countries"}},[r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-select",{attrs:{id:"member-countries",options:t.countries,"text-field":"sv","value-field":"iso"},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}})],1),r("b-col",{staticClass:"d-flex justify-content-end",attrs:{md:"6"}},[r("b-button",{attrs:{variant:"outline-success"},on:{click:t.showSPAR}},[t._v(" SPAR ")])],1)],1)],1)],1),r("div",{staticClass:"form-create-member border border-secondary mt-5"},[r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Mobiltelefon","label-for":"member-mobile"}},[t.constreq.includes("MEMBER_REQ_PHONE")||t.constreq.includes("MEMBER_REQ_EMAILPHONE ")&&!t.validEmail?r("b-form-input",{attrs:{id:"member-mobile",state:t.validTel,placeholder:"+46",required:""},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}):r("b-form-input",{attrs:{id:"member-mobile",placeholder:"+46"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1),r("b-col",{attrs:{md:"6"}},[t.constreq.includes("MEMBER_REQ_EMAIL")||t.constreq.includes("MEMBER_REQ_EMAILPHONE ")&&!t.validTel?r("b-form-group",{attrs:{label:"Email","label-for":"member-email"}},[r("b-form-input",{attrs:{id:"member-email",state:t.validEmail,required:""},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t.invalidEmail?r("b-form-invalid-feedback",{attrs:{id:"member-email-feedback"}},[t._v(' E-postadressen är redan registrerad i systemet. För att bjuda in denna e-post till denna förening, använd "Bjud in" knappen ')]):t._e()],1):r("b-form-group",{attrs:{label:"Email","label-for":"member-email"}},[r("b-form-input",{attrs:{id:"member-email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1)],1),r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Lösenord","label-for":"member-password"}},[r("b-form-input",{attrs:{type:"password",id:"member-password",placeholder:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),r("b-col",{attrs:{md:"6"}})],1)],1),t.client_id?r("div",{staticClass:"form-create-member border border-secondary mt-5"},[r("b-row",{staticClass:"mb-4"},[r("b-col",{attrs:{cols:"9"}},[t._v("Målsman")]),r("b-col",{staticClass:"d-flex justify-content-end",attrs:{cols:"3"}},[r("a",{staticClass:"btn btn-primary font-weight-bolder font-size-sm",staticStyle:{"max-height":"38px"},on:{click:t.createParent}},[r("i",{staticClass:"menu-icon flaticon2-plus",staticStyle:{"font-size":"1em"}}),t._v("Ny målsman ")])])],1),r("b-collapse",{attrs:{visible:t.showParentForm,id:"collapse-attribute-form"}},[r("b-row",{attrs:{"align-content":"between"}},[r("b-col",[r("b-form-group",{attrs:{label:"Förnamn","label-for":"parentFName"}},[r("b-form-input",{attrs:{id:"parentFName",type:"text"},model:{value:t.parent.fn,callback:function(e){t.$set(t.parent,"fn",e)},expression:"parent.fn"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Efternamn","label-for":"parentLName"}},[r("b-form-input",{attrs:{id:"parentLName",type:"text"},model:{value:t.parent.ln,callback:function(e){t.$set(t.parent,"ln",e)},expression:"parent.ln"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Telefon","label-for":"parentPhone"}},[r("b-form-input",{attrs:{id:"parentPhone"},model:{value:t.parent.ph,callback:function(e){t.$set(t.parent,"ph",e)},expression:"parent.ph"}})],1)],1),r("b-col",{attrs:{md:"3"}},[r("b-form-group",{attrs:{label:"E-post","label-for":"parentEmail"}},[r("b-form-input",{attrs:{id:"parentEmail",type:"email"},model:{value:t.parent.em,callback:function(e){t.$set(t.parent,"em",e)},expression:"parent.em"}})],1)],1),r("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"2"}},[r("b-button",{attrs:{id:"parentSave",variant:"outline-success",size:"sm",disabled:!t.disabledSaveParent},on:{click:t.onSaveParent}},[t._v("Spara")])],1)],1)],1),r("hr",{staticClass:"my-3"}),r("b-table",{attrs:{responsive:"",fields:t.parentFields,items:t.parentItems,"head-variant":"dark","thead-class":"col-3"},scopedSlots:t._u([{key:"cell(action)",fn:function(e){return[r("a",{staticClass:"btn btn-icon btn-light btn-sm mx-1",on:{click:function(r){return t.editParent(e.index)}}},[r("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[r("inline-svg",{attrs:{src:"/assets/svg/Write.svg"}})],1)]),r("a",{staticClass:"btn btn-icon btn-light btn-sm mx-1",on:{click:function(r){return t.deleteParent(e.index)}}},[r("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[r("inline-svg",{attrs:{src:"/assets/svg/Trash.svg"}})],1)])]}}],null,!1,2874333528)})],1):t._e(),r("div",{staticClass:"form-create-member border border-secondary mt-5"},[r("b-row",[r("b-col",{attrs:{cols:"9"}},[t._v("Attribut")]),r("b-col",{staticClass:"d-flex justify-content-end",attrs:{cols:"3"}},[r("a",{staticClass:"btn btn-primary font-weight-bolder font-size-sm",staticStyle:{"max-height":"38px"},on:{click:function(e){t.showAttrForm=!t.showAttrForm}}},[r("i",{staticClass:"menu-icon flaticon2-plus",staticStyle:{"font-size":"1em"}}),t._v("Nytt attribut ")])])],1),r("b-collapse",{attrs:{visible:t.showAttrForm,id:"collapse-attribute-form"}},[r("b-row",[r("b-col",{attrs:{md:"5"}},[r("b-form-group",{attrs:{label:"Kolumn","label-for":"attr-name"}},[r("b-form-select",{attrs:{id:"attr-name",options:t.attrNames},model:{value:t.attrName,callback:function(e){t.attrName=e},expression:"attrName"}})],1)],1),r("b-col",{attrs:{md:"5"}},[r("b-form-group",{attrs:{label:"Värde","label-for":"attr-value"}},[r("b-form-select",{attrs:{id:"attr-value",options:t.attrVals},model:{value:t.attrVal,callback:function(e){t.attrVal=e},expression:"attrVal"}})],1)],1),r("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"2"}},[r("b-button",{attrs:{id:"attrSave",variant:"outline-success",size:"sm"},on:{click:t.onSaveAttr}},[t._v("Spara")])],1)],1)],1),r("hr",{staticClass:"my-3"}),r("b-table",{attrs:{responsive:"",fields:t.attrFields,items:t.attrItems,"head-variant":"dark","thead-class":"col-4"},scopedSlots:t._u([{key:"cell(action)",fn:function(e){return[r("a",{staticClass:"btn btn-icon btn-light btn-sm mx-1",on:{click:function(r){return t.editAttr(e.index)}}},[r("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[r("inline-svg",{attrs:{src:"/assets/svg/Write.svg"}})],1)]),r("a",{staticClass:"btn btn-icon btn-light btn-sm mx-1",on:{click:function(r){return t.deleteAttr(e.index)}}},[r("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[r("inline-svg",{attrs:{src:"/assets/svg/Trash.svg"}})],1)])]}}])})],1),null!=t.client_id?r("div",{staticClass:"form-create-member border border-secondary mt-5"},[r("b-row",{staticClass:"mt-6"},[r("b-col",{attrs:{md:"6"}},[r("div",{staticClass:"d-flex"},[r("b-form-group",{attrs:{label:"Registreringsdatum"}},[r("b-form-input",{attrs:{disabled:""},model:{value:t.form.rdt,callback:function(e){t.$set(t.form,"rdt",e)},expression:"form.rdt "}})],1)],1)]),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Medlemskapstid"}},[r("div",{staticClass:"d-flex"},[r("b-form-input",{staticClass:"pl-6",attrs:{disabled:"",value:t.currentPeriod.from}}),r("span",{staticClass:"pl-5 pr-5 pt-3"},[t._v("To")]),r("b-form-input",{attrs:{disabled:"",value:t.currentPeriod.to}})],1)])],1)],1),r("b-row",{staticClass:"mt-6"},[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Giltig Från Datum"}},[r("b-form-datepicker",{attrs:{id:"input-3"},model:{value:t.form.vfdt,callback:function(e){t.$set(t.form,"vfdt",e)},expression:"form.vfdt"}})],1)],1),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Giltig Till Datum"}},[r("b-form-datepicker",{attrs:{id:"input-3"},model:{value:t.form.vtdt,callback:function(e){t.$set(t.form,"vtdt",e)},expression:"form.vtdt"}})],1)],1)],1),r("b-row",{staticClass:"mt-6"},[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Stickprov URL"}},[r("b-form-input",{attrs:{id:"input-3",value:t.spurl,disabled:""}})],1)],1),r("b-col",{attrs:{md:"6"}})],1)],1):t._e(),t.client_id?r("div",{staticClass:"form-create-member border border-secondary mt-5 pt-2 pb-2"},[r("b-row",{staticClass:"mt-4"},[r("b-col",{attrs:{md:"9"}},[r("div",{staticClass:"pt-2"},[t._v(" Skicka förnyelse ")])]),r("b-col",{attrs:{md:"3"}},[r("div",[r("b-button",{staticClass:"btn-memberEditForm",attrs:{variant:"primary",size:"sm"},on:{click:function(e){return t.showConfirm(1)}}},[t._v("Skicka")])],1)]),r("Confirm",{ref:"renewal",attrs:{title:"Förnya medlemskap",message:"Vill du skicka e-post om förnyelse till medlemmen?",type:"success"},on:{confirm:t.onRenewal}})],1),r("hr",{staticClass:"my-4"}),r("b-row",[r("b-col",{attrs:{md:"9"}},[r("div",{staticClass:"pt-2"},[t._v(" Skicka återställning av lösenord ")])]),r("b-col",{attrs:{md:"3"}},[r("div",[r("b-button",{staticClass:"btn-memberEditForm",attrs:{variant:"primary",size:"sm"},on:{click:function(e){return t.showConfirm(2)}}},[t._v("Skicka")])],1)]),r("Confirm",{ref:"resetPass",attrs:{title:"Återställ lösenord",message:"Vill du skicka länk om återställande?",type:"success"},on:{confirm:t.onResetPass}})],1),r("hr",{staticClass:"my-4"}),r("b-row",[r("b-col",{attrs:{md:"9"}},[r("div",{staticClass:"pt-2"},[t._v(" Logga in som medlem ")])]),r("b-col",{attrs:{md:"3"}},[r("div",[r("b-button",{staticClass:"btn-memberEditForm",attrs:{variant:"primary",size:"sm"},on:{click:t.login}},[t._v("Logga in")])],1)])],1),r("hr",{staticClass:"my-4"}),r("b-row",[r("b-col",{attrs:{md:"9"}},[r("div",{staticClass:"pt-2"},[t._v(" Ladda ner registerutdrag ")])]),r("b-col",{attrs:{md:"3"}},[r("div",[r("b-button",{staticClass:"btn-memberEditForm",attrs:{variant:"primary",size:"sm"},on:{click:t.onExport}},[t._v("Ladda ner")])],1)])],1)],1):t._e(),t.client_id?r("div",{staticClass:"form-create-member border border-secondary mt-5"},[r("b-row",[r("b-col",{attrs:{md:"9"}},[r("div",{staticClass:"pt-2"},[t._v(" Radera medlem från systemet ")])]),r("b-col",{attrs:{md:"3"}},[r("div",[r("b-button",{staticClass:"btn-memberEditForm",attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.showConfirm(3)}}},[t._v("Radera")])],1)]),r("Confirm",{ref:"deleteMember",attrs:{title:"Radera medlem",message:"Vänligen bekräfta att du vill ta bort "+t.form.firstname+" "+t.form.lastname+". Genom att bekräfta denna uppmaning kommer medlem helt raderas ur systemet.",type:"success"},on:{confirm:function(e){return t.$emit("onDelete")}}})],1)],1):t._e(),r("div",{staticClass:"form-create-member border border-secondary mt-5"},[r("b-row",{attrs:{"align-v":"center"}},[r("b-col",{attrs:{md:"9"}},[r("div",{staticClass:"pt-2"},[t._v(" Spara medlemsdata ")])]),r("b-col",{attrs:{md:"3"}},[r("div",{staticClass:"mb-3"},[r("b-button",{staticClass:"btn-memberEditForm",attrs:{variant:"success",size:"sm",type:"submit",disabled:t.isValid}},[t._v("Spara")])],1),r("div",[r("b-button",{staticClass:"btn-memberEditForm",attrs:{variant:"secondary",size:"sm"},on:{click:t.onClose}},[t._v("Stäng")])],1)])],1)],1)])],1)],1)},a=[],n=(r("99af"),r("4de4"),r("7db0"),r("caad"),r("13d5"),r("a434"),r("b0c0"),r("a9e3"),r("d3b7"),r("ac1f"),r("25f0"),r("2532"),r("3ca3"),r("5319"),r("ddb0"),r("2b3d"),r("5530")),o=(r("96cf"),r("1da1")),i=r("bc3a"),l=r.n(i),c=r("2f62"),u=r("767c"),m=r("3e2c"),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{ref:"modal",attrs:{"hide-footer":""},model:{value:t.showSPARModal,callback:function(e){t.showSPARModal=e},expression:"showSPARModal"}},[r("div",{staticClass:"form-create-member border border-secondary"},[r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Förnamn","label-for":"member-firstname"}},[r("b-form-input",{attrs:{id:"member-firstname"},model:{value:t.spar.fn,callback:function(e){t.$set(t.spar,"fn",e)},expression:"spar.fn"}})],1)],1),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Efternamn","label-for":"member-lastname"}},[r("b-form-input",{attrs:{id:"member-lastname"},model:{value:t.spar.ln,callback:function(e){t.$set(t.spar,"ln",e)},expression:"spar.ln"}})],1)],1)],1),r("b-row",{staticClass:"mt-6"},[r("b-col",{attrs:{md:"12"}},[r("b-form-group",{attrs:{label:"Gatuadress","label-for":"member-street"}},[r("b-form-input",{attrs:{id:"member-street"},model:{value:t.spar.st,callback:function(e){t.$set(t.spar,"st",e)},expression:"spar.st"}})],1)],1)],1),r("b-row",[r("b-col",{attrs:{md:"5"}},[r("b-form-group",{attrs:{label:"Postkod","label-for":"member-postcode"}},[r("b-form-input",{attrs:{id:"member-postcode"},model:{value:t.spar.zip,callback:function(e){t.$set(t.spar,"zip",e)},expression:"spar.zip"}})],1)],1),r("b-col",{attrs:{md:"7"}},[r("b-form-group",{attrs:{label:"Postort","label-for":"member-postal"}},[r("b-form-input",{attrs:{id:"member-postal"},model:{value:t.spar.pa,callback:function(e){t.$set(t.spar,"pa",e)},expression:"spar.pa"}})],1)],1)],1),t.sparWaiting?r("b-row",{staticClass:"mt-6"},[r("b-col",{attrs:{lg:"6"}},[r("b-button",{attrs:{variant:"outline-success"},on:{click:t.doSpar}},[t._v(" Gör SPAR uppslag ")])],1),r("b-col",{attrs:{lg:"6"}})],1):t._e(),t.showError?r("b-row",[r("b-col",{attrs:{lg:"12"}},[r("b-alert",{attrs:{variant:"danger",show:""}},[t._v(t._s(t.errorText))])],1)],1):t._e(),t.sparOK?r("b-row",{staticClass:"mt-6"},[r("b-col",{attrs:{lg:"6"}},[r("b-button",{attrs:{variant:"outline-success"},on:{click:t.save}},[t._v(" Spara ")])],1),r("b-col",{attrs:{lg:"6"}},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.cancel}},[t._v(" Ångra ")])],1)],1):t._e(),t.showError?r("b-row",{staticClass:"mt-6"},[r("b-col",{attrs:{lg:"6"}},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.cancel}},[t._v(" Stäng ")])],1)],1):t._e()],1)])},f=[],h={name:"create-member",components:{Confirm:m["a"]},data:function(){return{showError:!1,errorText:"Ett fel uppstod",showSPARModal:!1,sparWaiting:!0,sparOK:!1,spar:{pa:"",fn:"",ln:"",st:"",zip:""}}},props:{client_id:{type:Number,default:null}},watch:{},computed:{},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{show:function(){this.showSPARModal=!0},close:function(){this.showSPARModal=!1},doSpar:function(){this.doSPARLookup(this.client_id)},cancel:function(){this.$refs["modal"].hide(),this.$emit("cancel")},save:function(){this.$emit("save")},toastr:function(t,e,r){this.$bvToast.toast(r,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})},doSPARLookup:function(t){var e=this;this.sparWaiting=!1,l.a.get("/client/spar?client_id=".concat(t)).then((function(t){"SPAR disabled"===t.data.reason?(e.showError=!0,e.errorText="SPAR är ej aktiverat"):(e.spar=t.data.spar,e.sparOK=!0),console.log("error: "+e.showError)})).catch((function(t){console.error(t),e.toastr("danger","Serverfel","Kunde inte göra uppslag"),e.showError=!0}))}}},p=h,b=(r("c53f"),r("2877")),v=Object(b["a"])(p,d,f,!1,null,"dea12048",null),g=v.exports,y=(r("c1df"),r("c789")),w={name:"create-member",components:{Confirm:m["a"],SPARLookup:g},data:function(){return{password:"",spurl:"",form:{number:"",firstname:"",lastname:"",security_number:"",mobile:"",email:"",sex:"M",country:"",commune_code:"",region_code:"",rdt:"",login_token:"",co:"",birthyear:"",birthmonth:"",birthday:"",ssn_last_4:""},attrName:null,attrNames:[],attrVal:null,attrVals:[],attrIndex:null,showAttrForm:!1,showParentForm:!1,invalidEmail:!1,validEmail:!1,validSSN:!1,validBirth:!1,validTel:!1,validAddress:!1,validZip:!1,validPost:!1,validFn:!1,validLn:!1,originalEmail:"",attrFields:[{key:"attrName",label:"Kolumn",thStyle:"width: 30%"},{key:"value",label:"Värde",thStyle:"width: 50%"},{key:"action",label:"",thStyle:"width: auto"}],attrItems:[],parentFields:[{key:"fn",label:"Förnamn",thStyle:"width: 20%"},{key:"ln",label:"Efternamn",thStyle:"width: 20%"},{key:"ph",label:"Telefon",thStyle:"width: 20%"},{key:"em",label:"E-post",thStyle:"width: 20%"},{key:"action",label:"",thStyle:"width: auto"}],parentItems:[],parentIndex:"",parent:{ln:"",fn:"",em:"",ph:"",pn:""},communes:{},isPut:!this.isNew,currentClientId:this.$store.getters.currentClientId,clientExcelField:{"Förening":"company_name",Medlemsnummer:"public_id","Förnamn":"firstname",Efternamn:"lastname",Personnummer:"in_personnr","Kön":"sex_name","C/O":"co",Gata:"address",Postnummer:"zipcode",Postort:"post",Region:"region_name",Kommun:"commune_name",Land:"country_name",Telefon:"phone","E-post":"email",Period:"period_name",Betalat:"paying",LADOK:"ladok","Ålder":"age",Registreringsdatum:"rdt"}}},props:{client_id:{type:Number,default:null},isNew:{type:Boolean,default:!1},regions:{type:Array,default:[]},countries:{type:Array,default:[]},genders:{type:Array,default:[]},constreq:{type:Array,required:!0}},watch:{client_id:function(t,e){console.log("change: ",t),t&&(this.loadClient(t),console.log("client id load: "+t))},attrName:function(t,e){var r=this,s=this.attrNames.find((function(e){return e.value===t}));void 0!==s&&(this.attrVals=[],s.props.filter((function(t,e){r.attrVals.push({value:e,text:t.name,id:t.prop_id})})),this.attrVal=0)},showAttrForm:function(t,e){t&&(this.attrIndex=null)},"form.in_personnr":function(t,e){var r=Object(y["a"])(t);console.log(r),this.validSSN=this.constreq.includes("MEMBER_REQ_SSN")?r.valid:r.success,this.form.birthyear=r.year,this.form.birthmonth=r.month,this.form.birthday=r.day,this.form.ssn_last_4=r.valid?r.last:""},"form.email":function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r=e.test(String(this.form.email).toLowerCase()),this.invalidEmail=!1,this.validEmail=r;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),"form.phone":function(t,e){this.validTel=this.validate_phone(t)},"form.address":function(t,e){this.validAddress=this.is_set(t)},"form.zipcode":function(t,e){this.validZip=this.is_set(t)},"form.post":function(t,e){this.validPost=this.is_set(t)},"form.firstname":function(t,e){this.validFn=this.is_set(t)},"form.lastname":function(t,e){this.validLn=this.is_set(t)}},computed:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["currentCompanyId","companies","periods","company"])),{},{currentPeriod:function(){var t=this.$store.getters["currentPeriodId"],e=this.$store.getters["periods"];return e.filter((function(e){return e.id===t}))[0]},disabledSaveParent:function(){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e=t.test(String(this.parent.em).toLowerCase()),r=this.is_set(this.parent.ln),s=this.is_set(this.parent.fn),a=this.is_set(this.parent.ph)&&!!Number(this.parent.ph);return e&&r&&s&&a},isValid:function(){var t=!this.constreq.includes("MEMBER_REQ_SSN")&&!this.constreq.includes("MEMBER_REQ_PERSONNR")||this.validSSN,e=!this.constreq.includes("MEMBER_REQ_FULLNAME")||this.validFn&&this.validLn,r=!this.constreq.includes("MEMBER_REQ_EMAILPHONE")||(this.validTel||this.validEmail),s=!this.constreq.includes("MEMBER_REQ_EMAIL")||this.validEmail,a=!this.constreq.includes("MEMBER_REQ_PHONE")||this.validTel,n=!this.constreq.includes("MEMBER_REQ_ADDRESS")||this.validAddress&&this.validPost&&this.validZip;return!(n&&e&&s&&a&&r&&t)}}),mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadAttributes();case 2:if(e.t0=t.client_id,!e.t0){e.next=6;break}return e.next=6,t.loadClient(t.client_id);case 6:case"end":return e.stop()}}),e)})))()},methods:{onClose:function(){this.$emit("onClose")},loadAttributes:function(){var t=this;l.a.get("/property_group/extlist?company_id=".concat(this.currentCompanyId)).then((function(e){return 200===e.status&&(e.data.groups.filter((function(e,r){t.attrNames.push({value:r,text:e.name,id:e.group_id,props:e.props})})),t.attrName=0),e.status})).catch((function(t){return console.log(t)}))},showSPAR:function(){this.$refs["sparModal"].show()},loadClient:function(t){var e=this;this.resetForm(),l.a.get("/client?client_id=".concat(t)).then((function(r){200===r.status?(e.$store.dispatch(u["b"],t),e.form=r.data.client,e.originalEmail=r.data.client.email,e.parentItems=r.data.client.parents,e.spurl="https://".concat(window.location.hostname,"/spurl/").concat(e.form.spurl),null===e.form.rdt||void 0===e.form.rdt?e.form.rdt="":e.form.rdt=e.form.rdt,e.decodeProperties(r.data.client.properties),e.onRegionChange(r.data.client.region_code)):e.toastr("danger","Serverfel","Kunde inte hämta medlemsdata")})).catch((function(t){console.error(t),e.toastr("danger","Serverfel","Kunde inte hämta medlemsdata")}))},onRegionChange:function(t){console.log("REGION )( CHANGED",t),null===t||""===t||void 0===t?(this.form.region_code="",this.form.commune_code=""):(this.communes=this.regions.find((function(e){return e.value===t})).communes,this.form.region=t)},maskDate:function(t){console.log(t.toString());var e=t.toString().substring(0,4),r=t.toString().substring(4,6),s=t.toString().substring(6);return"".concat(e,"-").concat(r,"-").concat(s)},toastr:function(t,e,r){this.$bvToast.toast(r,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})},onSubmit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.form.properties=t.encodeProperties(),t.form.company_id=t.$store.getters.currentCompanyId,t.form.period_id=t.$store.getters.currentPeriodId,t.form.parents_data=t.parentItems,""!==t.password&&t.password.length>6&&(t.form.password=t.password),r=t.$loading.show(),!t.isPut){e.next=12;break}return e.next=9,l.a.put("/client/".concat(t.client_id),t.form);case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,l.a.post("/client",t.form);case 14:e.t0=e.sent;case 15:if(s=e.t0,200!==s.status){e.next=25;break}return t.isPut?t.toastr("success","OK","Medlemmen har uppdaterats"):t.toastr("success","OK","Medlemmen har skapats"),t.isPut=!0,t.form=s.data.client,t.form.client_id=parseInt(t.form.client_id),e.next=23,t.$store.dispatch(u["b"],parseInt(s.data.client.client_id));case 23:e.next=26;break;case 25:t.toastr("danger","Serverfel","Det gick inte att skapa medlem.");case 26:r&&r.hide();case 27:case"end":return e.stop()}}),e)})))()},showConfirm:function(t){switch(t){case 1:this.$refs["renewal"].show();break;case 2:this.$refs["resetPass"].show();break;case 3:this.$refs["deleteMember"].show();break}},onRenewal:function(){var t=this,e={client_id:this.client_id};l.a.post("/client/sendrenew",e).then((function(e){t.toastr("success","förnyelse","Förnyelse-länken har skickats via e-post.")})).catch((function(e){console.error(e),t.toastr("danger","Serverfel","kunde inte maila")}))},onResetPass:function(){var t=this,e={client_id:this.client_id,email:this.form.email};l.a.post("/client/forget",e).then((function(e){t.toastr("success","förnyelse","Förnyelse-länken har skickats via e-post.")})).catch((function(e){console.error(e),t.toastr("danger","Serverfel","kunde inte maila")}))},onSaveParent:function(){this.parent.pn="",this.is_set(this.parentIndex)?this.parentItems[this.parentIndex]=this.parent:this.parentItems.push(this.parent),console.log("Parent",this.parentItems),this.showParentForm=!1,this.parent={}},createParent:function(){this.parentIndex="",this.showParentForm=!this.showParentForm},editParent:function(t){this.showParentForm=!this.showParentForm,this.showParentForm&&(this.parentIndex=t,this.parent=this.parentItems[t])},deleteParent:function(t){this.parentItems.splice(t,1)},onSaveAttr:function(){if(""===this.attrName||""===this.attrVal)return!1;var t=this.attrNames[this.attrName],e=this.attrVals[this.attrVal],r=this.attrItems.find((function(r){return r.group_id===t.id&&r.prop_id===e.id})),s={attrName:t.text,value:e.text,group_id:t.id,prop_id:e.id};null!==this.attrIndex?this.attrItems.splice(this.attrIndex,1,s):void 0===r&&this.attrItems.push(s),this.attrIndex=null,this.showAttrForm=!1},editAttr:function(t){this.attrIndex=t,this.showAttrForm=!0;var e=this.attrItems[t],r=this.attrNames.find((function(t){return t.id===e.group_id}));void 0!==r&&(this.attrName=r.value);var s=this.attrVals.find((function(t){return t.id===e.prop_id}));void 0!==s&&(this.attrVal=s.value)},deleteAttr:function(t){this.attrItems.splice(t,1)},encodeProperties:function(){var t=[],e=this.attrItems.reduce((function(t,e){var r=String(e.group_id);return t[r]||(t[r]={},t[r].prop_ids=[],t[r].group_id=""),t[r].group_id=r,t[r].prop_ids.push(String(e.prop_id)),t}),{});for(var r in e)t.push(e[r]);return t},decodeProperties:function(t){var e=this;this.attrItems=[],t.filter((function(t){t.values.filter((function(r){var s={attrName:t.name,value:r.name,group_id:t.id,prop_id:r.id};e.attrItems.push(s)}))}))},login:function(){var t=this.$router.resolve({path:"/profile/".concat(this.client_id,"/").concat(this.form.login_token)});window.open(t.href,"_blank")},onExport:function(){var t=this;l.a.get("/client/xlsx?client_id=".concat(this.client_id)).then((function(e){var r=e.data.filepath.replace(/^.*[\\\/]/,"");t.downloadWithAxios(e.data.filepath,r),t.toastr("success","OK","Exporten lyckades")})).catch((function(t){return console.log(t)}))},forceFileDownload:function(t,e){console.log(e);var r=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=r,s.setAttribute("download",e),document.body.appendChild(s),s.click()},downloadWithAxios:function(t,e){var r=this;l()({method:"get",url:t,responseType:"arraybuffer"}).then((function(t){r.forceFileDownload(t,e)})).catch((function(){return console.log("error occured")}))},resetForm:function(){this.form={number:"",firstname:"",lastname:"",security_number:"",mobile:"",email:"",sex:"M",country:"",commune_code:"",region_code:"",rdt:"",login_token:"",co:"",birthyear:"",birthmonth:"",birthday:"",ssn_last_4:""}},validate_phone:function(t){if((t+"").length<6)return!1;var e=/^\+?\d*$/;return e.test(String(t).toLowerCase())},is_set:function(t){return null!==t&&void 0!==t&&""!==t&&" "!==t}}},_=w,k=(r("df3e"),Object(b["a"])(_,s,a,!1,null,"2397863d",null));e["a"]=k.exports},"96c3":function(t,e,r){},"971c":function(t,e,r){"use strict";r("adad")},9861:function(t,e,r){"use strict";r("e260");var s=r("23e7"),a=r("d066"),n=r("0d3b"),o=r("6eeb"),i=r("e2cc"),l=r("d44e"),c=r("9ed3"),u=r("69f3"),m=r("19aa"),d=r("5135"),f=r("0366"),h=r("f5df"),p=r("825a"),b=r("861d"),v=r("7c73"),g=r("5c6c"),y=r("9a1f"),w=r("35a1"),_=r("b622"),k=a("fetch"),x=a("Headers"),S=_("iterator"),E="URLSearchParams",C=E+"Iterator",R=u.set,P=u.getterFor(E),A=u.getterFor(C),M=/\+/g,L=Array(4),F=function(t){return L[t-1]||(L[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},$=function(t){try{return decodeURIComponent(t)}catch(e){return t}},N=function(t){var e=t.replace(M," "),r=4;try{return decodeURIComponent(e)}catch(s){while(r)e=e.replace(F(r--),$);return e}},I=/[!'()~]|%20/g,q={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},O=function(t){return q[t]},U=function(t){return encodeURIComponent(t).replace(I,O)},B=function(t,e){if(e){var r,s,a=e.split("&"),n=0;while(n<a.length)r=a[n++],r.length&&(s=r.split("="),t.push({key:N(s.shift()),value:N(s.join("="))}))}},j=function(t){this.entries.length=0,B(this.entries,t)},T=function(t,e){if(t<e)throw TypeError("Not enough arguments")},D=c((function(t,e){R(this,{type:C,iterator:y(P(t).entries),kind:e})}),"Iterator",(function(){var t=A(this),e=t.kind,r=t.iterator.next(),s=r.value;return r.done||(r.value="keys"===e?s.key:"values"===e?s.value:[s.key,s.value]),r})),z=function(){m(this,z,E);var t,e,r,s,a,n,o,i,l,c=arguments.length>0?arguments[0]:void 0,u=this,f=[];if(R(u,{type:E,entries:f,updateURL:function(){},updateSearchParams:j}),void 0!==c)if(b(c))if(t=w(c),"function"===typeof t){e=t.call(c),r=e.next;while(!(s=r.call(e)).done){if(a=y(p(s.value)),n=a.next,(o=n.call(a)).done||(i=n.call(a)).done||!n.call(a).done)throw TypeError("Expected sequence with length 2");f.push({key:o.value+"",value:i.value+""})}}else for(l in c)d(c,l)&&f.push({key:l,value:c[l]+""});else B(f,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},V=z.prototype;i(V,{append:function(t,e){T(arguments.length,2);var r=P(this);r.entries.push({key:t+"",value:e+""}),r.updateURL()},delete:function(t){T(arguments.length,1);var e=P(this),r=e.entries,s=t+"",a=0;while(a<r.length)r[a].key===s?r.splice(a,1):a++;e.updateURL()},get:function(t){T(arguments.length,1);for(var e=P(this).entries,r=t+"",s=0;s<e.length;s++)if(e[s].key===r)return e[s].value;return null},getAll:function(t){T(arguments.length,1);for(var e=P(this).entries,r=t+"",s=[],a=0;a<e.length;a++)e[a].key===r&&s.push(e[a].value);return s},has:function(t){T(arguments.length,1);var e=P(this).entries,r=t+"",s=0;while(s<e.length)if(e[s++].key===r)return!0;return!1},set:function(t,e){T(arguments.length,1);for(var r,s=P(this),a=s.entries,n=!1,o=t+"",i=e+"",l=0;l<a.length;l++)r=a[l],r.key===o&&(n?a.splice(l--,1):(n=!0,r.value=i));n||a.push({key:o,value:i}),s.updateURL()},sort:function(){var t,e,r,s=P(this),a=s.entries,n=a.slice();for(a.length=0,r=0;r<n.length;r++){for(t=n[r],e=0;e<r;e++)if(a[e].key>t.key){a.splice(e,0,t);break}e===r&&a.push(t)}s.updateURL()},forEach:function(t){var e,r=P(this).entries,s=f(t,arguments.length>1?arguments[1]:void 0,3),a=0;while(a<r.length)e=r[a++],s(e.value,e.key,this)},keys:function(){return new D(this,"keys")},values:function(){return new D(this,"values")},entries:function(){return new D(this,"entries")}},{enumerable:!0}),o(V,S,V.entries),o(V,"toString",(function(){var t,e=P(this).entries,r=[],s=0;while(s<e.length)t=e[s++],r.push(U(t.key)+"="+U(t.value));return r.join("&")}),{enumerable:!0}),l(z,E),s({global:!0,forced:!n},{URLSearchParams:z}),n||"function"!=typeof k||"function"!=typeof x||s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,r,s,a=[t];return arguments.length>1&&(e=arguments[1],b(e)&&(r=e.body,h(r)===E&&(s=e.headers?new x(e.headers):new x,s.has("content-type")||s.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=v(e,{body:g(0,String(r)),headers:g(0,s)}))),a.push(e)),k.apply(this,a)}}),t.exports={URLSearchParams:z,getState:P}},"9a1f":function(t,e,r){var s=r("825a"),a=r("35a1");t.exports=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return s(e.call(t))}},adad:function(t,e,r){},c53f:function(t,e,r){"use strict";r("63fd")},c789:function(t,e,r){"use strict";r("d3b7"),r("ac1f"),r("25f0"),r("466d");var s=r("d4ec"),a=function t(){Object(s["a"])(this,t),this.success=!1,this.valid=!1,this.sex="U",this.year="0000",this.month="00",this.day="00",this.last="0000",this.formatted="00000000-0000"},n=function(t){return o(t)};function o(t){if(void 0===t||null===t||t.length<5){var e=new a;return e.valid=!1,e.success=!1,e}var r=l(t),s=(new Date).getFullYear().toString(10),n=new a;if(!r.success)return n;if(r.year>s||r.year<"1900")return n;var o=Date.parse(r.year+"-"+r.month+"-"+r.day);if(isNaN(o))return n;var c=!1;c="T"===r.last.substr(0,1)||i(r.year+r.month+r.day+r.last),"0000"===r.last&&(c=!1);var u="U";return c&&(u=-1!=="0,2,4,6,8".indexOf(r.last.substr(2,1))?"F":"M"),n.day=r.day,n.formatted=r.year+r.month+r.day+"-"+r.last,n.month=r.month,n.success=!0,n.valid=c,n.last=r.last,n.sex=u,n.year=r.year,n}function i(t){var e,r=t.match(/^(\d)(\d)(\d)(\d)(\d)(\d)(\d)(\d)(\d)(\d)(\d)(\d)$/),s=0;if(null===r)return!1;for(var a=3;a<=12;a++)e=parseInt(r[a]),s+=a%2===0?e:2*e%9+9*Math.floor(e/9);return s%10===0}function l(t){if(null===t||t.length<5)return{success:!1,year:"",month:"",day:"",last:""};for(var e="",r=0;r<t.length;++r){var s=t.substr(r,1);-1!=="0123456789".indexOf(s)&&(e+=s)}var a=(new Date).getFullYear()+"",n=a.substr(2,2);if(e.length==="198507091414".length)return{success:!0,year:e.substr(0,4),month:e.substr(4,2),day:e.substr(6,2),last:e.substr(8,4)};if(e.length==="19850709".length)return{success:!0,year:e.substr(0,4),month:e.substr(4,2),day:e.substr(6,2),last:"0000"};if(e.length==="8507091414".length){var o=e.substr(0,2);return o>=n?{success:!0,year:"19"+o,month:e.substr(2,2),day:e.substr(4,2),last:e.substr(6,4)}:{success:!0,year:"20"+o,month:e.substr(2,2),day:e.substr(4,2),last:e.substr(6,4)}}if(e.length==="850709".length){var i=e.substr(0,2);return i>=n?{success:!0,year:"19"+i,month:e.substr(2,2),day:e.substr(4,2),last:"0000"}:{success:!0,year:"20"+i,month:e.substr(2,2),day:e.substr(4,2),last:"0000"}}if(parseInt(e.substr(2,2),10)>12){if(12===e.length)return{success:!0,year:e.substr(0,4),month:e.substr(4,2),day:e.substr(6,2),last:e.substr(8,4)};if(e.length>=8)return{success:!0,year:e.substr(0,4),month:e.substr(4,2),day:e.substr(6,2),last:"0000"}}if("19"===e.substr(0,2))if(parseInt(e.substr(2,2),10)>12){if(12===e.length)return{success:!0,year:e.substr(0,4),month:e.substr(4,2),day:e.substr(6,2),last:e.substr(8,4)};if(e.length>=8)return{success:!0,year:e.substr(0,4),month:e.substr(4,2),day:e.substr(6,2),last:"0000"};if(e.length<8)return{success:!0,year:"20"+e.substr(0,2),month:e.substr(2,2),day:e.substr(4,2),last:"0000"}}else{if(10===e.length)return{success:!0,year:"20"+e.substr(0,2),month:e.substr(2,2),day:e.substr(4,2),last:e.substr(6,4)};if(8===e.length)return{success:!0,year:"20"+e.substr(0,2),month:e.substr(2,2),day:e.substr(4,2),last:"0000"};if(e.length<8)return{success:!0,year:"20"+e.substr(0,2),month:e.substr(2,2),day:e.substr(4,2),last:"0000"}}else if(e.substr(0,2)>"20"){if(10===e.length)return{success:!0,year:"19"+e.substr(0,2),month:e.substr(2,2),day:e.substr(4,2),last:e.substr(6,4)};if(e.length>=6)return{success:!0,year:"19"+e.substr(0,2),month:e.substr(2,2),day:e.substr(4,2),last:"0000"}}else if(e.substr(0,2)<=n){if(10===e.length)return{success:!0,year:"20"+e.substr(0,2),month:e.substr(2,2),day:e.substr(4,2),last:e.substr(6,4)};if(e.length>=6)return{success:!0,year:"20"+e.substr(0,2),month:e.substr(2,2),day:e.substr(4,2),last:"0000"}}else if("20"===e.substr(0,2)){if(12===e.length)return{success:!0,year:e.substr(0,4),month:e.substr(4,2),day:e.substr(6,2),last:e.substr(8,4)};if(e.length>=8)return{success:!0,year:e.substr(0,4),month:e.substr(4,2),day:e.substr(6,2),last:"0000"}}return{success:!1,year:"",month:"",day:"",last:""}}e["a"]=n},df3e:function(t,e,r){"use strict";r("96c3")},f55d:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"px-5",attrs:{id:"page-advanced-search"}},[r("h5",{staticClass:"mb-6 ml-2"},[t._v("Snabbsök")]),r("b-card",{attrs:{"no-body":""}},[r("div",{staticClass:"create-member"},[r("b-button",{staticClass:"mr-2",attrs:{variant:"success"},on:{click:t.createMember}},[t._v("Skapa ny medlem")]),r("span",{},[t._v("Snabbsök efter medlem i alla föreningar och perioder")])],1)]),t.showNew?r("create-member",{staticClass:"mt-4",attrs:{regions:t.regions,countries:t.countries,genders:t.genders,isNew:null===t.client_id,client_id:t.client_id,constreq:t.constreq},on:{onClose:t.createMember,onDelete:t.deleteMember}}):t._e(),r("b-row",{staticClass:"justify-content-center"},[r("b-col",{staticClass:"align-self-center col-12"},[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.submitSearch(e)}}},[r("b-card",{staticClass:"mb-12 mt-12",attrs:{title:"","hide-footer":""}},[r("b-input-group",[r("b-form-input",{attrs:{placeholder:"Förnamn, Efternamn, E-post, Personnummer, Telefonnummer..."},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),r("b-input-group-append",[r("b-button",{attrs:{variant:"outline-success",type:"submit",disabled:t.disablebutton}},[t._v("Sök")])],1)],1)],1)],1)],1)],1),r("b-row",[r("b-col",{staticClass:"col-12"},[r("b-card",{scopedSlots:t._u([{key:"header",fn:function(){return[r("div",{staticClass:"d-flex justify-content-between align-items-center"},[r("h5"),r("b-dropdown",{attrs:{text:"Exportera",variant:"outline-success"}},[r("b-dropdown-item",[r("fa-icon",{staticClass:"mr-2",attrs:{icon:["fas","file-excel"],size:"lg"}}),t._v("Excel")],1),r("b-dropdown-item",[r("fa-icon",{staticClass:"mr-2",attrs:{icon:["fas","file-csv"],size:"lg"}}),t._v("CSV")],1)],1)],1)]},proxy:!0}])},[r("div",{staticClass:"p-6"},[r("search-result",{staticClass:"search-results",attrs:{clients:t.clients},on:{clientSelected:t.clientSelected}})],1)])],1)],1)],1)},a=[],n=(r("99af"),r("4de4"),r("d81d"),r("b0c0"),r("4fad"),r("b64b"),r("3835")),o=(r("96cf"),r("1da1")),i=r("5530"),l=r("bc3a"),c=r.n(l),u=r("7f08"),m=r("676f"),d=r("2f62"),f=r("c1df"),h=r.n(f),p={name:"quickSearch",components:{createMember:u["a"],searchResult:m["a"]},computed:Object(i["a"])({},Object(d["b"])(["currentCompanyId","currentPeriodId","periods"])),data:function(){return{client_id:null,text:"",showNew:!1,disablebutton:!1,regions:[],countries:[],genders:[],payments:[],ladoks:[],lgenders:{M:"Man",F:"Kvinna",O:"Annat",U:"Okänt"},lpayments:{Y:"Betalat",N:"Ej Betalat"},lladoks:{OK:"Aktiv Student",NO:"Ej Student",S:"Väntar",N:"Saknas"},clients:[],constreq:[]}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,s,a,o,i,l,u,m,d,f,h,p,b,v,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(s in r=t.$loading.show(),t.lgenders)t.genders.push({value:s,text:t.lgenders[s]});for(s in t.lpayments)t.payments.push({value:s,text:t.lpayments[s]});for(s in t.lladoks)t.ladoks.push({value:s,text:t.lladoks[s]});return t.client_id=parseInt(t.$route.params.id),null===t.client_id||void 0===t.client_id||isNaN(t.client_id)?t.showNew=!1:t.showNew=!0,e.next=8,c.a.get("/location/regions");case 8:if(a=e.sent,200===a.status)for(o=0,i=Object.entries(a.data.regions);o<i.length;o++){for(l=Object(n["a"])(i[o],2),l[0],u=l[1],m=[],d=0,f=Object.entries(u.communes);d<f.length;d++)h=Object(n["a"])(f[d],2),p=h[0],b=h[1],m.push({value:p,text:b.commune});t.regions.push({text:u.region,value:u.region_code,communes:m})}return e.next=12,c.a.get("/location/countries");case 12:return v=e.sent,200===v.status&&(t.countries=v.data.countries),e.next=16,c.a.get("/company?company_id=".concat(t.currentCompanyId));case 16:g=e.sent,200===g.status&&(t.constreq=g.data.company.constreq),r.hide();case 19:case"end":return e.stop()}}),e)})))()},watch:{},methods:{submitSearch:function(t){t.preventDefault(),this.concatSearch(this.text)},clientSelected:function(t){this.client_id=t.client_id,this.showNew=!0,this.scrollToClassName("form-create-member")},concatSearch:function(t){var e=this,r=this.$loading.show();t+="",t=t.toUpperCase(),this.disablebutton=!0,c.a.get("/client/concat_search?company_id=".concat(this.currentCompanyId,"&period_id=").concat(this.currentPeriodId,"&str=").concat(t)).then((function(t){e.disablebutton=!1;var s=t.data.clients;e.clients=s.map((function(e){return e.period=Object.keys(t.data.periods).length>0&&t.data.periods[e.period_id]?t.data.periods[e.period_id].name:"",e.company=e.current_company_id?t.data.companies[e.current_company_id]:t.data.companies[e.company_id],e.rdt=h()(e.rdt).format("YYYY-MM-DD"),e})),e.scrollToClassName("search-results"),r.hide()})).catch((function(t){e.disablebutton=!1,r.hide(),console.error(t),e.toastr("danger","Server Fel","Kunde inte söka efter medlem")}))},scrollToClassName:function(t){var e=this;setTimeout((function(){var r=e.$el.getElementsByClassName(t)[0];if(r){var s=-70,a=r.getBoundingClientRect().top+window.pageYOffset+s;window.scrollTo({top:a,behavior:"smooth"})}}),100)},toastr:function(t,e,r){this.$bvToast.toast(r,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})},createMember:function(){this.showNew=!this.showNew,this.client_id=null},deleteMember:function(){var t=this;c.a.delete("/client?client_id=".concat(this.client_id)).then((function(e){200===e.status?(t.toastr("success","Radera","Medlem suppgifterna har raderats."),t.clients=t.clients.filter((function(e){return t.client_id!==e.client_id})),t.createMember(),t.scrollToClassName("search-result-scrollto")):t.toastr("danger","Serverfel","Det gick inte att radera medlem.")})).catch((function(e){console.log(e),t.toastr("danger","Serverfel","Det gick inte att radera medlem.")}))}}},b=p,v=(r("971c"),r("2877")),g=Object(v["a"])(b,s,a,!1,null,"1d2fe99a",null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2532bbf5.8706d8a2.js.map