(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-338e244a"],{"1d98":function(t,e,n){"use strict";n("62f7")},"5cb4":function(t,e,n){},"62f7":function(t,e,n){},"79ef":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-5",attrs:{id:"page-lang_records"}},[n("h5",{staticClass:"mb-6 ml-2"},[t._v("Språk och översättningar")]),n("LanguageTable",{attrs:{items:t.lang_records},on:{createLangRecordClicked:t.createLangRecordClicked,selectLangRecordClicked:t.selectLangRecord,deleteLangRecordClicked:t.deleteLangRecord,toastr:t.toastr}}),n("div",{staticClass:"scroll-to-container"}),t.creating||t.editing?n("b-card",{ref:"edit-lang_record",staticClass:"mb-2 edit-lang_record-container",attrs:{title:"",id:"edit-lang_record","hide-footer":""}},[n("div",[n("b-form",{staticClass:"mt-8",on:{submit:function(e){return e.preventDefault(),t.saveLangRecord(e)}}},[n("b-form-group",{attrs:{id:"input-group-lang_record_id",label:"ID","label-for":"input-lang_record_id"}},[n("b-form-input",{attrs:{id:"input-lang_record_id",type:"text",required:""},model:{value:t.form.lang_record_id,callback:function(e){t.$set(t.form,"lang_record_id",e)},expression:"form.lang_record_id"}})],1),n("b-form-group",{attrs:{id:"input-group-sv_text",label:"Svenska","label-for":"input-sv_text"}},[n("b-form-input",{attrs:{id:"input-sv_text",type:"text"},model:{value:t.form.lang_text[0].text,callback:function(e){t.$set(t.form.lang_text[0],"text",e)},expression:"form.lang_text[0].text"}})],1),n("b-form-group",{attrs:{id:"input-group-en_text",label:"Engelska","label-for":"input-en_text"}},[n("b-form-input",{attrs:{id:"input-en_text",type:"text"},model:{value:t.form.lang_text[1].text,callback:function(e){t.$set(t.form.lang_text[1],"text",e)},expression:"form.lang_text[1].text"}})],1),n("b-button",{attrs:{variant:"primary",type:"submit"}},[t._v("Spara")])],1)],1)]):t._e()],1)},a=[],s=(n("4de4"),n("96cf"),n("1da1")),i=n("5530"),c=n("bc3a"),o=n.n(c),l=n("2f62"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card-custom card-stretch gutter-b"},[n("div",{staticClass:"card-header border-0 py-5"},[n("h3",{staticClass:"card-title align-items-start flex-column"}),n("div",{staticClass:"card-toolbar"},[n("a",{staticClass:"btn btn-primary font-weight-bolder font-size-sm",attrs:{href:"#"},on:{click:t.createLangRecordClicked}},[n("i",{staticClass:"menu-icon flaticon2-plus",staticStyle:{"font-size":"1.0em"}}),t._v("Ny Översättning")])])]),n("div",{staticClass:"card-body pt-0 pb-3"},[n("div",{staticClass:"d-md-flex justify-content-between align-items-center mb-4"},[n("div",{staticClass:"w-100 mr-md-10 mb-md-0 mb-4"},[n("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Sök översättning"},model:{value:t.filters,callback:function(e){t.filters=e},expression:"filters"}})],1),n("div",{staticClass:"d-sm-flex justify-content-end align-items-center"},[n("v-select",{staticClass:"mr-sm-2 my-2 mx-0",staticStyle:{width:"200px"},attrs:{options:[25,50,100],clearable:!1,searchable:!1},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),n("b-pagination",{staticClass:"ml-auto mb-0",attrs:{"total-rows":t.items.length,"per-page":t.perPage,"aria-controls":"search-result-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),n("b-table",{staticClass:"mt-3 cursor mh-100",attrs:{id:"search-result-table",filter:t.filters,items:t.items,fields:t.headers,"per-page":t.perPage,"current-page":t.currentPage,"head-variant":"light","sticky-header":""},scopedSlots:t._u([{key:"cell(lang_record_id)",fn:function(e){return[n("div",{staticClass:"d-none d-sm-block",attrs:{title:e.item.lang_record_id}},[t._v(" "+t._s(e.item.lang_record_id)+" ")]),n("div",{staticClass:"d-block d-sm-none",attrs:{title:e.item.lang_record_id}},[t._v(" "+t._s(t.maxLengthOfCell(e.item.lang_record_id,10))+" ")])]}},{key:"cell(actions)",fn:function(e){return[n("div",{staticClass:"d-flex justify-content-end"},[n("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.selectLangRecordClicked(e.item.lang_record_id)}}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Write.svg"}})],1)]),n("a",{staticClass:"btn btn-icon btn-light btn-sm",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.deleteCompanyClicked(e.item.lang_record_id)}}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Trash.svg"}})],1)])])]}}])})],1)])},g=[],u=n("4a7a"),f=n.n(u),m=(n("6dfc"),{name:"lang_records-table",props:["items","currentCompanyId"],components:{vSelect:f.a},methods:{createLangRecordClicked:function(){this.$emit("createLangRecordClicked")},selectLangRecordClicked:function(t){this.$emit("selectLangRecordClicked",t)},deleteLangRecordClicked:function(t){this.$emit("deleteLangRecordClicked",t)},maxLengthOfCell:function(t,e){return t.length>e?t.substring(0,e)+"...":t},toastr:function(t,e,n){this.$emit("toastr",t,e,n)}},data:function(){return{headers:[{key:"lang_record_id",label:"Översättning",show:!0,sortable:!0,thClass:"pl-7 w-100",tdClass:"pl-7"},{key:"actions",label:"",show:!0,sortable:!1}],filters:"",perPage:20,currentPage:1,list:[]}}}),p=m,b=(n("1d98"),n("2877")),v=n("6544"),_=n.n(v),h=n("b974"),C=Object(b["a"])(p,d,g,!1,null,"2aba1d62",null),x=C.exports;_()(C,{VSelect:h["a"]});var k={name:"lang_records",components:{LanguageTable:x},computed:Object(i["a"])({},Object(l["b"])(["currentCompanyId"])),mounted:function(){this.loadLangRecords()},data:function(){return{form:{lang_record_id:"NEW_RECORD",lang_text:[{lang:"sv",text:""},{lang:"en",text:""}]},creating:!1,editing:!1,lang_records:[],lang_record:""}},watch:{currentCompanyId:function(t,e){t&&this.loadLangRecords()}},methods:{loadData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.currentCompanyId){e.next=2;break}return e.abrupt("return");case 2:t.loadLangRecords();case 3:case"end":return e.stop()}}),e)})))()},createLangRecordClicked:function(){this.creating=!0,this.editing=!0,this.scrollToEditLangRecord()},createLangRecord:function(){var t=this;"NEW_RECORD"===this.form.lang_record_id||this.form.lang_record_id.length<8?this.toastr("danger","Fel","Felaktigt ID"):o.a.post("/lang",this.form).then((function(e){201===e.status&&(t.creating=!1,t.form=e.data.lang_record,t.toastr("success","OK","Översättning skapades"),t.loadLangRecords())})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte skapa översättning")}))},deleteLangRecord:function(t){var e=this;o.a.delete("/lang?lang_record_id=".concat(t)).then((function(n){e.lang_records=e.lang_records.filter((function(e){return e.lang_record_id!==t})),e.creating=!1,e.editing=!1,e.toastr("success","OK","Översättningen togs bort")})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte ta bort översättningen")}))},selectLangRecord:function(t){var e=this;o.a.get("/lang?lang_record_id=".concat(encodeURIComponent(t))).then((function(t){e.form=t.data.lang_record,e.creating=!1,e.editing=!0,e.form.lang_text.length<2&&(e.form.lang_text=[{lang:"sv",text:""},{lang:"en",text:""}]),e.scrollToEditLangRecord()})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte hämta översättningen")}))},saveLangRecord:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.creating){e.next=3;break}return t.createLangRecord(),e.abrupt("return");case 3:o.a.put("/lang",t.form).then((function(e){204===e.status&&(t.creating=!1,t.form=e.data.lang_record,t.toastr("success","OK","Översättning uppdaterad"),t.loadLangRecords())})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte uppdatera översättning")}));case 4:case"end":return e.stop()}}),e)})))()},getLangText:function(t,e){for(var n=0;n<t.length;++n)if(t[n].lang===e)return t[n].text;return"Språköversättning saknas"},loadLangRecords:function(){var t=this;this.lang_records=[],o.a.get("/lang/list").then((function(e){200===e.status&&(t.lang_records=e.data.lang_records)})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte lista översättningar")}))},scrollToEditLangRecord:function(){var t=this;setTimeout((function(){var e=t.$el.getElementsByClassName("scroll-to-container")[0];if(e){var n=-70,r=e.getBoundingClientRect().top+window.pageYOffset+n;window.scrollTo({top:r,behavior:"smooth"})}}),100)},toastr:function(t,e,n){this.$bvToast.toast(n,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})}}},R=k,L=(n("f8c2"),Object(b["a"])(R,r,a,!1,null,"0d6fcb52",null));e["default"]=L.exports},f8c2:function(t,e,n){"use strict";n("5cb4")}}]);
//# sourceMappingURL=chunk-338e244a.c40d4832.js.map