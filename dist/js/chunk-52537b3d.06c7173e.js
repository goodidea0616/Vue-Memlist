(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52537b3d"],{"010c":function(t,e,s){"use strict";s("5856")},"0ef7":function(t,e,s){"use strict";s("ac80")},3700:function(t,e,s){},5856:function(t,e,s){},"6f0b":function(t,e,s){},"71f6":function(t,e,s){},"82a1":function(t,e,s){"use strict";s("71f6")},a006:function(t,e,s){},ac80:function(t,e,s){},b458:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"px-5",attrs:{id:"page-billing"}},[s("h5",{staticClass:"mb-6 ml-2"},[t._v("Kostnader")]),t.billing_active?t._e():s("b-card",{staticClass:"mb-2",attrs:{title:"",hide:"footer"}},[s("b-alert",{attrs:{show:"",variant:"warning"}},[t._v("Fakturering och kostnader är inte aktiverat för denna förening.")]),s("b-button",{attrs:{variant:"success"},on:{click:t.activateBilling}},[t._v("Aktivera Fakturering")])],1),t.billing_active?s("b-card",{staticClass:"mb-2",attrs:{title:"","hide-footer":""}},[s("v-tabs",{attrs:{"background-color":"white",color:"accent-4",right:""}},[s("v-tab",[t._v("Finansiell information")]),s("v-tab",[t._v("SPAR")]),s("v-tab",[t._v("SMS")]),s("v-tab",[t._v("E-post")]),s("v-tab",[t._v("Budget")]),s("v-tab",[t._v("Prisinställning för underföreningar")]),s("v-tab",[t._v("Historik")]),t.isTalongAdmin?s("v-tab",[t._v("Administration")]):t._e(),s("v-tab-item",[s("BillingInvoiceTable",{attrs:{billing:t.billing},on:{toastr:t.toastr}})],1),s("v-tab-item",[s("BillingSPARTable",{attrs:{billing:t.billing.spar_pricing}})],1),s("v-tab-item",[s("BillingSMSTable",{attrs:{billing:t.billing}})],1),s("v-tab-item",[s("BillingEmailTable",{attrs:{billing:t.billing.email_pricing}})],1),s("v-tab-item",[s("form",[s("b-alert",{staticClass:"mt-8",attrs:{show:""}},[t._v("Ställ in budgeten för SMS och SPAR. Ifall det inte finns någon budget kommer inte SMS eller SPAR att användas.")]),s("b-form-group",{attrs:{id:"sms_budget-group",label:"SMS Budget","label-for":"sms_budget"}},[s("b-form-input",{attrs:{id:"sms_budget"},model:{value:t.form.sms_budget,callback:function(e){t.$set(t.form,"sms_budget",e)},expression:"form.sms_budget"}})],1),s("b-form-group",{attrs:{id:"spar_budget-group",label:"SPAR Budget","label-for":"spar_budget"}},[s("b-form-input",{attrs:{id:"spar_budget"},model:{value:t.form.spar_budget,callback:function(e){t.$set(t.form,"spar_budget",e)},expression:"form.spar_budget"}})],1),s("div",{staticClass:"d-flex justify-content-end"},[s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:t.savePrice}},[t._v("Spara")])],1)],1)]),s("v-tab-item",[s("BillingSubcompanyTable",{attrs:{billing:t.billing}})],1),s("v-tab-item",[s("BillingHistoryTable",{attrs:{billing:t.billing}})],1),t.isTalongAdmin?s("v-tab-item",[s("b-card",{staticClass:"mt-8"},[s("b-form",{on:{submit:function(e){return t.saveAdminData(e)}}},[s("div",{staticClass:"d-flex align-items-center mb-6"},[s("label",{staticClass:"checkbox checkbox-lg checkbox-outline checkbox-success"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.billing.use,expression:"billing.use"}],attrs:{type:"checkbox",name:"",disabled:t.disabled},domProps:{checked:Array.isArray(t.billing.use)?t._i(t.billing.use,null)>-1:t.billing.use},on:{click:function(e){t.billing.use=!t.billing.use},change:function(e){var s=t.billing.use,a=e.target,i=!!a.checked;if(Array.isArray(s)){var r=null,n=t._i(s,r);a.checked?n<0&&t.$set(t.billing,"use",s.concat([r])):n>-1&&t.$set(t.billing,"use",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.billing,"use",i)}}}),s("span")]),s("span",{staticClass:"ml-3 cursor-pointer"},[t._v("Aktivera kostnadsanvändning för förening")])]),s("b-form-group",{attrs:{id:"input-group-system_cost",label:"Systemkostnad per år","label-for":"input-system_cost"}},[s("b-form-input",{attrs:{id:"input-system_cost",type:"text"},model:{value:t.form.system_cost,callback:function(e){t.$set(t.form,"system_cost",e)},expression:"form.system_cost"}})],1),s("b-form-group",{attrs:{id:"input-group-sms_sek_per_send",label:"SMS SEK per skickat","label-for":"input-sms_sek_per_send"}},[s("b-form-input",{attrs:{id:"input-sms_sek_per_send",type:"text"},model:{value:t.form.sms_sek_per_send,callback:function(e){t.$set(t.form,"sms_sek_per_send",e)},expression:"form.sms_sek_per_send"}})],1),s("b-form-group",{attrs:{id:"input-group-spar_sek_per_search",label:"SPAR SEK per uppslag","label-for":"input-spar_sek_per_search"}},[s("b-form-input",{attrs:{id:"input-spar_sek_per_search",type:"text"},model:{value:t.form.spar_sek_per_search,callback:function(e){t.$set(t.form,"spar_sek_per_search",e)},expression:"form.spar_sek_per_search"}})],1),s("b-form-group",{attrs:{id:"input-group-swish_pct",label:"Swish % per transaktion","label-for":"input-swish_pct"}},[s("b-form-input",{attrs:{id:"input-swish_pct",type:"text"},model:{value:t.form.swish_pct,callback:function(e){t.$set(t.form,"swish_pct",e)},expression:"form.swish_pct"}})],1),s("b-form-group",{attrs:{id:"input-group-swish_cost",label:"Swish SEK per transaktion","label-for":"input-swish_cost"}},[s("b-form-input",{attrs:{id:"input-swish_cost",type:"text"},model:{value:t.form.swish_cost,callback:function(e){t.$set(t.form,"swish_cost",e)},expression:"form.swish_cost"}})],1),s("b-form-group",{attrs:{id:"input-group-cc_pct",label:"Kreditkort % per transaktion","label-for":"input-cc_pct"}},[s("b-form-input",{attrs:{id:"input-cc_pct",type:"text"},model:{value:t.form.cc_pct,callback:function(e){t.$set(t.form,"cc_pct",e)},expression:"form.cc_pct"}})],1),s("b-form-group",{attrs:{id:"input-group-cc_cost",label:"Kreditkort SEK per transaktion","label-for":"input-cc_cost"}},[s("b-form-input",{attrs:{id:"input-cc_cost",type:"text"},model:{value:t.form.cc_cost,callback:function(e){t.$set(t.form,"cc_cost",e)},expression:"form.cc_cost"}})],1),s("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Spara")])],1)],1)],1):t._e()],1)],1):t._e()],1)},i=[],r=s("5530"),n=s("bc3a"),l=s.n(n),c=s("2f62"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-custom card-stretch gutter-b"},[t._m(0),s("div",{staticClass:"card-body pt-0 pb-3"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table b-table",attrs:{id:"stickprov-table",role:"table","aria-busy":"false","aria-colcount":"5"}},[t._m(1),s("tbody",[s("tr",[s("td",{staticClass:"pl-7"},[t._v("Kostnad för SPAR")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.billing.spar_budget,expression:"billing.spar_budget"}],attrs:{type:"number"},domProps:{value:t.billing.spar_budget},on:{input:function(e){e.target.composing||t.$set(t.billing,"spar_budget",e.target.value)}}})])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("Kostnad för SMS")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.billing.sms_budget,expression:"billing.sms_budget"}],attrs:{type:"number"},domProps:{value:t.billing.sms_budget},on:{input:function(e){e.target.composing||t.$set(t.billing,"sms_budget",e.target.value)}}})])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("Systemkostnad")]),s("td",[t._v(t._s(t.billing.system_cost))])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("Betala Senast")]),s("td",[t._v(t._s(t.billing.to_period))])]),t._m(2),t._m(3)])]),s("hr"),s("div",{staticClass:"d-flex justify-content-start"},[s("b-button",{staticClass:"ml-3",attrs:{type:"button",variant:"primary"},on:{click:t.savePrice}},[t._v("Spara")])],1)])])])},d=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header border-0 py-5"},[s("h3",{staticClass:"card-title align-items-start flex-column"},[s("span",{staticClass:"card-label font-weight-bolder text-dark"})]),s("div",{staticClass:"card-toolbar"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-light",attrs:{role:"rowgroup"}},[s("tr",{staticClass:"text-left",staticStyle:{"border-radius":"1px","border-collapse":"collapse","border-top-width":"1px"}},[s("th",{staticClass:"pl-7",attrs:{role:"columnheader",scope:"col",tabindex:"0","aria-colindex":"4"}},[s("div",[t._v(" Namn ")])]),s("th",{attrs:{role:"columnheader",scope:"col",tabindex:"0","aria-colindex":"4"}},[s("div",[t._v("Pris")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"pl-7"},[t._v("Faktura PDF")]),s("td")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"pl-7"},[t._v("Betala direkt")]),s("td")])}],u={name:"invoice-table",props:["billing","currentCompanyId"],components:{},methods:{toastr:function(t,e,s){this.$emit("toastr",t,e,s)},savePrice:function(){var t=this,e=this.billing.billing_id,s=this.billing.spar_budget,a=this.billing.sms_budget;l.a.put("/billing",{billing_id:e,spar_budget:s,sms_budget:a}).then((function(e){t.toastr("success","OK","Priset har sparats.")})).catch((function(e){t.toastr("danger","Server Fel","Det gick inte att spara priset.")}))}},data:function(){return{editing_sms_price:!1,editing_spar_price:!1,columns:[{label:"Name",field:"name"},{label:"Position",field:"position"}],all_selected:!1,list:[]}}},p=u,b=(s("0ef7"),s("2877")),m=Object(b["a"])(p,o,d,!1,null,"1ac62330",null),_=m.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-custom card-stretch gutter-b"},[t._m(0),s("div",{staticClass:"card-body pt-0 pb-3"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table b-table",attrs:{role:"table","aria-busy":"false","aria-colcount":"5"}},[t._m(1),s("tbody",[t._m(2),t._m(3),t._l(t.billing,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"pl-7"},[s("p",[t._v(t._s(e.from)+t._s(e.to>999999?"+":" - "+e.to)+" st/mån")])]),s("td",{staticClass:"w-150px"},[s("p",{staticClass:"text-left"},[t._v(" "+t._s(e.sek_per_search)+" kr / sökning ")])]),s("td",{staticClass:"w-150px"},[s("div",{staticClass:"d-flex justify-content-end"},[s("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:"#"},on:{click:function(e){return t.editItem(a)}}},[s("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[s("inline-svg",{attrs:{src:"/assets/svg/Write.svg"}})],1)])])])])}))],2)]),t.editing?s("div",[s("hr"),s("b-form-group",{attrs:{id:"input-group-id",label:"Price","label-for":"input-id"}},[s("b-form-input",{attrs:{id:"input-id",type:"number",required:""},model:{value:t.currentPrice,callback:function(e){t.currentPrice=e},expression:"currentPrice"}})],1),s("div",{staticClass:"d-flex justify-content-end"},[s("b-button",{staticClass:"mr-2",attrs:{type:"button",variant:"primary"},on:{click:t.cancelPrice}},[t._v("Avbryt")]),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:t.savePrice}},[t._v("Spara")])],1)],1):t._e()])])])},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header border-0 py-5"},[s("h3",{staticClass:"card-title align-items-start flex-column"},[s("span",{staticClass:"card-label font-weight-bolder text-dark"})]),s("div",{staticClass:"card-toolbar"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-light",attrs:{role:"rowgroup"}},[s("tr",{staticClass:"text-left",staticStyle:{"border-radius":"1px","border-collapse":"collapse","border-top-width":"1px"}},[s("th",{staticClass:"pl-7",attrs:{role:"columnheader",scope:"col",tabindex:"0","aria-colindex":"4"}},[s("div",[t._v(" SPAR Namnsök ")])]),s("th",{attrs:{role:"columnheader",scope:"col",tabindex:"0","aria-colindex":"4"}},[s("div",[t._v("Pris")])]),s("th")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"pl-7"},[s("p",[t._v("Sökning med namn och adress")])]),s("td",[t._v("1,10 kr / sökning")]),s("td")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"tr-grey"},[s("td",{staticClass:"pl-7"},[t._v("SPAR Personnummersök")]),s("td",[t._v("Pris")]),s("td")])}],v={name:"spar-table",props:["billing","currentCompanyId"],components:{},methods:{toastr:function(t,e,s){this.$emit("toastr",t,e,s)},editItem:function(t){void 0!=this.billing[t]&&(this.currentIndex=t,this.currentPrice=this.billing[t].sek_per_search,this.editing=!0)},deleteItem:function(t){},savePrice:function(){this.editing=!1,void 0!=this.billing[this.currentIndex]&&(this.billing[this.currentIndex].sek_per_search=this.currentPrice)},cancelPrice:function(){this.editing=!1}},data:function(){return{sparitems:[{from:1,to:5}],editing:!1,all_selected:!1,currentPrice:0,currentIndex:0,list:[]}}},h=v,C=(s("c48e"),Object(b["a"])(h,g,f,!1,null,"ba0385de",null)),k=C.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-custom card-stretch gutter-b"},[t._m(0),s("div",{staticClass:"card-body pt-0 pb-3"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table b-table",attrs:{id:"stickprov-table",role:"table","aria-busy":"false","aria-colcount":"5"}},[t._m(1),s("tbody",[s("tr",[s("td",{staticClass:"pl-7"},[t._v("SEK/Uppslag")]),s("td",[t._v(t._s(t.billing.sms_sek_per_send))])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("Antal uppslag")]),s("td",[t._v(t._s(t.billing.sms_num_sent))])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("Kostnad")]),s("td",[t._v(t._s(t.billing.sms_budget_spent))])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("Fakturadatum")]),s("td",[t._v(t._s(t.billing.to_period))])])])])])])])},x=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header border-0 py-5"},[s("h3",{staticClass:"card-title align-items-start flex-column"},[s("span",{staticClass:"card-label font-weight-bolder text-dark"})]),s("div",{staticClass:"card-toolbar"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-light",attrs:{role:"rowgroup"}},[s("tr",{staticClass:"text-left",staticStyle:{"border-radius":"1px","border-collapse":"collapse","border-top-width":"1px"}},[s("th",{staticClass:"pl-7",attrs:{role:"columnheader",scope:"col",tabindex:"0","aria-colindex":"4"}},[s("div",[t._v(" Namn ")])]),s("th",{attrs:{role:"columnheader",scope:"col",tabindex:"0","aria-colindex":"4"}},[s("div",[t._v("Pris")])])])])}],S={name:"sms-table",props:["billing","currentCompanyId"],components:{},methods:{toastr:function(t,e,s){this.$emit("toastr",t,e,s)}},data:function(){return{all_selected:!1,list:[]}}},P=S,w=(s("82a1"),Object(b["a"])(P,y,x,!1,null,"af633308",null)),$=w.exports,I=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},E=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-custom card-stretch gutter-b"},[s("div",{staticClass:"card-header border-0 py-5"},[s("h3",{staticClass:"card-title align-items-start flex-column"},[s("span",{staticClass:"card-label font-weight-bolder text-dark"})]),s("div",{staticClass:"card-toolbar"})]),s("div",{staticClass:"card-body pt-0 pb-3"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table b-table",attrs:{id:"stickprov-table",role:"table","aria-busy":"false","aria-colcount":"5"}},[s("thead",{staticClass:"thead-light",attrs:{role:"rowgroup"}},[s("tr",{staticClass:"text-left",staticStyle:{"border-radius":"1px","border-collapse":"collapse","border-top-width":"1px"}},[s("th",{staticClass:"pl-7",attrs:{role:"columnheader",scope:"col",tabindex:"0","aria-colindex":"4"}},[s("div",[t._v(" Namn ")])]),s("th",{attrs:{role:"columnheader",scope:"col",tabindex:"0","aria-colindex":"4"}},[s("div",[t._v("Pris")])])])]),s("tbody",[s("tr",[s("td",{staticClass:"pl-7"},[t._v("SEK/SPAR Uppslag")]),s("td",[t._v("0")])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("Antal SPAR uppslag")]),s("td",[t._v("0")])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("Kostnad SPAR")]),s("td",[t._v("0")])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("SEK/SMS Utskick")]),s("td",[t._v("0")])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("Antal SMS utskick")]),s("td",[t._v("0")])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("Kostnad SMS")]),s("td",[t._v("0")])]),s("tr",[s("td",{staticClass:"pl-7"},[t._v("Fakturadatum")]),s("td",[t._v("0")])])])])])])])}],A={name:"subcompany-table",props:["billing","currentCompanyId"],components:{},methods:{toastr:function(t,e,s){this.$emit("toastr",t,e,s)}},data:function(){return{all_selected:!1,list:[]}}},K=A,B=(s("e653"),Object(b["a"])(K,I,E,!1,null,"1767898b",null)),T=B.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-custom card-stretch gutter-b"},[t._m(0),s("div",{staticClass:"card-body pt-0 pb-3"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table b-table",attrs:{role:"table","aria-busy":"false","aria-colcount":"5"}},[t._m(1),s("tbody",[t._m(2),t._m(3),t._l(t.billing,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"pl-7"},[s("p",[t._v(t._s(e.from)+t._s(e.to>999999?"+":" - "+e.to)+" st/mån")])]),s("td",{staticClass:"w-150px"},[t._v(t._s(e.sek_per_month)+" kr")]),s("td",{staticClass:"w-150px"},[s("div",{staticClass:"d-flex justify-content-end"},[s("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:"#"},on:{click:function(e){return t.editItem(a)}}},[s("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[s("inline-svg",{attrs:{src:"/assets/svg/Write.svg"}})],1)])])])])}))],2)]),t.editing?s("div",[s("hr"),s("b-form-group",{attrs:{id:"input-group-id",label:"Price","label-for":"input-id"}},[s("b-form-input",{attrs:{id:"input-id",type:"number",required:""},model:{value:t.currentPrice,callback:function(e){t.currentPrice=e},expression:"currentPrice"}})],1),s("div",{staticClass:"d-flex justify-content-end"},[s("b-button",{staticClass:"mr-2",attrs:{type:"button",variant:"primary"},on:{click:t.cancelPrice}},[t._v("Avbryt")]),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:t.savePrice}},[t._v("Spara")])],1)],1):t._e()])])])},j=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header border-0 py-5"},[s("h3",{staticClass:"card-title align-items-start flex-column"},[s("span",{staticClass:"card-label font-weight-bolder text-dark"})]),s("div",{staticClass:"card-toolbar"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-light",attrs:{role:"rowgroup"}},[s("tr",{staticClass:"text-left",staticStyle:{"border-radius":"1px","border-collapse":"collapse","border-top-width":"1px"}},[s("th",{staticClass:"pl-7",attrs:{role:"columnheader",scope:"col",tabindex:"0","aria-colindex":"4"}},[s("div",[t._v(" E-post Grund ")])]),s("th",{attrs:{role:"columnheader",scope:"col",tabindex:"0","aria-colindex":"4"}},[s("div",[t._v("Pris")])]),s("th")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"pl-7"},[s("p",[t._v("10 000 st/år")]),s("p",{staticClass:"descr"},[t._v("Efter förbrukat saldo övergår prissättning till paketet E-post Utökad enligt nedan")])]),s("td",[t._v("0 kr")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",{staticClass:"tr-grey"},[s("td",{staticClass:"pl-7"},[t._v("E-post Utökad")]),s("td",[t._v("Pris")]),s("td")])}],O={name:"sms-table",props:["billing","currentCompanyId"],components:{},methods:{toastr:function(t,e,s){this.$emit("toastr",t,e,s)},editItem:function(t){void 0!=this.billing[t]&&(this.currentIndex=t,this.currentPrice=this.billing[t].sek_per_month,this.editing=!0),console.log(this.currentPrice,"CurrentIndex")},deleteItem:function(t){},savePrice:function(){this.editing=!1,void 0!=this.billing[this.currentIndex]&&(this.billing[this.currentIndex].sek_per_month=this.currentPrice)},cancelPrice:function(){this.editing=!1}},data:function(){return{editing:!1,all_selected:!1,currentPrice:0,currentIndex:0,list:[]}}},R=O,M=(s("010c"),Object(b["a"])(R,F,j,!1,null,"485847bb",null)),N=M.exports,D=s("c1df"),U=s.n(D),H={name:"billing",components:{BillingInvoiceTable:_,BillingSMSTable:$,BillingSPARTable:k,BillingSubcompanyTable:T,BillingEmailTable:N},computed:Object(r["a"])({},Object(c["b"])(["currentCompanyId","currentPeriodId","isTalongAdmin","companies"])),mounted:function(){this.loadBilling(),this.loadCompany(),this.isTalongAdmin?this.disabled=!1:this.disabled=!0},data:function(){return{disabled:!1,billing:{use:!1,recv:""},form:{sms_budget:0,spar_budget:0,system_cost:0,swish_cost:0,swish_pct:0,cc_cost:0,cc_pct:0,spar_sek_per_search:0,sms_sek_per_send:0},billing_active:!1}},watch:{currentCompanyId:function(t,e){t&&this.loadCompany()}},methods:{activateBilling:function(){var t=this,e=U()().startOf("month"),s=U()().endOf("month");l.a.post("/billing",{company_id:this.currentCompanyId,period_id:this.currentPeriodId,from_date:e,to_date:s,is_active:1,billing_company_id:this.currentCompanyId}).then((function(e){t.billing_active=!0,t.form=e.data.billing,t.billing={use:!0,recv:t.currentCompanyId},l.a.put("/company",{company_id:t.currentCompanyId,billing:t.billing}).then((function(e){t.toastr("success","OK","Föreningsinställningar uppdaterade")})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte spara föreningsdata")}))})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte skapa fakturering")}))},saveAdminData:function(t){var e=this;t.preventDefault(),l.a.put("/company",{company_id:this.currentCompanyId,billing:this.billing}).then((function(t){e.toastr("success","OK","Föreningsinställningar uppdaterade")})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte spara föreningsdata")})),this.form.company_id=this.currentCompanyId,this.form.period_id=this.currentPeriodId,l.a.put("/billing",this.form).then((function(t){200===t.status?e.toastr("success","OK","Kostnader uppdaterade"):e.toastr("danger","Server Fel","Kunde inte uppdatera kostnader")})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte spara kostnader")}))},loadCompany:function(){var t=this;l.a.get("/company?company_id=".concat(this.currentCompanyId)).then((function(t){})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte hämta föreningsdata")}))},loadBilling:function(){var t=this;console.log(this.billing,"bi"),l.a.get("/billing/active?company_id=".concat(this.currentCompanyId)).then((function(e){if(null===e.data.billing||void 0===e.data.billing)return t.toastr("danger","Saknas data","Fakturering är ej påslaget för denna förening"),void(t.billing_active=!1);t.billing_active=!0,t.billing=e.data.billing,t.form=e.data.billing,console.log(t.form,"billing")})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte hämta kostnader")}))},savePrice:function(){var t=this;if(this.billing&&this.billing.billing_id){var e=this.billing.billing_id,s=this.form.spar_budget,a=this.form.sms_budget;l.a.put("/billing",{billing_id:e,spar_budget:s,sms_budget:a}).then((function(e){t.toastr("success","OK","Priset har sparats.")})).catch((function(e){t.toastr("danger","Server Fel","Det gick inte att spara priset.")}))}},toastr:function(t,e,s){this.$bvToast.toast(s,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})}}},V=H,q=(s("bdb6"),s("6544")),J=s.n(q),W=s("71a3"),G=s("c671"),z=s("fe57"),L=Object(b["a"])(V,a,i,!1,null,"03815e64",null);e["default"]=L.exports;J()(L,{VTab:W["a"],VTabItem:G["a"],VTabs:z["a"]})},bdb6:function(t,e,s){"use strict";s("a006")},c48e:function(t,e,s){"use strict";s("6f0b")},e653:function(t,e,s){"use strict";s("3700")}}]);
//# sourceMappingURL=chunk-52537b3d.06c7173e.js.map