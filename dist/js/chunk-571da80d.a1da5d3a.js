(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-571da80d"],{"00cf":function(t,e,r){"use strict";r("750e")},"0234":function(t,e,r){"use strict";function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){a(t,e,r[e])}))}return t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.pushParams=d,e.popParams=c,e.withParams=p,e._setTarget=e.target=void 0;var i=[],s=null;e.target=s;var l=function(t){e.target=s=t};function d(){null!==s&&i.push(s),e.target=s={}}function c(){var t=s,r=e.target=s=i.pop()||null;return r&&(Array.isArray(r.$sub)||(r.$sub=[]),r.$sub.push(t)),t}function u(t){if("object"!==o(t)||Array.isArray(t))throw new Error("params must be an object");e.target=s=n({},s,t)}function f(t,e){return m((function(r){return function(){r(t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e.apply(this,a)}}))}function m(t){var e=t(u);return function(){d();try{for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(this,r)}finally{c()}}}function p(t,e){return"object"===o(t)&&void 0!==e?f(t,e):m(t)}e._setTarget=l},"113f":function(t,e,r){},1331:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=(0,n.regex)("integer",/(^[0-9]*$)|(^-[0-9]+$)/);e.default=a},"23a5":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card card-custom card-stretch gutter-b"},[r("table",{staticClass:"table table-vertical-center table-head-bg table-borderless"},[r("thead",[r("tr",[r("td",{staticStyle:{width:"300px"}},[r("div",{staticClass:"d-flex justify-content-start align-self-center"},[t._m(0),r("div",{staticClass:"align-self-center"},[t._v(" "+t._s(t.todo.name)+" ")])])]),r("td",[r("div",{staticClass:"d-flex justify-content-start align-self-center"},[t._m(1),r("div",{staticClass:"align-self-center"},[t._v(" "+t._s(t.category[t.todo.type2])+" ")])])]),r("td",[r("div",{staticClass:"d-flex justify-content-start align-self-center"},[t._m(2),r("div",{staticClass:"align-self-center"},[t._v(" "+t._s(t.supportOptions[t.todo.severity-1])+" ")])])]),r("td",[r("div",{staticClass:"d-flex justify-content-start align-self-center"},[t.isCompleted(t.todo.status)?t._e():r("span",{staticClass:"mr-3"},[r("i",{staticClass:"fas fa-lock-open header-icon"})]),t.isCompleted(t.todo.status)?r("span",{staticClass:"mr-3"},[r("i",{staticClass:"fas fa-lock header-icon"})]):t._e(),r("div",{staticClass:"align-self-center"},[t._v(" "+t._s(t.status[t.todo.status])+" ")])])]),r("td",[r("div",{staticClass:"d-flex justify-content-end align-self-center"},[t.isCompleted(t.todo.status)?t._e():r("a",{staticClass:"btn-text-primary btn-hover-light-primary font-weight-bold mr-3 cursor-pointer",on:{click:t.onClose}},[t._v("Stäng")]),r("Confirm",{ref:"close_todo",attrs:{title:"Ticket",message:"Är du säker på att du vill stänga detta ärende?",type:"success",confirm:"Ja",cancel:"Nej"},on:{confirm:t.closeTodo}})],1)])])])]),r("b-form-group",{staticClass:"d-flex justify-content-end mt-3"},[t.isCompleted(t.todo.status)||t.editing?t._e():r("b-button",{staticClass:"mr-6",attrs:{type:"button",variant:"primary"},on:{click:t.editComment}},[t._v("Svar")])],1),t.editing?r("b-form",{staticClass:"d-flex flex-column"},[r("div",{staticClass:"d-sm-flex justify-content-between mb-sm-10"},[r("b-form-group",{staticClass:"flex-fill mr-sm-6",attrs:{id:"input-group-user-name",label:"Namn","label-for":"input-user-name"}},[r("b-form-input",{attrs:{id:"input-user-name",type:"text",disabled:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}},[t._v(t._s(this.username))])],1),r("b-form-group",{staticClass:"flex-fill",attrs:{id:"input-group-user-email",label:"E-postadress","label-for":"input-user-email"}},[r("b-form-input",{attrs:{id:"input-user-email",type:"text",disabled:""},model:{value:t.useremail,callback:function(e){t.useremail=e},expression:"useremail"}})],1)],1),r("b-form-group",{attrs:{id:"input-group-desc",label:"Meddelande","label-for":"input-desc"}},[r("editor",{attrs:{id:"input-desc","api-key":"qjaly68mahdluhx0rongdllvelixwgn18730f5z7fdzq6hq2",init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |                 alignleft aligncenter alignright alignjustify |                 bullist numlist outdent indent | removeformat"}},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1),r("b-form-group",{staticClass:"d-flex justify-content-end"},[r("b-button",{staticClass:"mr-2",attrs:{type:"button",variant:"primary"},on:{click:t.sendComment}},[t._v("Skicka")]),r("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(e){t.editing=!1}}},[t._v("Avbryt")])],1),r("FileTable",{attrs:{files:t.files},on:{onUploadFileClicked:t.selectFile,downloadFileClicked:t.downloadFileClicked,deleteFileClicked:t.deleteFileClicked}}),r("input",{ref:"file",attrs:{hidden:"",type:"file",id:"file",accept:t.extensions},on:{change:function(e){return t.handleFileUpload()}}})],1):t._e(),t._l(t.conversations(),(function(e,n){return r("table",{key:n,staticClass:"table table-vertical-center table-borderless"},[r("thead",{staticClass:"text-left"},["comment"==e.type?r("tr",{class:e.user_id==t.userid?"comment-default-title":"comment-admin-title"},[r("td",{staticStyle:{width:"300px"}},[r("div",{staticClass:"d-flex justify-content-start align-self-center"},[t._m(3,!0),r("div",{staticClass:"align-self-center"},[t._v(" "+t._s(""==e.username?t.user_name:e.username))])])]),r("td",[r("div",{staticClass:"align-self-center"},[t._v(" "+t._s(""==e.created_at?"Date Unknown":e.created_at)+" ")])]),r("td",{staticClass:"align-self-center"}),r("td",{staticClass:"align-self-center"})]):t._e(),"file"==e.type?r("tr",{class:e.user_id==t.userid?"comment-default-title":"comment-admin-title"},[r("td",{staticStyle:{width:"300px"}},[r("div",{staticClass:"d-flex justify-content-start align-self-center"},[t._m(4,!0),r("div",{staticClass:"align-self-center"},[t._v(" "+t._s(""==e.username?t.user_name:e.username))])])]),r("td",{staticClass:"align-self-center"},[t._v(" "+t._s(""==e.created_at?"Date Unknown":e.created_at)+" ")]),r("td",{staticClass:"align-self-center"}),r("td",{staticClass:"align-self-center"},[t._v(" "+t._s(e.text)+" ")]),r("td",{staticClass:"d-flex justify-content-end p-0"},[r("a",{staticClass:"btn btn-icon btn-light btn-sm mx-6 mt-2 border border-primary",attrs:{href:"#"},on:{click:function(r){return t.downloadFileClicked(e.file_id)}}},[t._m(5,!0)])])]):t._e()]),"comment"==e.type?r("tbody",[r("td",{attrs:{colspan:"4"}},[r("p",{staticClass:"m-2 pl-8",attrs:{html:e.text},domProps:{innerHTML:t._s(e.text)}})])]):t._e()])}))],2)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"ml-1 mr-3"},[r("i",{staticClass:"fas fa-file-signature header-icon"})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"mr-3"},[r("i",{staticClass:"far fa-question-circle header-icon"})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"mr-3"},[r("i",{staticClass:"fas fa-clock header-icon"})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"ml-1 mr-2"},[r("i",{staticClass:"fas fa-user-circle",staticStyle:{"font-size":"16px"}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"ml-1 mr-3"},[r("i",{staticClass:"fas fa-file",staticStyle:{"font-size":"16px"}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",[r("i",{staticClass:"fa fa-download",staticStyle:{"font-size":"16px",color:"#3699FF"},attrs:{"aria-hidden":"true"}})])}],o=(r("99af"),r("4de4"),r("baa5"),r("d81d"),r("fb6a"),r("b0c0"),r("5530")),i=r("bc3a"),s=r.n(i),l=r("2f62"),d=(r("c1df"),r("ca72")),c=r("3e2c"),u=r("b262"),f={name:"support-chat-box",props:["todo","username","useremail","userid"],components:{editor:d["a"],Confirm:c["a"],FileTable:u["a"]},computed:Object(o["a"])({},Object(l["b"])(["currentCompanyId","currentPeriodId","currentUserId","currentUser"])),watch:{todo:function(t,e){console.log(t,"Todo Data"),0===t.tasks.length&&t.tasks.push(this.createTask(t.todo_id))}},methods:{conversations:function(){var t=this.todo.tasks[0].comments,e=this.todo.tasks[0].files,r=t.map((function(t){return{user_id:t.user_id,text:t.text,created_at:t.created_at,type:"comment",username:t.username,file_id:0}}));return r=r.concat(e.map((function(t){return{user_id:t.user_id,text:t.name,created_at:t.created_at,type:"file",username:t.username,file_id:t.file_id}}))),r.sort((function(t,e){return e.created_at.localeCompare(t.created_at)})),r},comments:function(){var t=this.todo.tasks[0].comments;return t.slice().reverse()},createTask:function(t){var e=this;s.a.post("/todo_task",{todo_id:t}).then((function(t){return e.toastr("success","OK","Ärendet har skapats"),t.data.task})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte skapa ärendet")}))},sendComment:function(){var t=this;this.editing=!1;var e=this.todo.tasks[0],r="sub",n=this.form.comment,a=e.todo_task_id;s.a.post("/todo_task/comment",{from:r,comment:n,todo_task_id:a}).then((function(r){t.form.comment="";var n=r.data.comment,a=n.from.lastIndexOf(" ");n.username=n.from.substring(0,a),n.user_email=n.from.substring(a),e.comments.push(n),t.todo.tasks[0]=e})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte skicka kommentar")}))},editComment:function(){this.editing=!0,this.files=[]},onClose:function(){this.$refs["close_todo"].show()},closeTodo:function(){var t=this,e=this.todo;e.status="DOC",s.a.put("/todo",e).then((function(r){t.$emit("closeTodo",e)})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte skapa ärendet")}))},downloadFileClicked:function(t){var e=this;s.a.get("/file?file_id=".concat(t)).then((function(t){window.open(t.data.file.public_path,"_blank")})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte hämta filen")}))},deleteFileClicked:function(t){var e=this;s.a.delete("/file?file_id=".concat(t,"&company_id=").concat(this.currentCompanyId,"&todo_task_id=").concat(this.todo.tasks[0].todo_task_id)).then((function(r){200==r.status&&(e.files=e.files.filter((function(e){return e.file_id!=t})),e.todo.tasks[0].files=e.todo.tasks[0].files.filter((function(e){return e.file_id!=t})))})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte hämta filen")}))},selectFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.uploadFile()},downloadFile:function(){},deleteFile:function(){},uploadFile:function(){var t=this,e=new FormData;e.append("file",this.file),e.append("file_source","todo"),e.append("file_type",""),e.append("company_id",this.currentCompanyId),e.append("todo_id",this.todo.todo_id),e.append("todo_task_id",this.todo.tasks[0].todo_task_id),s.a.post("/fileupload?todo=true&todo_id=".concat(this.todo.todo_id,"&todo_task_id=").concat(this.todo.tasks[0].todo_task_id),e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.toastr("success","OK","Filen laddades upp"),t.file.file_id=e.data.fileobjs[0].file_id,t.file.created_at=e.data.fileobjs[0].created_at,t.file.user_id=t.userid,t.file.username=t.user_name,t.$emit("fileUploaded",t.file),t.files.push(t.file),t.todo.tasks[0].files.push(t.file)})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte ladda upp fil")}))},toastr:function(t,e,r){this.$emit("toastr",t,e,r)}},data:function(){return{editing:!1,form:{username:"",comment:""},files:[],isCompleted:function(t){return"DONE"==t||"CN"==t||"REJ"==t||"DEL"==t||"DOC"==t},category:{N:"NOTSET",B:"BUG",F:"FEATURE",I:"INFO",S:"SUPPORT"},status:{WAIT:"VÄNTAR",DRAFT:"UTKAST",NOT:"EJ KLAR",DONE:"KLART",CN:"BEKRÄFTAD",DEL:"BORTTAGEN",ACC:"ACCEPTERAD",REJ:"AVVISAD",BAC:"BACKLOG",FUT:"FRAMTID",UNREAD:"OLÄST",READ:"LÄST",DOC:"STÄNGT"},supportOptions:["låg","låg","låg","låg","medel","medel","medel","hög","hög","hög"],extensions:[".7z",".bz2",".csv",".docx",".doc",".eml",".gif",".gz",".jpeg",".jpg",".odt",".ods",".pdf",".php",".png",".rar",".sql",".txt",".xls",".xlsx",".wav"]}}},m=f,p=(r("5ce2"),r("2877")),h=Object(p["a"])(m,n,a,!1,null,"04a6f038",null);e["a"]=h.exports},"2a12":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(t){return(0,n.withParams)({type:"maxLength",max:t},(function(e){return!(0,n.req)(e)||(0,n.len)(e)<=t}))};e.default=a},3360:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,n.withParams)({type:"and"},(function(){for(var t=this,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.length>0&&e.reduce((function(e,r){return e&&r.apply(t,n)}),!0)}))};e.default=a},"398dc":function(t,e,r){"use strict";r("ad92")},"3a54":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=(0,n.regex)("alphaNum",/^[a-zA-Z0-9]*$/);e.default=a},"3e2c":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{ref:"confirmModal",attrs:{"hide-footer":"",title:t.title}},[r("b-row",[r("b-col",{attrs:{lg:"12"}},[r("div",{staticClass:"d-block text-center"},[r("h3",[t._v(t._s(t.message))])])])],1),r("b-row",{staticClass:"mt-8 mb-8"},[r("b-col",{attrs:{lg:"6"}},[r("b-button",{attrs:{variant:t.confirmColor,block:""},on:{click:t.onConfirm}},[t._v(t._s(t.confirm))])],1),r("b-col",{attrs:{lg:"6"}},[r("b-button",{attrs:{variant:"outline-secondary",block:""},on:{click:t.onCancel}},[t._v(t._s(t.cancel))])],1)],1)],1)},a=[],o=(r("96cf"),r("1da1")),i={name:"confirm-modal",data:function(){return{}},props:{type:{type:String,default:"danger"},title:String,message:String,confirm:{type:String,default:"Bekräfta"},cancel:{type:String,default:"Avbryt"}},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{show:function(){this.$refs["confirmModal"].show()},onConfirm:function(){this.$refs["confirmModal"].hide(),this.$emit("confirm")},onCancel:function(){this.$refs["confirmModal"].hide(),this.$emit("cancel")}},computed:{confirmColor:function(){switch(this.type){case"danger":return"outline-danger";case"success":return"outline-success";case"info":return"outline-info";case"warning":return"outline-warning";case"primary":return"outline-primary"}}}},s=i,l=r("2877"),d=Object(l["a"])(s,n,a,!1,null,"7c6e001a",null);e["a"]=d.exports},"45b8":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=(0,n.regex)("numeric",/^[0-9]*$/);e.default=a},"46bc":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(t){return(0,n.withParams)({type:"maxValue",max:t},(function(e){return!(0,n.req)(e)||(!/\s/.test(e)||e instanceof Date)&&+e<=+t}))};e.default=a},5797:function(t,e,r){},"5ce2":function(t,e,r){"use strict";r("5797")},"5d75":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/,o=(0,n.regex)("email",a);e.default=o},"5db3":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(t){return(0,n.withParams)({type:"minLength",min:t},(function(e){return!(0,n.req)(e)||(0,n.len)(e)>=t}))};e.default=a},6235:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=(0,n.regex)("alpha",/^[a-zA-Z]*$/);e.default=a},6417:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(t){return(0,n.withParams)({type:"not"},(function(e,r){return!(0,n.req)(e)||!t.call(this,e,r)}))};e.default=a},7205:function(t,e,r){"use strict";r("113f")},"750e":function(t,e,r){},"772d":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i,o=(0,n.regex)("url",a);e.default=o},"78ef":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"withParams",{enumerable:!0,get:function(){return n.default}}),e.regex=e.ref=e.len=e.req=void 0;var n=a(r("8750"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var i=function(t){if(Array.isArray(t))return!!t.length;if(void 0===t||null===t)return!1;if(!1===t)return!0;if(t instanceof Date)return!isNaN(t.getTime());if("object"===o(t)){for(var e in t)return!0;return!1}return!!String(t).length};e.req=i;var s=function(t){return Array.isArray(t)?t.length:"object"===o(t)?Object.keys(t).length:String(t).length};e.len=s;var l=function(t,e,r){return"function"===typeof t?t.call(e,r):r[t]};e.ref=l;var d=function(t,e){return(0,n.default)({type:t},(function(t){return!i(t)||e.test(t)}))};e.regex=d},8750:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n="web"===Object({NODE_ENV:"production",VUE_APP_RUN_ENV:"local",BASE_URL:"/"}).BUILD?r("cb69").withParams:r("0234").withParams,a=n;e.default=a},"91d3":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":";return(0,n.withParams)({type:"macAddress"},(function(e){if(!(0,n.req)(e))return!0;if("string"!==typeof e)return!1;var r="string"===typeof t&&""!==t?e.split(t):12===e.length||16===e.length?e.match(/.{2}/g):null;return null!==r&&(6===r.length||8===r.length)&&r.every(o)}))};e.default=a;var o=function(t){return t.toLowerCase().match(/^[0-9a-f]{2}$/)}},aa82:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(t){return(0,n.withParams)({type:"requiredIf",prop:t},(function(e,r){return!(0,n.ref)(t,this,r)||(0,n.req)(e)}))};e.default=a},ad92:function(t,e,r){},b5ae:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"alpha",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"alphaNum",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"numeric",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"between",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"email",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"ipAddress",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"macAddress",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"maxLength",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"minLength",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"required",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"requiredIf",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"requiredUnless",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"sameAs",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"url",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"or",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"and",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"not",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"minValue",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"maxValue",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(e,"integer",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(e,"decimal",{enumerable:!0,get:function(){return x.default}}),e.helpers=void 0;var n=w(r("6235")),a=w(r("3a54")),o=w(r("45b8")),i=w(r("ec11")),s=w(r("5d75")),l=w(r("c99d")),d=w(r("91d3")),c=w(r("2a12")),u=w(r("5db3")),f=w(r("d4f4")),m=w(r("aa82")),p=w(r("e652")),h=w(r("b6cb")),b=w(r("772d")),_=w(r("d294")),g=w(r("3360")),v=w(r("6417")),y=w(r("eb66")),C=w(r("46bc")),k=w(r("1331")),x=w(r("c301")),T=O(r("78ef"));function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}function w(t){return t&&t.__esModule?t:{default:t}}e.helpers=T},b6cb:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(t){return(0,n.withParams)({type:"sameAs",eq:t},(function(e,r){return e===(0,n.ref)(t,this,r)}))};e.default=a},c301:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=(0,n.regex)("decimal",/^[-]?\d*(\.\d+)?$/);e.default=a},c39a:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"px-5",attrs:{id:"page-support"}},[r("h5",{staticClass:"mb-6 ml-2"},[t._v("Support/Förslagslåda")]),r("TodoTable",{attrs:{items:t.todos},on:{showHistoryToggled:t.showHistoryToggled,createTodoClicked:t.createTodoClicked,selectTodoClicked:t.selectTodo,deleteTodoClicked:t.deleteTodo,toastr:t.toastr}}),r("div",{staticClass:"scroll-to-container"}),t.creating?r("b-card",{ref:"edit-todo",staticClass:"mb-2 edit-todo-container",attrs:{title:"",id:"edit-todo","hide-footer":""}},[r("b-form",{staticClass:"d-flex flex-column"},[r("div",{staticClass:"d-sm-flex justify-content-between mb-sm-10"},[r("b-form-group",{staticClass:"flex-fill mr-sm-6",attrs:{id:"input-group-user-name",label:"Namn","label-for":"input-user-name"}},[r("b-form-input",{attrs:{id:"input-user-name",type:"text",disabled:""},model:{value:t.userid,callback:function(e){t.userid=e},expression:"userid"}},[t._v(t._s(this.username))])],1)],1),r("div",{staticClass:"d-sm-flex justify-content mb-sm-10"},[r("div",{staticClass:"d-flex flex-column flex-fill mb-2 mr-sm-6 mb-sm-0"},[r("label",{staticClass:"block",attrs:{for:"support-type"}},[t._v("Kategori")]),r("b-form-select",{attrs:{id:"support-type",placeholder:"Kategory",options:t.category},model:{value:t.form.type2,callback:function(e){t.$set(t.form,"type2",e)},expression:"form.type2"}})],1),r("div",{staticClass:"d-flex flex-column flex-fill mb-2 mb-sm-0"},[r("label",{attrs:{for:"support-type"}},[t._v("Allvarighetsgrad")]),r("b-form-select",{attrs:{id:"level-severity",placeholder:"Level of severity",options:t.supportOptions},model:{value:t.form.severity,callback:function(e){t.$set(t.form,"severity",e)},expression:"form.severity"}})],1)]),r("b-form-group",{attrs:{id:"input-group-topic",label:"Ämne","label-for":"input-topic"}},[r("b-form-input",{attrs:{id:"input-topic",type:"text",placeholder:"InmatningsÄmne"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("b-form-group",{attrs:{id:"input-group-desc",label:"Meddelande","label-for":"input-desc"}},[r("editor",{attrs:{id:"input-desc","api-key":"qjaly68mahdluhx0rongdllvelixwgn18730f5z7fdzq6hq2",init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |                   alignleft aligncenter alignright alignjustify |                   bullist numlist outdent indent | removeformat"}},model:{value:t.form.descr,callback:function(e){t.$set(t.form,"descr",e)},expression:"form.descr"}})],1),r("FileTable",{attrs:{files:t.files},on:{onUploadFileClicked:t.selectFile,downloadFileClicked:t.downloadFileClicked}}),r("input",{ref:"file",attrs:{hidden:"",type:"file",id:"file",accept:t.extensions},on:{change:function(e){return t.handleFileUpload()}}}),r("b-form-group",{staticClass:"d-flex justify-content-end"},[r("b-button",{attrs:{type:"button",variant:"primary",disabled:!t.form.name||!t.form.descr,title:t.form.name&&t.form.descr?"":"Input Ämne and Meddelande"},on:{click:t.createComment}},[t._v("Skicka")])],1)],1)],1):t._e(),t.editing?r("b-card",[r("Chatbox",{attrs:{todo:t.todoSelected,userid:t.userid,username:t.username,useremail:t.useremail,id:"support-task-table"},on:{closeTodo:t.closeTodo}})],1):t._e()],1)},a=[],o=(r("99af"),r("4de4"),r("c740"),r("d81d"),r("a434"),r("b0c0"),r("2909")),i=(r("96cf"),r("1da1")),s=r("5530"),l=r("bc3a"),d=r.n(l),c=r("c1df"),u=r.n(c),f=r("2f62"),m=r("ca72"),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card card-custom card-stretch gutter-b"},[r("div",{staticClass:"card-header border-0 py-5"},[r("div",{staticClass:"card-toolbar d-flex justify-content-between justify-content-sm-end w-100"},[r("div",{staticClass:"d-flex align-items-center mr-sm-12 my-2"},[r("label",{staticClass:"checkbox checkbox-lg checkbox-outline checkbox-success"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.show_history,expression:"show_history"}],attrs:{type:"checkbox",name:""},domProps:{checked:Array.isArray(t.show_history)?t._i(t.show_history,null)>-1:t.show_history},on:{click:function(e){t.show_history=!t.show_history},change:function(e){var r=t.show_history,n=e.target,a=!!n.checked;if(Array.isArray(r)){var o=null,i=t._i(r,o);n.checked?i<0&&(t.show_history=r.concat([o])):i>-1&&(t.show_history=r.slice(0,i).concat(r.slice(i+1)))}else t.show_history=a}}}),r("span")]),r("span",{staticClass:"ml-3 cursor-pointer"},[t._v("Tidigare Ärenden")])]),r("a",{staticClass:"btn btn-primary font-weight-bolder font-size-sm",attrs:{href:"#"},on:{click:t.createTodoClicked}},[r("i",{staticClass:"menu-icon flaticon2-plus",staticStyle:{"font-size":"1.0em"}}),t._v("Nytt Ärende")])])]),r("div",{staticClass:"card-header border-0 py-5 m-1"},[r("div",[r("b-select",{attrs:{options:t.options},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1),r("b-pagination",{staticClass:"ml-auto mb-0",attrs:{"total-rows":t.todos.length,"per-page":t.perPage,"aria-controls":"admin-support-table","first-number":"","last-number":""},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),r("div",{staticClass:"card-body pt-0"},[r("b-table",{attrs:{id:"admin-support-table",fields:t.headers,items:t.todos,"per-page":t.perPage,"current-page":t.currentPage,"head-variant":"light","sticky-header":"",responsive:""},scopedSlots:t._u([{key:"cell(todo_id)",fn:function(e){return[r("div",{staticClass:"d-flex justify-content-end"},[r("b-button",{staticClass:"button",attrs:{href:"#",variant:"primary"},on:{click:function(r){return t.selectTodoClicked(e.item.todo_id)}}},[t._v(" Hantera ")]),r("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:"#"},on:{click:function(r){return t.deleteTodoClicked(e.item.todo_id)}}},[r("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[r("inline-svg",{attrs:{src:"/assets/svg/Trash.svg"}})],1)])],1)]}}])})],1),r("div",{staticClass:"card-body pt-0 pb-3"})])},h=[],b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("td",[r("span",{staticClass:"text-dark-75 font-weight-bolder d-block font-size-lg"},[t._v(t._s(t.todo.name))])]),r("td",[t._v(" "+t._s(t.category[t.todo.type2])+" ")]),r("td",[t._v(" "+t._s(t.supportOptions[t.todo.severity-1])+" ")]),r("td",[t._v(" "+t._s(t.status[t.todo.status])+" ")]),r("td",[t._v(t._s(t.todo.created_at))]),r("td",{staticClass:"text-right pr-0"},[r("b-button",{staticClass:"button",attrs:{href:"#",variant:"primary"},on:{click:function(e){return t.selectTodoClicked(t.todo.todo_id)}}},[t._v(" Hantera ")]),r("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:"#"},on:{click:function(e){return t.deleteTodoClicked(t.todo.todo_id)}}},[r("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[r("inline-svg",{attrs:{src:"/assets/svg/Trash.svg"}})],1)])],1)])},_=[],g={name:"support-table-row",props:["todo"],computed:Object(s["a"])({},Object(f["b"])(["currentCompanyId"])),data:function(){return{category:{N:"NOTSET",I:"Teknisk support",F:"Ekonomi support",B:"Försäljning",S:"Förslag"},supportOptions:["låg","låg","låg","låg","medel","medel","medel","hög","hög","hög"],status:{WAIT:"VÄNTAR",DRAFT:"UTKAST",NOT:"EJ KLAR",DONE:"KLART",CN:"BEKRÄFTAD",DEL:"BORTTAGEN",ACC:"ACCEPTERAD",REJ:"AVVISAD",BAC:"BACKLOG",FUT:"FRAMTID",UNREAD:"OLÄST",READ:"LÄST",DOC:"STÄNGT"}}},mounted:function(){this.checkValue()},watch:{},methods:{selectTodoClicked:function(t){this.$emit("selectTodoClicked",t)},deleteTodoClicked:function(t){this.$emit("deleteTodoClicked",t)},checkValue:function(){(this.todo.severity>7||this.todo.severity<1)&&(this.todo.severity=1)}}},v=g,y=(r("00cf"),r("2877")),C=Object(y["a"])(v,b,_,!1,null,"44cae6f4",null),k=C.exports,x={name:"support-table",props:["items","currentCompanyId"],components:{TodoTableRow:k},watch:{show_history:function(t,e){this.showItems()},items:function(t,e){this.filterValue(t)}},mounted:function(){this.filterValue(this.items)},methods:{createTodoClicked:function(){this.$emit("createTodoClicked")},filterValue:function(t){var e=this;this.todos=t.map((function(t){return{todo_id:t.todo_id,category:e.category[t.type2],name:t.name,severity:e.supportOptions[t.severity-1],status:e.status[t.status],target:t.target,creator_company_name:t.creator_company_name,updated_at:t.last_updated_at}}))},selectTodoClicked:function(t){this.$emit("selectTodoClicked",t)},deleteTodoClicked:function(t){this.$emit("deleteTodoClicked",t)},showItems:function(){if(!this.show_history){var t=u()(),e=this.items.filter((function(e){var r=u()(e.to_datetime);return r<t}));this.filterValue(e)}},isCompleted:function(t){return"DONE"==t||"CN"==t||"REJ"==t||"DEL"==t},toastr:function(t,e,r){this.$emit("toastr",t,e,r)}},data:function(){return{show_history:!1,todos:[],perPage:20,currentPage:1,headers:[{key:"name",label:"Ämne",sortable:!0,thClass:"pl-7 align-middle",tdClass:"pl-7 align-middle"},{key:"category",label:"Kategori",thClass:"w-160px align-middle",tdClass:"align-middle",sortable:!0},{key:"severity",label:"Nivå",thClass:"w-80px align-middle",tdClass:"align-middle",sortable:!0},{key:"status",label:"Status",thClass:"w-100px align-middle",tdClass:"align-middle",sortable:!0},{key:"creator_company_name",label:"Förening",thClass:"w-100px align-middle",tdClass:"align-middle",sortable:!0},{key:"target",label:"Mål",thClass:"align-middle",tdClass:"align-middle",sortable:!0},{key:"updated_at",label:"Senast uppdaterad",thClass:"w-165px align-middle",tdClass:"align-middle",sortable:!0},{key:"todo_id",label:"Hantera",thClass:"w-150px text-right pr-27 align-middle",tdClass:"align-middle"}],options:[{value:20,text:"20"},{value:50,text:"50"},{value:100,text:"100"}],category:{N:"NOTSET",I:"Teknisk support",F:"Ekonomi support",B:"Försäljning",S:"Förslag"},status:{WAIT:"VÄNTAR",DRAFT:"UTKAST",NOT:"EJ KLAR",DONE:"KLART",CN:"BEKRÄFTAD",DEL:"BORTTAGEN",ACC:"ACCEPTERAD",REJ:"AVVISAD",BAC:"BACKLOG",FUT:"FRAMTID",UNREAD:"OLÄST",READ:"LÄST",DOC:"STÄNGT"},supportOptions:["låg","låg","låg","låg","medel","medel","medel","hög","hög","hög"]}}},T=x,O=(r("398dc"),Object(y["a"])(T,p,h,!1,null,"13cf6872",null)),w=O.exports,j=r("23a5"),P=r("b262"),A=r("b5ae"),S={name:"support",components:{editor:m["a"],TodoTable:w,Chatbox:j["a"],FileTable:P["a"]},computed:Object(s["a"])({},Object(f["b"])(["currentCompanyId","currentPeriodId","currentUserId","currentUser","companies"])),mounted:function(){this.loadData()},validations:{form:{name:{required:A["required"]},descr:{required:A["required"]}}},data:function(){return{showHistory:!1,userid:"",username:"",useremail:"",category:[{value:"I",text:"Teknisk support"},{value:"F",text:"Ekonomi support"},{value:"B",text:"Försäljning"},{value:"S",text:"Förslag"}],supportOptions:[{value:"4",text:"låg"},{value:"7",text:"medel"},{value:"10",text:"hög"}],files:[],form:{todo_id:"",company_id:"",creator_company_id:"",created_at:"",updated_at:"",severity:1,status:"",descr:"",name:"",email_at:"",creator_user_id:"",assigned_users:[],comments:[],file_type:"",from_datetime:"",to_datetime:"",linked_todo_id:"",company_ids:[],target:"",rank:0,upvotes:0,downvotes:0,type2:"",public_id:"",tasks:[]},todoSelected:{},TODO_TYPE:{PARENT:"PA",FILE_UPLOAD:"FU",CONFIRM:"CF",COMPANY:"CO",SYSTEM:"SY"},TODO_TYPE2:{NOTSET:"N",BUG:"B",FEATURE:"F",INFO:"I",SUPPORT:"S"},TODO_STATUS:{WAITING:"WAIT",DRAFT:"DRAFT",NOT_DONE:"NOT",DONE:"DONE",CONFIRMED:"CN",DELETED:"DEL",ACCEPTED:"ACC",REJECTED:"REJ",BACKLOG:"BAC",FUTURE:"FUT"},extensions:[".7z",".bz2",".csv",".docx",".doc",".eml",".gif",".gz",".jpeg",".jpg",".odt",".ods",".pdf",".php",".png",".rar",".sql",".txt",".xls",".xlsx",".wav"],creating:!1,editing:!1,todos:[]}},watch:{currentCompanyId:function(t,e){t&&this.loadTodos()}},methods:{showHistoryToggled:function(t){this.showHistory=t},loadUser:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.userid=t.currentUser.user_id,t.useremail=t.currentUser.email,d.a.get("/user?user_id=".concat(t.currentUserId)).then((function(e){t.username=e.data.user.firstname+" "+e.data.user.lastname})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte hämta användare")}));case 3:case"end":return e.stop()}}),e)})))()},loadData:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.currentCompanyId){e.next=2;break}return e.abrupt("return");case 2:t.loadUser(),t.loadTodos();case 4:case"end":return e.stop()}}),e)})))()},createTodoClicked:function(){this.resetForm(),this.creating=!0,this.editing=!1,this.form.severity=4,this.form.type2="I",this.form.tasks=[],this.form.name="",this.files=[],this.form.tasks.push({todo_task_id:"",status:"",type:"SY",file_id:"",name:"",descr:"",comments:[],files:[],updated_at:"",category:"",valid_filetypes:""}),this.createTodo(),this.scrollToEditTodo()},createTodo:function(){var t=this;this.form.company_id=this.currentCompanyId,this.form.period_id=this.currentPeriodId,this.form.creator_company_id=this.currentCompanyId,this.form.type=this.TODO_TYPE.SYSTEM,this.form.status=this.TODO_STATUS.WAITING,this.form.tasks[0].descr=this.form.descr,d.a.post("/todo",this.form).then((function(e){var r=e.data.todo;r.last_updated_at=r.updated_at,t.addTodo(r,!0),t.form=e.data.todo,t.createTask(e.data.todo.todo_id),t.toastr("success","OK","Ärendet har skapats")})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte skapa ärendet")}))},createTask:function(t){var e=this;d.a.post("/todo_task",{todo_id:t,type:"SY"}).then((function(t){e.form["tasks"]=[t.data.task],e.toastr("success","OK","Ärendet har skapats")})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte skapa ärendet")}))},createComment:function(){var t=this,e="sub",r=this.form.descr,n=this.form.tasks[0].todo_task_id;d.a.post("/todo_task/comment",{from:e,comment:r,todo_task_id:n}).then((function(e){t.saveTodo()})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte skicka kommentar")}))},closeTodo:function(t){var e=this.todos.findIndex((function(e){return e.todo_id==t.todo_id}));void 0!=e&&(t=this.todos[e],t.status="DOC",this.todos.splice(e,1,t))},deleteTodo:function(t){var e=this;d.a.delete("/todo?todo_id=".concat(t,"&company_id=").concat(this.currentCompanyId)).then((function(r){e.todos=e.todos.filter((function(e){return e.todo_id!==t})),e.creating=!1,e.editing=!1,e.toastr("success","OK","Ärendet togs bort")})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte ta bort ärendet")}))},selectTodo:function(t){var e=this;d.a.get("/todo?todo_id=".concat(t,"&company_id=").concat(this.currentCompanyId)).then((function(t){e.todoSelected=t.data.todo,e.editing=!0,e.scrollToEditTodo(!0)})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte hämta ärendet")}))},getLangText:function(t,e){for(var r=0;r<t.length;++r)if(t[r].lang===e)return t[r].text;return"Språköversättning saknas"},loadTodos:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.todos=[],e.next=3,d.a.get("/todo/list?type=SY&company_id=".concat(t.currentCompanyId));case 3:return r=e.sent,e.next=6,d.a.get("/todo/list?type=SY&creator_company_id=".concat(t.currentCompanyId));case 6:n=e.sent,200===r.status&&r.data.todos&&(t.todos=r.data.todos.map((function(t){return t.target="T",t}))),200===n.status&&n.data.todos&&(a=n.data.todos.map((function(t){return t.target="S",t})),t.todos=[].concat(Object(o["a"])(t.todos),Object(o["a"])(a)),t.todos=t.todos.map((function(e){var r=t.companies.findIndex((function(t){return e.creator_company_id===t.company_id}));return r&&(e.creator_company_name=t.companies[r].name),e})),console.log("Todo_List",t.todos));case 9:case"end":return e.stop()}}),e)})))()},scrollToEditTodo:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this;setTimeout((function(){var r=t?document.getElementById("support-task-table"):e.$el.getElementsByClassName("scroll-to-container")[0];if(r){var n=-70,a=r.getBoundingClientRect().top+window.pageYOffset+n;window.scrollTo({top:a,behavior:"smooth"})}}),100)},saveTodo:function(t){var e=this;void 0!==t&&t.preventDefault(),d.a.put("/todo",this.form).then((function(t){if(200===t.status){e.toastr("success","OK","Ärendet uppdaterades");var r=t.data.todo;e.addTodo(r),e.creating=!1}})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte uppdatera ärende")}))},addTodo:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)this.todos.push(t);else{var r=this.todos.findIndex((function(e){return e.todo_id==t.todo_id}));void 0!=r&&(t.last_updated_at=t.updated_at,this.todos.splice(r,1,t))}},resetForm:function(){this.form={todo_id:"",company_id:"",creator_company_id:"",created_at:"",updated_at:"",type:"SY",status:"",descr:"",name:"",email_at:"",creator_user_id:"",assigned_users:[],comments:[],file_type:"",from_datetime:"",to_datetime:"",linked_todo_id:"",company_ids:[],target:"",rank:0,upvotes:0,downvotes:0,type2:"",public_id:""}},downloadFileClicked:function(t){var e=this;d.a.get("/file?file_id=".concat(t)).then((function(t){window.open(t.data.file.public_path,"_blank")})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte hämta filen")}))},selectFile:function(){this.$refs.file.click()},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.uploadFile()},uploadFile:function(){var t=this,e=new FormData;e.append("file",this.file),e.append("file_source","todo"),e.append("file_type",""),e.append("company_id",this.currentCompanyId),e.append("todo_id",this.form.todo_id),e.append("todo_task_id",this.form.tasks[0].todo_task_id),d.a.post("/fileupload?todo=true&todo_id=".concat(this.form.todo_id,"&todo_task_id=").concat(this.form.tasks[0].todo_task_id),e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.toastr("success","OK","Filen laddades upp"),t.file.file_id=e.data.fileobjs[0].file_id,t.file.created_at=e.data.fileobjs[0].created_at,t.files.push(t.file)})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte ladda upp fil")}))},toastr:function(t,e,r){this.$bvToast.toast(r,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})}}},E=S,F=(r("7205"),Object(y["a"])(E,n,a,!1,null,"6e1f9ae4",null));e["default"]=F.exports},c99d:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=(0,n.withParams)({type:"ipAddress"},(function(t){if(!(0,n.req)(t))return!0;if("string"!==typeof t)return!1;var e=t.split(".");return 4===e.length&&e.every(o)}));e.default=a;var o=function(t){if(t.length>3||0===t.length)return!1;if("0"===t[0]&&"0"!==t)return!1;if(!t.match(/^\d+$/))return!1;var e=0|+t;return e>=0&&e<=255}},cb69:function(t,e,r){"use strict";(function(t){function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.withParams=void 0;var n="undefined"!==typeof window?window:"undefined"!==typeof t?t:{},a=function(t,e){return"object"===r(t)&&void 0!==e?e:t((function(){}))},o=n.vuelidate?n.vuelidate.withParams:a;e.withParams=o}).call(this,r("c8ba"))},d294:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(0,n.withParams)({type:"or"},(function(){for(var t=this,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.length>0&&e.reduce((function(e,r){return e||r.apply(t,n)}),!1)}))};e.default=a},d4f4:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=(0,n.withParams)({type:"required"},(function(t){return"string"===typeof t?(0,n.req)(t.trim()):(0,n.req)(t)}));e.default=a},e652:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(t){return(0,n.withParams)({type:"requiredUnless",prop:t},(function(e,r){return!!(0,n.ref)(t,this,r)||(0,n.req)(e)}))};e.default=a},eb66:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(t){return(0,n.withParams)({type:"minValue",min:t},(function(e){return!(0,n.req)(e)||(!/\s/.test(e)||e instanceof Date)&&+e>=+t}))};e.default=a},ec11:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("78ef"),a=function(t,e){return(0,n.withParams)({type:"between",min:t,max:e},(function(r){return!(0,n.req)(r)||(!/\s/.test(r)||r instanceof Date)&&+t<=+r&&+e>=+r}))};e.default=a}}]);
//# sourceMappingURL=chunk-571da80d.a1da5d3a.js.map