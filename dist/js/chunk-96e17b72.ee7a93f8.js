(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-96e17b72"],{"520e":function(e,t,a){"use strict";a("c778")},"7b2f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"px-5",attrs:{id:"page-profile-users"}},[a("b-card",[a("v-tabs",{attrs:{"background-color":"white",color:"deep-purple accent-4",right:""}},[a("v-tab",[e._v("Mina uppgifter")]),a("v-tab",[e._v("Notifikationer")]),a("v-tab-item",[a("UserEdit",{attrs:{user_id:e.user_id,companyTitles:e.companyTitles},on:{saveUser:e.saveUser}})],1),a("v-tab-item",[a("UserNotifications",{staticClass:"mt-8",attrs:{user_id:e.user_id}})],1)],1)],1)],1)},r=[],s=(a("b0c0"),a("b85c")),i=(a("96cf"),a("1da1")),c=a("5530"),o=(a("c789"),a("bc3a")),u=a.n(o),l=a("2f62"),d=a("0611"),p=a("0929"),f={name:"user-profile",components:{UserEdit:d["a"],UserNotifications:p["a"]},computed:Object(c["a"])({},Object(l["b"])(["currentCompanyId","currentPeriodId","currentUserId","periods","companies"])),mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadData();case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{user_id:null,titles:[],company:{},form:{user_id:"",email:"",firstname:"",lastname:"",is_accountant:!1,is_director:!1,title_id:"",public_sex:"U",sex:"U"},invite_email:"",genders:[{value:"M",text:"Man"},{value:"F",text:"Kvinna"},{value:"O",text:"Annat"},{value:"U",text:"Okänt"}],companyTitles:[],creating:!1,editing:!1,inviting:!1,users:[],access:[],tmpAccess:[],checkedAccess:[],checkedAll:!1}},watch:{currentCompanyId:function(e,t){}},methods:{loadData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("selectUser: "+e.currentUserId),e.user_id=e.currentUserId,e.setCompany();case 3:case"end":return t.stop()}}),t)})))()},setCompany:function(){var e=this;u.a.get("/company?company_id=".concat(this.currentCompanyId)).then((function(t){u.a.get("/system/titles").then((function(a){var n=a.data.titles,r=t.data.company.settings.titles;null!==r&&void 0!==r||(r=[]),e.titles=[];var i,c=Object(s["a"])(r);try{for(c.s();!(i=c.n()).done;){var o,u=i.value,l=Object(s["a"])(n);try{for(l.s();!(o=l.n()).done;){var d=o.value;if(u===d.id){e.titles.push(d);break}}}catch(f){l.e(f)}finally{l.f()}}}catch(f){c.e(f)}finally{c.f()}console.log("titles loaded: "),e.companyTitles=[];for(var p=0;p<e.titles.length;++p)e.companyTitles.push({text:e.titles[p].name,value:e.titles[p].id});console.log(e.titles)})).catch((function(t){console.error(t),e.toastr("danger","Fel","Kunde inte hämta systemtitlar")}))})).catch((function(t){console.error(t),e.toastr("danger","Fel","Kunde inte hämta inställningar")}))},saveUser:function(e){var t=this;this.form=e,u.a.put("/user",e).then((function(e){switch(console.log(e,"res"),e.status){case 200:case 204:var a,n=Object(s["a"])(t.companyTitles);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.value===t.form.title_id){r;break}}}catch(i){n.e(i)}finally{n.f()}t.toastr("success","OK","Användare uppdaterad");break;case 409:t.toastr("danger","Ogiltig e-postadress","Den angivna e-postadressen finns redan.");break}})).catch((function(e){console.log(e,"err"),t.toastr("danger","Server Fel","Kunde inte uppdatera användare")}))},toastr:function(e,t,a){this.$bvToast.toast(a,{title:t,autoHideDelay:2e3,appendToast:!0,variant:e})}}},m=f,v=(a("520e"),a("2877")),h=a("6544"),b=a.n(h),g=a("71a3"),y=a("c671"),_=a("fe57"),w=Object(v["a"])(m,n,r,!1,null,"56361a79",null);t["default"]=w.exports;b()(w,{VTab:g["a"],VTabItem:y["a"],VTabs:_["a"]})},c778:function(e,t,a){}}]);
//# sourceMappingURL=chunk-96e17b72.ee7a93f8.js.map