(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a314e30e","chunk-cc989d14"],{"0e41":function(t,e,n){},"164c":function(t,e,n){},"16a2":function(t,e,n){"use strict";n("595d")},"1ab5":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-5 mt-8",attrs:{id:"page-basic0"}},[n("b-row",[n("b-col",{attrs:{lg:"12"}},[n("b-card",{staticClass:"mb-2 mx-auto mt-8",attrs:{title:"","hide-footer":""}},[n("div",[n("b-form",{staticClass:"mt-8",on:{submit:t.saveData}},[n("b-form-group",{attrs:{id:"input-group-name",label:"Namn","label-for":"input-name"}},[n("b-form-input",{attrs:{id:"input-name",type:"text",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),""!=t.form.logo?n("b-row",[n("b-col",{attrs:{lg:"12"}},[n("b-img",{staticStyle:{"max-height":"200px"},attrs:{src:t.form.logo+"?rnd="+t.rnd,fluid:"",thumbnail:""}})],1)],1):t._e(),n("b-row",{staticClass:"mt-2"},[n("b-col",{attrs:{lg:"12"}},[n("b-button",{attrs:{type:"button",variant:"success"},on:{click:function(e){return t.selectFile()}}},[t._v("Ladda upp logotyp")])],1)],1),n("input",{ref:"file",attrs:{hidden:"",type:"file",id:"file",accept:"image/*"},on:{change:function(e){return t.handleFileUpload()}}}),n("b-form-group",{staticClass:"mt-8 mb-4",attrs:{id:"input-group-cnum",label:"Föreningsnummer","label-for":"input-cnum"}},[n("b-form-input",{attrs:{id:"input-cnum",type:"text"},model:{value:t.form.cnum,callback:function(e){t.$set(t.form,"cnum",e)},expression:"form.cnum"}})],1),n("b-form-group",{attrs:{id:"input-group-type",label:"Typ","label-for":"input-type"}},[n("b-form-select",{attrs:{id:"type",options:t.companyTypes},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1),n("b-form-group",{attrs:{id:"input-group-org_number",label:"Org. Nummer","label-for":"input-org_number"}},[n("b-form-input",{attrs:{id:"input-org_number",type:"text"},model:{value:t.form.org_number,callback:function(e){t.$set(t.form,"org_number",e)},expression:"form.org_number"}})],1),n("b-form-group",{attrs:{id:"input-group-mpid",label:"Medlemslöpnummer","label-for":"input-mpid"}},[n("b-form-input",{attrs:{id:"input-mpid",type:"text"},model:{value:t.form.mpid,callback:function(e){t.$set(t.form,"mpid",e)},expression:"form.mpid"}})],1),n("b-form-group",{attrs:{id:"input-group-pc_id",label:"Moderförening ID","label-for":"input-pc_id"}},[n("b-form-input",{attrs:{id:"input-pc_id",type:"text"},model:{value:t.form.pc_id,callback:function(e){t.$set(t.form,"pc_id",e)},expression:"form.pc_id"}})],1),n("b-form-group",{attrs:{id:"input-group-street",label:"Gatuadress","label-for":"input-street"}},[n("b-form-input",{attrs:{id:"input-street",type:"text"},model:{value:t.form.street,callback:function(e){t.$set(t.form,"street",e)},expression:"form.street"}})],1),n("b-form-group",{attrs:{id:"input-group-zipcode",label:"Postkod","label-for":"input-zipcode"}},[n("b-form-input",{attrs:{id:"input-zipcode",type:"text"},model:{value:t.form.zipcode,callback:function(e){t.$set(t.form,"zipcode",e)},expression:"form.zipcode"}})],1),n("b-form-group",{attrs:{id:"input-group-post",label:"Postort","label-for":"input-post"}},[n("b-form-input",{attrs:{id:"input-post",type:"text"},model:{value:t.form.post,callback:function(e){t.$set(t.form,"post",e)},expression:"form.post"}})],1),n("b-form-group",{attrs:{id:"input-group-region_code",label:"Region","label-for":"input-region_code"}},[n("b-form-select",{attrs:{id:"region_code",options:t.regionOptions},model:{value:t.region_code,callback:function(e){t.region_code=e},expression:"region_code"}})],1),n("b-form-group",{attrs:{id:"input-group-commune_code",label:"Kommun","label-for":"input-commune_code"}},[n("b-form-select",{attrs:{id:"commune_code",options:t.communeOptions},model:{value:t.commune_code,callback:function(e){t.commune_code=e},expression:"commune_code"}})],1),n("b-form-group",{attrs:{id:"input-group-email",label:"Konto e-post (Ej synlig)","label-for":"input-email"}},[n("b-form-input",{attrs:{id:"input-email",type:"text"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),n("b-form-group",{attrs:{id:"input-group-phone",label:"Konto telefon (Ej synlig)","label-for":"input-phone"}},[n("b-form-input",{attrs:{id:"input-phone",type:"text"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),n("b-form-group",{attrs:{id:"input-group-c_name",label:"Kontakt namn","label-for":"input-c_name"}},[n("b-form-input",{attrs:{id:"input-c_name",type:"text"},model:{value:t.form.c_name,callback:function(e){t.$set(t.form,"c_name",e)},expression:"form.c_name"}})],1),n("b-form-group",{attrs:{id:"input-group-c_email",label:"Kontakt E-post","label-for":"input-c_email"}},[n("b-form-input",{attrs:{id:"input-c_email",type:"text"},model:{value:t.form.c_email,callback:function(e){t.$set(t.form,"c_email",e)},expression:"form.c_email"}})],1),n("b-form-group",{attrs:{id:"input-group-c_phone",label:"Kontakt Telefon","label-for":"input-c_phone"}},[n("b-form-input",{attrs:{id:"input-c_phone",type:"text"},model:{value:t.form.c_phone,callback:function(e){t.$set(t.form,"c_phone",e)},expression:"form.c_phone"}})],1),n("b-form-group",{attrs:{id:"input-group-web",label:"Hemsida","label-for":"input-web"}},[n("b-form-input",{attrs:{id:"input-web",type:"text"},model:{value:t.form.web,callback:function(e){t.$set(t.form,"web",e)},expression:"form.web"}})],1),n("div",{staticClass:"d-flex align-items-center mb-6"},[n("label",{staticClass:"checkbox checkbox-lg checkbox-outline checkbox-success"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.mucf.include,expression:"form.mucf.include"}],attrs:{type:"checkbox",name:""},domProps:{checked:Array.isArray(t.form.mucf.include)?t._i(t.form.mucf.include,null)>-1:t.form.mucf.include},on:{click:function(e){t.form.mucf.include=!t.form.mucf.include},change:function(e){var n=t.form.mucf.include,o=e.target,a=!!o.checked;if(Array.isArray(n)){var s=null,r=t._i(n,s);o.checked?r<0&&t.$set(t.form.mucf,"include",n.concat([s])):r>-1&&t.$set(t.form.mucf,"include",n.slice(0,r).concat(n.slice(r+1)))}else t.$set(t.form.mucf,"include",a)}}}),n("span")]),n("span",{staticClass:"ml-3 cursor-pointer"},[t._v("Inkludera i MUCF beräkningar")])]),null!==t.form.stats&&void 0!==t.form.stats?n("div",{staticClass:"d-flex align-items-center mb-8"},[n("label",{staticClass:"checkbox checkbox-lg checkbox-outline checkbox-outline-2x checkbox-primary"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.stats.pcinc,expression:"form.stats.pcinc"}],attrs:{type:"checkbox",name:""},domProps:{checked:Array.isArray(t.form.stats.pcinc)?t._i(t.form.stats.pcinc,null)>-1:t.form.stats.pcinc},on:{click:function(e){t.form.stats.pcinc=!t.form.stats.pcinc},change:function(e){var n=t.form.stats.pcinc,o=e.target,a=!!o.checked;if(Array.isArray(n)){var s=null,r=t._i(n,s);o.checked?r<0&&t.$set(t.form.stats,"pcinc",n.concat([s])):r>-1&&t.$set(t.form.stats,"pcinc",n.slice(0,r).concat(n.slice(r+1)))}else t.$set(t.form.stats,"pcinc",a)}}}),n("span")]),n("span",{staticClass:"ml-3 cursor-pointer"},[t._v("Statistik ska inkluderas i moderföreningen")])]):t._e(),t._l(t.extras_data,(function(e,o){return[n("b-form-group",{key:o,attrs:{label:e.name}},[n("b-form-input",{attrs:{type:"text"},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}})],1)]})),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Spara")])],2)],1)])],1)],1)],1)},a=[],s=(n("96cf"),n("1da1")),r=n("5530"),i=n("bc3a"),c=n.n(i),l=n("2f62"),m=n("767c"),u={name:"basic-settings",components:{},props:["company_id","company","extras","regions","creating"],computed:Object(r["a"])({},Object(l["b"])(["currentPeriodId","currentCompanyId"])),mounted:function(){this.loadData()},data:function(){return{extras_data:[],rnd:"aaa",communeOptions:[],regionOptions:[],companyTypes:[{value:"default",text:"Förening"},{value:"riks",text:"Riksförbund"},{value:"student",text:"Studentkår"},{value:"workgroup",text:"Arbetsgrupp"}],region_code:"",commune_code:"",form:{company_id:"",name:"",c_email:"",c_name:"",c_phone:"",org_number:"",type:"",cnum:0,mpid:0,pc_id:null,street:"",region_code:"",commune_code:"",web:"",mucf:{include:!1},stats:{pcinc:!1}}}},watch:{company_id:function(t,e){},extras:function(t,e){this.extras_data=t},regions:function(t,e){this.setRegions(t)},company:function(t,e){if(t){for(var n in t)t.hasOwnProperty(n)&&(this.form[n]=t[n]);t.hasOwnProperty("region_code")&&(this.region_code=t.region_code),t.hasOwnProperty("commune_code")&&(this.commune_code=t.commune_code),this.form.hasOwnProperty("mucf")||(this.form["mucf"]={include:!1}),this.form.mucf.hasOwnProperty("include")||(this.form["mucf"]["include"]=!1),null!==this.form.stats&&void 0!==this.form.stats||(this.form.stats={pcinc:!1})}},region_code:function(t,e){t&&void 0!=this.regions[t]&&this.regions[t].hasOwnProperty("communes")&&this.setCommunes(this.regions[t].communes)}},methods:{setCommunes:function(t){for(var e in this.communeOptions=[],t)this.communeOptions.push({value:e,text:t[e].commune});this.communeOptions.sort((function(t,e){return t.text<e.text?-1:t.text>e.text?1:0}))},setRegions:function(t){for(var e in this.regionOptions=[],t)t[e].hasOwnProperty("region")&&this.regionOptions.push({value:e,text:t[e].region});this.region_code,this.regions},loadData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.form=t.company,t.form.hasOwnProperty("mucf")||(t.form["mucf"]={include:!1}),t.form.mucf.hasOwnProperty("include")||(t.form["mucf"]["include"]=!1),t.region_code=t.company.region_code,t.commune_code=t.company.commune_code,t.setRegions(t.regions);case 6:case"end":return e.stop()}}),e)})))()},getLangText:function(t,e){for(var n=0;n<t.length;++n)if(t[n].lang===e)return t[n].text;return"Språköversättning saknas"},loadCompany:function(t){var e=this;c.a.get("/company?company_id=".concat(t)).then((function(t){e.form=t.data.company,e.form.hasOwnProperty("mucf")&&e.form.mucf.hasOwnProperty("include")||(e.form["mucf"]["include"]=!1),null!==e.form.stats&&void 0!==e.form.stats||(e.form.stats={pcinc:!1})})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte hämta föreningsuppgifter")}))},saveData:function(t){var e=this;t.preventDefault(),this.form.company_id=this.company.company_id,this.form.region_code=this.region_code,this.form.commune_code=this.commune_code,this.form.extras=this.extras_data,this.creating?c.a.post("/company",this.form).then((function(t){201===t.status&&(e.toastr("success","OK","Förening skapad"),e.reloadCompanies())})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte skapa förening")})):c.a.put("/company",this.form).then((function(t){204===t.status&&(e.toastr("success","OK","Inställningar uppdaterad"),e.reloadCompanies())})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte uppdatera inställningar")}))},reloadCompanies:function(){var t=this;c.a.get("/company/list").then((function(e){200===e.status&&(t.$store.dispatch(m["c"],e.data.companies),t.$emit("saved"))})).catch((function(e){console.error(e),t.toastr("danger","Serverfel","Gick inte att hämta föreningslista")}))},toastr:function(t,e,n){this.$bvToast.toast(n,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.uploadFile()},selectFile:function(){this.$refs.file.click()},uploadFile:function(){var t=this,e=new FormData;e.append("file",this.file),e.append("file_source","company_logo"),e.append("company_id",this.currentCompanyId),c.a.post("/fileupload",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.toastr("success","OK","Filen laddades upp"),console.log(e.data),t.form.logo=e.data.files[0],console.log(t.form.logo),t.rnd=t.randomstr(5)})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte ladda upp fil")}))},randomstr:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,a=0;a<t;a++)e+=n.charAt(Math.floor(Math.random()*o));return e}}},d=u,p=(n("2a4f"),n("2877")),f=Object(p["a"])(d,o,a,!1,null,"58bb3208",null);e["a"]=f.exports},2403:function(t,e,n){"use strict";n("0e41")},"2a4f":function(t,e,n){"use strict";n("164c")},3452:function(t,e,n){},"3e2c":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"confirmModal",attrs:{"hide-footer":"",title:t.title}},[n("b-row",[n("b-col",{attrs:{lg:"12"}},[n("div",{staticClass:"d-block text-center"},[n("h3",[t._v(t._s(t.message))])])])],1),n("b-row",{staticClass:"mt-8 mb-8"},[n("b-col",{attrs:{lg:"6"}},[n("b-button",{attrs:{variant:t.confirmColor,block:""},on:{click:t.onConfirm}},[t._v(t._s(t.confirm))])],1),n("b-col",{attrs:{lg:"6"}},[n("b-button",{attrs:{variant:"outline-secondary",block:""},on:{click:t.onCancel}},[t._v(t._s(t.cancel))])],1)],1)],1)},a=[],s=(n("96cf"),n("1da1")),r={name:"confirm-modal",data:function(){return{}},props:{type:{type:String,default:"danger"},title:String,message:String,confirm:{type:String,default:"Bekräfta"},cancel:{type:String,default:"Avbryt"}},mounted:function(){return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{show:function(){this.$refs["confirmModal"].show()},onConfirm:function(){this.$refs["confirmModal"].hide(),this.$emit("confirm")},onCancel:function(){this.$refs["confirmModal"].hide(),this.$emit("cancel")}},computed:{confirmColor:function(){switch(this.type){case"danger":return"outline-danger";case"success":return"outline-success";case"info":return"outline-info";case"warning":return"outline-warning";case"primary":return"outline-primary"}}}},i=r,c=n("2877"),l=Object(c["a"])(i,o,a,!1,null,"7c6e001a",null);e["a"]=l.exports},"4dbc":function(t,e,n){},"515d":function(t,e,n){},"51b6":function(t,e,n){"use strict";n("4dbc")},"53b3":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-5",attrs:{id:"page-events"}},[n("h5",{staticClass:"mb-6 ml-2"},[t._v("Evenemang")]),n("div",{staticClass:"scroll-to-top"}),n("EventsTable",{attrs:{items:t.events},on:{showHistoryToggled:t.showHistoryToggled,createEventClicked:t.createEvent,publishEventClicked:t.publishEventClicked,selectEventClicked:t.selectEvent,deleteEventClicked:t.deleteEvent,toastr:t.toastr}}),n("div",{staticClass:"scroll-to-container"}),t.creating||t.editing?n("b-card",{ref:"edit-event",staticClass:"mb-2 edit-event-container",attrs:{title:"",id:"edit-event","hide-footer":""}},[n("b-tabs",{attrs:{"content-class":"mt-3",lazy:""}},[n("b-tab",{attrs:{title:"Inställningar",active:""}},[n("div",[n("b-form",{staticClass:"mt-8",on:{submit:t.saveEvent}},[n("b-form-group",{attrs:{id:"input-group-event_id",label:"ID","label-for":"input-event_id"}},[n("b-form-input",{attrs:{id:"input-event_id",type:"text",disabled:""},model:{value:t.form.event_id,callback:function(e){t.$set(t.form,"event_id",e)},expression:"form.event_id"}})],1),n("b-form-group",{attrs:{id:"input-group-1",label:"Namn på evenemang","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",type:"text",required:"",placeholder:"Namn på evenemang"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("b-form-group",{attrs:{id:"descr-group",label:"Text","label-for":"descr"}},[n("editor",{attrs:{"api-key":"qjaly68mahdluhx0rongdllvelixwgn18730f5z7fdzq6hq2",init:{height:500,menubar:!1,external_plugins:{thsvariables:"http://localhost:8080/assets/plugins/thstinymce.js"},plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |                         alignleft aligncenter alignright alignjustify |                         bullist numlist outdent indent | removeformat | thsvariables"}},model:{value:t.form.descr_html,callback:function(e){t.$set(t.form,"descr_html",e)},expression:"form.descr_html"}})],1),n("b-card",[n("h4",{staticClass:"mb-8"},[t._v("Tidpunkt för evenemanget")]),n("b-row",[n("b-col",{attrs:{lg:"12"}},[n("VueCtkDateTimePicker",{staticClass:"mb-8",attrs:{id:"from_datetime",name:"from_datetime",label:"Starttid",format:"YYYY-MM-DD HH:mm"},model:{value:t.form.from_datetime,callback:function(e){t.$set(t.form,"from_datetime",e)},expression:"form.from_datetime"}})],1)],1),n("b-row",[n("b-col",{attrs:{lg:"12"}},[n("VueCtkDateTimePicker",{staticClass:"mb-8",attrs:{id:"to_datetime",name:"to_datetime",label:"Sluttid",format:"YYYY-MM-DD HH:mm"},model:{value:t.form.to_datetime,callback:function(e){t.$set(t.form,"to_datetime",e)},expression:"form.to_datetime"}})],1)],1)],1),n("b-card",{staticClass:"mt-8"},[n("h4",{staticClass:"mb-8"},[t._v("Adress till evenemanget")]),n("div",{staticClass:"d-flex align-items-center mb-4"},[n("label",{staticClass:"checkbox checkbox-lg checkbox-outline checkbox-success"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.online,expression:"online"}],attrs:{type:"checkbox",name:""},domProps:{checked:Array.isArray(t.online)?t._i(t.online,null)>-1:t.online},on:{click:function(e){t.online=!t.online},change:function(e){var n=t.online,o=e.target,a=!!o.checked;if(Array.isArray(n)){var s=null,r=t._i(n,s);o.checked?r<0&&(t.online=n.concat([s])):r>-1&&(t.online=n.slice(0,r).concat(n.slice(r+1)))}else t.online=a}}}),n("span")]),n("span",{staticClass:"ml-3 cursor-pointer"},[t._v("Evenemanget är online/via internet")])]),t.online?t._e():n("div",[n("b-form-group",{attrs:{id:"address-group",label:"Gatuadress","label-for":"address"}},[n("b-form-input",{attrs:{id:"address",placeholder:"Gatuadress"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),n("b-row",[n("b-form-group",{staticClass:"col-6",attrs:{id:"zipcode-group",label:"Postkod","label-for":"zipcode"}},[n("b-form-input",{attrs:{id:"zipcode",placeholder:"Postkod"},model:{value:t.form.zipcode,callback:function(e){t.$set(t.form,"zipcode",e)},expression:"form.zipcode"}})],1),n("b-form-group",{staticClass:"col-6",attrs:{id:"postaladdress-group",label:"Postort","label-for":"postaladdress"}},[n("b-form-input",{attrs:{id:"postaladdress",placeholder:"Postort"},model:{value:t.form.postaladdress,callback:function(e){t.$set(t.form,"postaladdress",e)},expression:"form.postaladdress"}})],1)],1),t.online||t.hasGoogleMaps?t._e():n("b-alert",{attrs:{show:"",variant:"danger"}},[t._v("Google Maps har inte genererats för detta fysiska evenemang. Klicka på knappen nedan EFTER att du har angett adress, postkod och postort")]),n("b-row",{staticClass:"mb-8"},[n("b-col",{attrs:{lg:"4"}},[n("b-button",{attrs:{type:"button",variant:"primary"},on:{click:t.generateGoogleClicked}},[t._v("Generera Google Maps")])],1)],1),n("b-row",{staticClass:"mb-8"},[n("b-col",{attrs:{lg:"12"}},[n("google-map",{ref:"Map",staticStyle:{height:"256px"},attrs:{center:{lat:t.form.google_maps.lat,lng:t.form.google_maps.lng},zoom:16,id:"map"}},[n("google-map-marker",{attrs:{position:{lat:t.form.google_maps.lat,lng:t.form.google_maps.lng}}}),n("google-map-infowindow",{attrs:{position:t.infoWIndowContext.position,show:t.showInfo,options:{maxWidth:300}},on:{"update:show":function(e){t.showInfo=e}}},[n("h4",[t._v(t._s(t.infoWIndowContext.title))]),n("p",[t._v(t._s(t.infoWIndowContext.description))])])],1)],1)],1)],1)]),n("b-card",{staticClass:"mt-8"},[n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse_url_group",modifiers:{collapse_url_group:!0}}],staticClass:"d-flex justify-content-between w-100 bg-white",on:{click:function(e){t.collapse_url_group=!t.collapse_url_group}}},[n("h4",[t._v("Externa informationslänkar")]),n("b-button",{staticClass:"collapse_button",attrs:{variant:"primary"}},[t._v(" "+t._s(t.collapse_url_group?"Stäng":"Öppna")+" ")])],1),n("b-collapse",{staticClass:"mt-4",attrs:{id:"collapse_url_group"}},[n("b-form-group",{attrs:{id:"facebook_url-group",label:"Facebook Länk","label-for":"facebook_url"}},[n("b-form-input",{attrs:{id:"facebook_url",placeholder:"Facebook Länk"},model:{value:t.form.facebook_url,callback:function(e){t.$set(t.form,"facebook_url",e)},expression:"form.facebook_url"}})],1),n("b-form-group",{attrs:{id:"extern_url-group",label:"Annan länk","label-for":"extern_url"}},[n("b-form-input",{attrs:{id:"extern_url",placeholder:"Annan Länk"},model:{value:t.form.extern_url,callback:function(e){t.$set(t.form,"extern_url",e)},expression:"form.extern_url"}})],1)],1)],1),n("b-card",{staticClass:"mt-8"},[n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse_book_vat_acct",modifiers:{collapse_book_vat_acct:!0}}],staticClass:"d-flex justify-content-between w-100 bg-white",on:{click:function(e){t.collapse_book_vat_acct=!t.collapse_book_vat_acct}}},[n("h4",[t._v("Bokföring")]),n("b-button",{staticClass:"collapse_button",attrs:{variant:"primary"}},[t._v(" "+t._s(t.collapse_book_vat_acct?"Stäng":"Öppna")+" ")])],1),n("b-collapse",{staticClass:"mt-4",attrs:{id:"collapse_book_vat_acct"}},[n("b-form-group",{attrs:{id:"book_vat_acct",label:"Momskonto","label-for":"book_vat_acct"}},[n("b-form-input",{attrs:{id:"book_vat_acct"},model:{value:t.form.book_vat_acct,callback:function(e){t.$set(t.form,"book_vat_acct",e)},expression:"form.book_vat_acct"}})],1),n("b-form-group",{attrs:{id:"book_cost_center",label:"Kostnadsställe","label-for":"book_cost_center"}},[n("b-form-input",{attrs:{id:"book_cost_center"},model:{value:t.form.book_cost_center,callback:function(e){t.$set(t.form,"book_cost_center",e)},expression:"form.book_cost_center"}})],1),n("b-form-group",{attrs:{id:"book_tags",label:"Taggar","label-for":"book_tags"}},[n("b-form-tags",{attrs:{"input-id":"book_tags","remove-on-delete":""},model:{value:t.form.book_tags,callback:function(e){t.$set(t.form,"book_tags",e)},expression:"form.book_tags"}})],1)],1)],1),n("b-card",{staticClass:"mt-8"},[n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.cost-group-member",modifiers:{"cost-group-member":!0}}],staticClass:"d-flex justify-content-between w-100 bg-white",on:{click:function(e){t.cost_group_member=!t.cost_group_member}}},[n("h4",[t._v("Kostnader")]),n("b-button",{staticClass:"collapse_button",attrs:{variant:"primary"}},[t._v(" "+t._s(t.cost_group_member?"Stäng":"Öppna")+" ")])],1),n("b-collapse",{staticClass:"mt-4",attrs:{id:"cost-group-member"}},[n("b-form-group",{attrs:{id:"cost-group",label:"Kostnad för medlemmar","label-for":"cost"}},[n("b-form-input",{attrs:{id:"cost"},model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",e)},expression:"form.cost"}})],1),n("b-form-group",{attrs:{id:"cost_non_members-group",label:"Kostnad för övriga","label-for":"cost_non_members"}},[n("b-form-input",{attrs:{id:"cost_non_members"},model:{value:t.form.cost_non_members,callback:function(e){t.$set(t.form,"cost_non_members",e)},expression:"form.cost_non_members"}})],1)],1)],1),n("b-card",{staticClass:"mt-8"},[n("h4",{staticClass:"mb-8"},[t._v("Kommunikation")]),n("b-form-group",{attrs:{id:"ticket_template_id-group",label:"E-postmall för biljett","label-for":"ticket_template_id"}},[n("b-form-select",{attrs:{id:"ticket_template_id",options:t.emailTemplatesOptions},model:{value:t.form.ticket_template_id,callback:function(e){t.$set(t.form,"ticket_template_id",e)},expression:"form.ticket_template_id"}})],1)],1),t._e(),n("b-card",{staticClass:"mt-8 mb-8"},[n("h4",{staticClass:"mb-8"},[t._v("Ansökningssätt")]),n("b-form-group",[n("div",{staticClass:"d-flex align-items-center"},[n("label",{staticClass:"radio radio-list radio-outline radio-success"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.open_setting,expression:"open_setting"}],attrs:{type:"radio",name:"open_setting",value:"members"},domProps:{checked:t._q(t.open_setting,"members")},on:{change:function(e){t.open_setting="members"}}}),n("span")]),n("span",{staticClass:"ml-3 cursor-pointer"},[t._v("Endast för medlemmar")])])]),n("b-form-group",[n("div",{staticClass:"d-flex align-items-center"},[n("label",{staticClass:"radio radio-list radio-outline radio-success"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.open_setting,expression:"open_setting"}],attrs:{type:"radio",name:"open_setting",value:"public"},domProps:{checked:t._q(t.open_setting,"public")},on:{change:function(e){t.open_setting="public"}}}),n("span")]),n("span",{staticClass:"ml-3 cursor-pointer"},[t._v("Öppet för alla")])])]),n("b-form-group",{attrs:{id:"num_seats",label:"Max antal deltagare","label-for":"num_seats"}},[n("b-form-input",{attrs:{id:"num_seats",type:"number",min:t.clients_event.length},model:{value:t.form.num_seats,callback:function(e){t.$set(t.form,"num_seats",e)},expression:"form.num_seats"}})],1)],1),t._e(),t.online||t.hasGoogleMaps?t._e():n("div",{staticClass:"d-flex justify-content-between"},[n("b-alert",{staticClass:"flex-fill mr-2",attrs:{show:"",variant:"danger"}},[t._v("Detta är ett fysiskt evenemang och du har inte genererat någon google map. Klicka här för att generera")]),n("b-button",{staticStyle:{height:"40px"},attrs:{type:"button",variant:"primary"},on:{click:t.generateGoogleClicked}},[t._v("Klicka här")])],1),n("div",[n("b-button",{attrs:{type:"submit",variant:"primary",disabled:!t.form.members_only&&!t.form.public_only||!t.online&&!t.hasGoogleMaps}},[t._v("Spara")])],1)],1)],1)]),n("b-tab",{staticClass:"table-reponsive",attrs:{title:"Anmälda"}},[n("b-table",{attrs:{items:t.clients_event,fields:t.event_headers,"sticky-header":""},scopedSlots:t._u([{key:"cell(hantera)",fn:function(e){return[n("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:"#"},on:{click:function(n){return t.deleteClient_Event(e.item)}}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Trash.svg"}})],1)])]}}],null,!1,3122649271)})],1)],1)],1):t._e()],1)},a=[],s=(n("99af"),n("4de4"),n("c975"),n("d81d"),n("b0c0"),n("d3b7"),n("ddb0"),n("b85c")),r=(n("96cf"),n("1da1")),i=n("5530"),c=n("ca72"),l=n("bc3a"),m=n.n(l),u=n("c1df"),d=n.n(u),p=n("2f62"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card-custom card-stretch gutter-b"},[n("div",{staticClass:"card-header border-0 py-5"},[n("div",{staticClass:"card-toolbar d-flex justify-content-between justify-content-sm-end w-100"},[n("div",{staticClass:"d-flex align-items-center mr-sm-12 my-2"},[n("label",{staticClass:"checkbox checkbox-lg checkbox-outline checkbox-success"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.show_history,expression:"show_history"}],attrs:{type:"checkbox",name:""},domProps:{checked:Array.isArray(t.show_history)?t._i(t.show_history,null)>-1:t.show_history},on:{click:function(e){t.show_history=!t.show_history},change:function(e){var n=t.show_history,o=e.target,a=!!o.checked;if(Array.isArray(n)){var s=null,r=t._i(n,s);o.checked?r<0&&(t.show_history=n.concat([s])):r>-1&&(t.show_history=n.slice(0,r).concat(n.slice(r+1)))}else t.show_history=a}}}),n("span")]),n("span",{staticClass:"ml-3 cursor-pointer"},[t._v("Tidigare event")])]),n("a",{staticClass:"btn btn-primary font-weight-bolder font-size",attrs:{href:"#"},on:{click:t.createEventClicked}},[n("i",{staticClass:"menu-icon flaticon2-plus",staticStyle:{"font-size":"1.0em"}}),t._v("Nytt event")])])]),n("div",{staticClass:"card-body pt-0 pb-3 table-reponsive"},[n("b-table",{staticClass:"mh-100",attrs:{id:"event-table",fields:t.headers,items:t.items,"head-variant":"light","sticky-header":""},scopedSlots:t._u([{key:"cell(event_id)",fn:function(e){return[n("div",{staticClass:"justify-content-end d-flex"},[n("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:t.event_url(e.item.event_id),target:"_blank"}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Directions.svg"}})],1)]),n("a",{staticClass:"btn btn-icon btn-light btn-sm mr-3",attrs:{href:"#"},on:{click:function(n){return t.selectEventClicked(e.item.event_id)}}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Write.svg"}})],1)]),n("a",{staticClass:"btn btn-icon btn-light btn-sm",attrs:{href:"#"},on:{click:function(n){return t.deleteEventClicked(e.item.event_id)}}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Trash.svg"}})],1)])])]}}])})],1)])},b=[],g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[n("span",{staticClass:"text-dark-75 font-weight-bolder d-block font-size-lg"},[t._v(t._s(t.event.name))])]),n("td",[t._v(t._s(t.formatDate(t.event.from_datetime)))]),n("td",[t._v(t._s(t.event.num_signups))]),n("td",[t._v(t._s(t.event.num_seats))]),n("td",{staticClass:"text-right pr-0"},[n("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:t.event_url,target:"_blank"}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Write.svg"}})],1)]),n("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:"#"},on:{click:function(e){return t.selectEventClicked(t.event.event_id)}}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Write.svg"}})],1)]),n("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:"#"},on:{click:function(e){return t.deleteEventClicked(t.event.event_id)}}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Trash.svg"}})],1)])])])},v=[],h={name:"event-table-row",props:["event"],computed:Object(i["a"])(Object(i["a"])({},Object(p["b"])(["currentCompanyId"])),{},{event_url:function(){return"/events/"+this.event.event_id}}),data:function(){return{}},mounted:function(){},watch:{},methods:{formatDate:function(t){var e=d()(t);return e.format("YYYY-MM-DD HH:mm")},gotoEvent:function(t){this.$router.push("/event/".concat(t))},publishEventClicked:function(t){this.$emit("publishEventClicked",t)},selectEventClicked:function(t){this.$emit("selectEventClicked",t)},deleteEventClicked:function(t){this.$emit("deleteEventClicked",t)}}},_=h,k=(n("51b6"),n("2877")),y=Object(k["a"])(_,g,v,!1,null,"14f95d44",null),C=y.exports,x={name:"events-table",props:["items","currentCompanyId"],components:{EventsTableRow:C},watch:{show_history:function(t,e){this.$emit("showHistoryToggled",t)}},methods:{createEventClicked:function(){this.$emit("createEventClicked")},selectEventClicked:function(t){this.$emit("selectEventClicked",t)},deleteEventClicked:function(t){this.$emit("deleteEventClicked",t)},publishEventClicked:function(t){this.$emit("publishEventClicked",t)},gotoEvent:function(t){this.$router.push("/event/".concat(t))},toastr:function(t,e,n){this.$emit("toastr",t,e,n)},event_url:function(t){return"/event/"+t}},data:function(){return{show_history:!1,headers:[{key:"name",label:"Evenemang",sortable:!0,thClass:"pl-7 align-middle",tdClass:"pl-7"},{key:"from_datetime",label:"Start Datum",sortable:!0,thClass:"w-140px align-middle",tdClass:"w-140px"},{key:"num_signups",label:"Anmälda",sortable:!0,thClass:"w-100px align-middle",tdClass:"w-100px"},{key:"num_seats",label:"Platser",sortable:!0,thClass:"w-150px align-middle",tdClass:"w-150px"},{key:"event_id",label:"Hantera",thClass:"text-right pr-22 w-110px align-middle"}],list:[]}}},w=x,E=(n("e827"),Object(k["a"])(w,f,b,!1,null,"67ebd0de",null)),$=E.exports,O=n("a8d5"),T=n("e30a"),S=n.n(T),P={name:"events",components:{EventsTable:$,editor:c["a"],Companies:O["default"],VueCtkDateTimePicker:S.a},computed:Object(i["a"])({},Object(p["b"])(["companies","currentCompanyId","currentPeriodId"])),mounted:function(){this.loadData()},data:function(){return{open_setting:"members",showHistory:!1,hasGoogleMaps:!1,cost_group_member:!1,collapse_book_vat_acct:!1,collapse_url_group:!1,form:{event_id:"",num_strikes_orgs:9999999,num_strikes_max:9999999,num_seats:0,num_signups:0,num_strike_days:0,strike_template_id:"",strike_system:!1,members_only:!0,public_only:!1,sms_template_id:"",send_sms_invite:!1,email_template_id:"",send_email_invite:!1,signedup_template_id:"",ticket_template_id:"",cost_non_members:0,cost:0,extern_url:"",facebook_url:"",to_datetime:"",from_datetime:"",postaladdress:"",zipcode:"",address:"",descr:"",name:"",type:"PHY",book_acct_first:0,book_acct_second:0,google_maps:{lat:0,lng:0,static_link:""},book_tags:[],book_acct:"",book_vat_acct:"",book_cost_center:""},clients_forevent:[],clients_event:[],online:!1,creating:!1,editing:!1,templates:[],emailTemplatesOptions:[],smsTemplatesOptions:[],addressok:!1,zipcodeok:!1,postaladdressok:!1,generateGoogle:!1,showInfo:!1,events:[],event_headers:[{key:"from",label:"Registrering",sortable:!0},{key:"company",label:"Företagsnamn"},{key:"firstname",label:"Förnamn",sortable:!1},{key:"lastname",label:"Efternamn",sortable:!0},{key:"email",label:"E-post"},{key:"telefon",label:"Telefon"},{key:"hantera",label:"Hantera"}],infoWIndowContext:{position:{lat:44.2899,lng:11.8774}},infoWindowsList:[]}},watch:{open_setting:function(t,e){"members"==t?(this.form.members_only=!0,this.form.public_only=!1):"public"==t&&(this.form.members_only=!1,this.form.public_only=!0)},currentCompanyId:function(t,e){t&&(this.loadEvents(),this.clientsJoinedEvent())}},methods:{showHistoryToggled:function(t){this.showHistory=t,this.loadEvents()},generateGoogleClicked:function(){this.generateGoogleMaps(this.form.address,this.form.zipcode,this.form.postaladdress)},generateGoogleMaps:function(t,e,n){var o=this;m.a.get("/company/geo?address=".concat(t,"&zipcode=").concat(e,"&postaladdress=").concat(n,"&country=SE")).then((function(t){200===t.status&&(o.toastr("success","Google Maps","Google maps har genererats"),o.form.google_maps={lat:t.data.geo.lat,lng:t.data.geo.lng,static_link:""},o.hasGoogleMaps=!0,o.saveEvent())})).catch((function(t){console.error(t),o.toastr("danger","Google Maps","Misslyckades generera Google Maps")}))},loadData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.currentCompanyId){e.next=2;break}return e.abrupt("return");case 2:t.loadTemplates(),t.loadEvents();case 4:case"end":return e.stop()}}),e)})))()},createEvent:function(){var t=this;this.creating=!0,this.editing=!0,m.a.post("/events",{name:"Nytt evenemang",company_id:this.currentCompanyId,period_id:this.currentPeriodId,members_only:!0,public_only:!1}).then((function(e){201==e.status?(t.events.push(e.data.event),t.selectEvent(e.data.event.event_id),t.toastr("success","OK","Ett tomt evenemang har skapats")):(console.error(err),t.toastr("danger","Server Fel","Kunde inte skapa evenemang"))})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte skapa evenemang")}))},deleteEvent:function(t){var e=this;m.a.delete("/events?event_id=".concat(t,"&company_id=").concat(this.currentCompanyId)).then((function(n){e.events=e.events.filter((function(e){return e.event_id!==t})),e.creating=!1,e.editing=!1,e.toastr("success","OK","Evenemanget togs bort")})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte ta bort evenemang")}))},selectEvent:function(t){var e=this;m.a.get("/events?event_id=".concat(t,"&company_id=").concat(this.currentCompanyId)).then((function(n){e.form=n.data.event,e.creating=!1,e.editing=!0,e.online="ONL"===e.form.type,e.form.members_only||e.form.public_only||(e.form.members_only=!0),e.open_setting=e.form.members_only?"members":"public",void 0===e.form.google_maps?(e.hasGoogleMaps=!1,e.form.google_maps={lat:0,lng:0,static_link:""}):0!==e.form.google_maps.lat&&0!==e.form.google_maps.lng&&""!==e.form.google_maps.lat&&""!==e.form.google_maps.lng?e.hasGoogleMaps=!0:e.hasGoogleMaps=!1,e.scrollToClassName("scroll-to-container"),m.a.get("/client_event?event_id=".concat(t)).then((function(t){if(200===t.status){e.clients_forevent=t.data.client_events,e.cc=t.data.companies;var n,o=Object(s["a"])(e.clients_forevent);try{for(o.s();!(n=o.n()).done;){var a=n.value;a.client.company="";var r,i=Object(s["a"])(a.client.company_ids);try{for(i.s();!(r=i.n()).done;){var c=r.value;a.client.company+=e.cc[c]+" "}}catch(err){i.e(err)}finally{i.f()}}}catch(err){o.e(err)}finally{o.f()}e.clientsJoinedEvent()}})).catch((function(t){console.log(t,"clients for event")}))})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte hämta evenemang")}))},clientsJoinedEvent:function(){var t=this.clients_forevent.map((function(t){return{id:t.client_event.client_event_id,from:void 0===t.client.updated_at?t.client_event.ts_signup:t.client.updated_at,company:t.client.company,firstname:t.client.firstname,lastname:t.client.lastname,email:t.client.email,telefon:t.client.phone,hantera:""}}));this.clients_event=t,this.form.num_strikes_max<this.clients_event.length&&(this.form.num_strikes_max=this.clients_event.length)},deleteClient_Event:function(t){var e=this;m.a.delete("/client_event?client_event_id=".concat(t.id)).then((function(n){e.clients_forevent=e.clients_forevent.filter((function(e){return e.client_event.client_event_id!=t.id})),e.clientsJoinedEvent(),e.toastr("success","OK","Evenemang togs bort")})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte anmäla till evenemang")}))},publishEventClicked:function(t){},getLangText:function(t,e){for(var n=0;n<t.length;++n)if(t[n].lang===e)return t[n].text;return"Språköversättning saknas"},loadEvents:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,o,a,s,r,i,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$loading.show(),t.events=[],e.next=4,m.a.get("/events/list?company_id=".concat(t.currentCompanyId));case 4:if(o=e.sent,200!==o.status){e.next=25;break}a=o.data.events,s=d()(),e.t0=regeneratorRuntime.keys(a);case 9:if((e.t1=e.t0()).done){e.next=23;break}r=e.t1.value,i=a[r],c=0;case 13:if(!(c<i.length)){e.next=21;break}if(l=d()(i[c].to_datetime),t.showHistory||!(l<s)){e.next=17;break}return e.abrupt("continue",18);case 17:t.events.push(i[c]);case 18:++c,e.next=13;break;case 21:e.next=9;break;case 23:e.next=27;break;case 25:console.error(o),t.toastr("danger","Server Fel","Kunde inte lista evenemang");case 27:n.hide();case 28:case"end":return e.stop()}}),e)})))()},loadTemplates:function(){var t=this;this.templates=[],this.smsTemplatesOptions=[],this.emailTemplatesOptions=[],m.a.get("/template/list?company_id=".concat(this.currentCompanyId)).then((function(e){200===e.status&&(t.templates=e.data.templates);for(var n=0;n<t.templates.length;++n)0===t.templates[n].is_sms?t.emailTemplatesOptions.push({value:t.templates[n].template_id,text:t.templates[n].name}):t.smsTemplatesOptions.push({value:t.templates[n].template_id,text:t.templates[n].name})})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte lista mallar")}))},scrollToClassName:function(t){var e=this;setTimeout((function(){var n=e.$el.getElementsByClassName(t)[0];if(n){var o=-70,a=n.getBoundingClientRect().top+window.pageYOffset+o;window.scrollTo({top:a,behavior:"smooth"})}}),100)},checkUrl:function(t){return""==t||"https://"==t?"":t.indexOf("http://")<0&&t.indexOf("https://")<0?"https://"+t:t},saveEvent:function(t){var e=this;void 0!==t&&t.preventDefault(),this.form.company_id=this.currentCompanyId,this.form.type=this.online?"ONL":"PHY",this.form.facebook_url=this.checkUrl(this.form.facebook_url),this.form.extern_url=this.checkUrl(this.form.extern_url),m.a.put("/events",this.form).then((function(t){200===t.status&&(e.toastr("success","OK","Evenemanget uppdaterades"),e.loadEvents())})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte uppdatera evenemanget")}))},publishEvent:function(t){void 0!==t&&t.preventDefault(),this.editing=!1,this.creating=!1,this.scrollToClassName("scroll-to-top")},toastr:function(t,e,n){this.$bvToast.toast(n,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})}}},j=P,K=(n("9551"),Object(k["a"])(j,o,a,!1,null,"d9017c24",null));e["default"]=K.exports},5403:function(t,e,n){"use strict";n("515d")},"595d":function(t,e,n){},9551:function(t,e,n){"use strict";n("3452")},a29e:function(t,e,n){},a8d5:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-5",attrs:{id:"page-companies"}},[n("h5",{staticClass:"mb-6 ml-2"},[t._v("Alla föreningar i systemet")]),n("Confirm",{ref:"confirmModal",attrs:{title:"Bekräfta borttagning",message:"Är du säker på att du vill ta bort föreningen?"},on:{cancel:t.cancelDelete,confirm:t.confirmDelete}}),n("CompaniesTable",{on:{createCompanyClicked:t.createCompanyClicked,selectCompanyClicked:t.selectCompanyClicked,deleteCompanyClicked:t.deleteCompanyClicked}}),n("div",{staticClass:"scroll-to-container"}),t.creating||t.editing?n("b-card",{ref:"edit-company",staticClass:"mb-2 edit-company-container",attrs:{title:"",id:"edit-company","hide-footer":""}},[n("div",[n("Basic",{attrs:{company_id:t.company_id,company:t.company,regions:t.regions,creating:t.creating}})],1)]):t._e()],1)},a=[],s=n("5530"),r=n("bc3a"),i=n.n(r),c=n("2f62"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card-custom card-stretch gutter-b"},[n("div",{staticClass:"card-header border-0 py-5"}),n("b-card",{staticStyle:{"overflow-x":"scroll"}},[n("div",{staticClass:"d-md-flex justify-content-between"},[n("div",{staticClass:"w-100 mr-md-10 mb-md-0 mb-4"},[n("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Sök förening"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),n("div",{staticClass:"d-flex justify-content-end align-items-center"},[n("v-select",{staticClass:"mr-sm-2",staticStyle:{width:"200px"},attrs:{options:[25,50,100],clearable:!1,searchable:!1},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),n("b-pagination",{staticClass:"ml-auto mb-0",attrs:{"total-rows":t.companies.length,"per-page":t.perPage,"aria-controls":"search-result-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)]),n("b-table",{staticClass:"mt-3 cursor mh-100",attrs:{id:"search-result-table",filter:t.filter,items:t.companies,fields:t.showFields,"per-page":t.perPage,"current-page":t.currentPage,"head-variant":"light","sticky-header":""},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[n("div",{staticClass:"d-flex justify-content-end"},[n("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:"#"},on:{click:function(n){return t.selectCompanyClicked(e.item.id)}}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Write.svg"}})],1)]),n("a",{staticClass:"btn btn-icon btn-light btn-sm",attrs:{href:"#"},on:{click:function(n){return t.deleteCompanyClicked(e.item.id)}}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Trash.svg"}})],1)])])]}}])})],1),n("div",{staticClass:"card-body pt-0 pb-3"})],1)},m=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[t._v(t._s(t.company.name))]),n("td",{staticClass:"text-right pr-0"},[n("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3",attrs:{href:"#"},on:{click:function(e){return t.selectCompanyClicked(t.company.id)}}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Write.svg"}})],1)]),n("a",{staticClass:"btn btn-icon btn-light btn-sm",attrs:{href:"#"},on:{click:function(e){return t.deleteCompanyClicked(t.company.id)}}},[n("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[n("inline-svg",{attrs:{src:"/assets/svg/Trash.svg"}})],1)])])])},d=[],p={name:"company-table-row",props:["company","allSelected"],computed:Object(s["a"])({},Object(c["b"])(["currentCompanyId"])),data:function(){return{}},mounted:function(){},watch:{},methods:{selectCompanyClicked:function(t){this.$emit("selectCompanyClicked",t)},deleteCompanyClicked:function(t){this.$emit("deleteCompanyClicked",t)}}},f=p,b=(n("2403"),n("2877")),g=Object(b["a"])(f,u,d,!1,null,"0e5b631a",null),v=g.exports,h=n("4a7a"),_=n.n(h),k=(n("6dfc"),{name:"companies-table",components:{CompaniesTableRow:v,vSelect:_.a},computed:Object(s["a"])({},Object(c["b"])(["currentCompanyId","currentPeriodId","companies"])),watch:{companies:function(t,e){console.log("companies changed")}},mounted:function(){},methods:{createCompanyClicked:function(){},selectCompanyClicked:function(t){this.$emit("selectCompanyClicked",t)},deleteCompanyClicked:function(t){this.$emit("deleteCompanyClicked",t)},toastr:function(t,e,n){this.$bvToast.toast(n,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})}},data:function(){return{list:[],perPage:20,currentPage:1,options:[20,50,100],showFields:[{key:"name",label:"Förening",show:!0,sortable:!0,thClass:"pl-7",tdClass:"pl-7"},{key:"actions",label:"",show:!0,sortable:!1,thClass:"w-100"}],filter:""}}}),y=k,C=(n("5403"),n("6544")),x=n.n(C),w=n("b974"),E=Object(b["a"])(y,l,m,!1,null,"00b9e201",null),$=E.exports;x()(E,{VSelect:w["a"]});var O=n("1ab5"),T=n("3e2c"),S=n("767c"),P={name:"companies",components:{CompaniesTable:$,Basic:O["a"],Confirm:T["a"]},computed:Object(s["a"])({},Object(c["b"])(["currentCompanyId","currentPeriodId","periods"])),mounted:function(){this.loadRegions()},data:function(){return{form:{company_id:"",name:""},company_id:null,company:{},regions:{},creating:!1,editing:!1,regionOptions:[]}},watch:{currentCompanyId:function(t,e){}},methods:{createCompanyClicked:function(){},selectCompanyClicked:function(t){var e=this;this.company_id=t,i.a.get("/company?company_id=".concat(this.company_id)).then((function(t){e.company=t.data.company,e.editing=!0,e.scrollToEditCompany()})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte hämta förening")}))},deleteCompanyClicked:function(t){var e=this;i.a.delete("/company?company_id=".concat(t)).then((function(n){e.$store.dispatch(S["a"],t),e.toastr("success","OK","Föreningen togs bort")})).catch((function(t){console.error(t),e.toastr("danger","Server Fel","Kunde inte radera förening")}))},getLangText:function(t,e){for(var n=0;n<t.length;++n)if(t[n].lang===e)return t[n].text;return"Språköversättning saknas"},scrollToEditCompany:function(){var t=this;setTimeout((function(){var e=t.$el.getElementsByClassName("scroll-to-container")[0];if(e){var n=-70,o=e.getBoundingClientRect().top+window.pageYOffset+n;window.scrollTo({top:o,behavior:"smooth"})}}),100)},cancelDelete:function(){},confirmDelete:function(){},loadRegions:function(){var t=this;i.a.get("/location/regions").then((function(e){for(var n in t.regions=e.data.regions,t.regionOptions=[],t.regions)t.regionOptions.push({value:n,text:t.regions[n].region});t.regionOptions.sort((function(t,e){return t.text<e.text?-1:t.text>e.text?1:0}))})).catch((function(e){console.error(e),t.toastr("danger","Server Fel","Kunde inte hämta regioner")}))},toastr:function(t,e,n){this.$bvToast.toast(n,{title:e,autoHideDelay:2e3,appendToast:!0,variant:t})}}},j=P,K=(n("16a2"),Object(b["a"])(j,o,a,!1,null,"5e9c01fe",null));e["default"]=K.exports},e827:function(t,e,n){"use strict";n("a29e")}}]);
//# sourceMappingURL=chunk-a314e30e.c5f08f3d.js.map